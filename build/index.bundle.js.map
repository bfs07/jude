{"version":3,"sources":["webpack:///webpack/bootstrap c2b1740c51b5219514c7","webpack:///external \"mongoose\"","webpack:///external \"path\"","webpack:///external \"babel-runtime/core-js/get-iterator\"","webpack:///external \"express\"","webpack:///./models/index.js","webpack:///external \"babel-runtime/regenerator\"","webpack:///external \"babel-runtime/helpers/asyncToGenerator\"","webpack:///external \"babel-runtime/helpers/classCallCheck\"","webpack:///external \"babel-runtime/helpers/createClass\"","webpack:///external \"babel-runtime/core-js/promise\"","webpack:///external \"babel-runtime/core-js/object/keys\"","webpack:///./judge/utils.js","webpack:///external \"fs-extra\"","webpack:///./auth2.js","webpack:///external \"babel-runtime/helpers/extends\"","webpack:///./routes/api/submission.js","webpack:///external \"babel-runtime/core-js/object/get-prototype-of\"","webpack:///external \"babel-runtime/helpers/possibleConstructorReturn\"","webpack:///external \"babel-runtime/helpers/inherits\"","webpack:///./judge/logger.js","webpack:///external \"babel-runtime/helpers/slicedToArray\"","webpack:///external \"fs\"","webpack:///./judge/storage.js","webpack:///(webpack)/buildin/module.js","webpack:///external \"babel-runtime/core-js/object/assign\"","webpack:///./db.js","webpack:///external \"mongo-queue2\"","webpack:///external \"babel-runtime/core-js/set\"","webpack:///./models/Problem.js","webpack:///external \"sha256\"","webpack:///external \"glob\"","webpack:///external \"process\"","webpack:///./judge/loader.js","webpack:///external \"babel-runtime/core-js/map\"","webpack:///./judge/scoring.js","webpack:///./routes/api/v2/util.js","webpack:///./routes/common.js","webpack:///./judge/environment.js","webpack:///external \"passport\"","webpack:///./index.js","webpack:///./app.js","webpack:///external \"express-session\"","webpack:///external \"connect-mongo\"","webpack:///external \"serve-favicon\"","webpack:///external \"morgan\"","webpack:///external \"cookie-parser\"","webpack:///external \"body-parser\"","webpack:///external \"multer\"","webpack:///external \"connect-flash\"","webpack:///external \"express-restify-mongoose\"","webpack:///./routes/api/index.js","webpack:///./routes/api/contest.js","webpack:///external \"jude-seaweedfs\"","webpack:///./models/Contest.js","webpack:///external \"mongoose-deep-populate\"","webpack:///./models/User.js","webpack:///./models/Submission.js","webpack:///./models/Clarification.js","webpack:///./models/Printout.js","webpack:///./routes/api/user.js","webpack:///external \"express-static-gzip\"","webpack:///external \"timesync/server\"","webpack:///./routes/index.js","webpack:///external \"yauzl\"","webpack:///external \"concat-stream\"","webpack:///external \"babel-runtime/helpers/typeof\"","webpack:///external \"util\"","webpack:///external \"node-wildcard\"","webpack:///external \"winston\"","webpack:///external \"es6-promisify\"","webpack:///external \"streamifier\"","webpack:///./judge/task.js","webpack:///external \"deepcopy\"","webpack:///external \"yamljs\"","webpack:///./routes/api/v2/index.js","webpack:///external \"crypto\"","webpack:///./routes/api/v2/contest.js","webpack:///./routes/api/v2/problems.js","webpack:///./routes/contest.js","webpack:///external \"babel-runtime/helpers/toConsumableArray\"","webpack:///external \"babel-runtime/core-js/object/entries\"","webpack:///./judge/grader.js","webpack:///external \"promise-reflect\"","webpack:///./judge/verdict.js","webpack:///./judge/sandbox.js","webpack:///external \"bluebird\"","webpack:///external \"tmp\"","webpack:///external \"child-process-promise\"","webpack:///./judge/profiler.js","webpack:///./judge/precheck.js","webpack:///./routes/admin.js"],"names":["path","require","fs","mongoose","module","exports","Contest","User","Submission","Problem","Clarification","Printout","p","stat","exists","res","isFile","fileExists","statAsync","isDirectory","dirExists","pattern","opts","resolve","reject","glob","err","files","globAsync","args","mkdtemp","result","util","inspect","logInspect","console","log","fillUpTo","arr","n","Array","length","undefined","pop","el","push","destroy","obj","prop","property","normalizePath","normalizedPath","normalize","slice","models","crypto","Schema","getTokenModel","db","TokenSchema","_id","type","String","user","Types","ObjectId","ref","required","expiresAt","Date","roles","Token","model","getAuthorizationToken","req","authorizationToken","get","split","cookies","token","initialize","next","Error","age","secret","id","usernameField","passwordField","usernameSchema","passwordSchema","getUsername","body","getPassword","requiredFieldsFn","filterFn","qs","queryFn","findOne","passwordFn","roleFn","auth2","authenticate","success","failure","isArray","code","message","status","json","error","matchedRoles","filter","indexOf","role","randomToken","randomBytes","toString","session","toObject","now","tokenObject","save","cookie","maxAge","httpOnly","isAuth","clearCookie","remove","registeredRoles","possiblyAuth","dispose","redirect","sendStatus","findOneAndRemove","express","router","Router","SubmissionNoCode","handleSubmissionError","handleRequestError","rejudge","findByIdAndUpdate","new","sub","populate","judeQueue","add","problem","subid","fid","lang","language","verdict","attr","datasets","data","name","passed","score","info","post","params","winston","process","logger","Logger","level","env","LOG_LEVEL","transports","Console","VERBOSE","File","filename","__dirname","yauzl","concatStream","utils","wildcard","promisify","streamifier","dealWithEntry","zipFile","entry","openReadStream","stream","readEntry","concat","buffer","fileName","on","err2","pipe","loadZipAsync","absPath","open","lazyEntries","toWait","test","once","close","all","resWait","Storage","constructor","charAt","content","getFileBuffer","sort","RealStorage","abs","writeFile","readFile","createReadStream","MemoryStorage","lstat","cwd","nodir","map","file","join","promises","resPath","createFileFromContent","norm","Buffer","def","hasOwnProperty","fn","parent","store","load","getFileString","MongoQueue2","weed","mongo_host","MONGO_HOST","weed_host","WEED_HOST","uri","global","createConnection","mods","weedClient","server","port","VisibilitySchema","contest","ProblemSchema","minlength","maxlength","match","statementFid","Mixed","visibility","timestamps","index","unique","pre","contestQuery","problems","$elemMatch","find","contests","equals","LOADERS","_","loader","isLoadable","autoDetect","task","YAML","scoring","JUDE_FN","Loader","JudeLoader","datasetPath","testsPath","inputs","input","output","replace","isReadable","in","out","percentageSum","dataset","percentage","getTestcases","cur","testcases","checkerParams","Math","EPS","cfg","lims","limits","checks","checker","multiplier","timeMultiplier","ratio","timeApproximation","weight","parseDatasets","author","time","ceil","memory","source","toUpperCase","statement","blockedLanguages","Task","parse","getTask","debug","submissionComparator","a","b","timeInContest","getTime","Scoring","_task","_opts","defaults","verdicts","submissions","toSkip","skipped","key","evalContest","s","hasSkipped","tk","evals","ProductScoring","affect","fails","penalty","parseInt","submission","evaluation","eval","getWeight","reduce","old","SubtaskSumScoring","getDatasetFromName","bestIndex","bestScore","i","SubtaskMaxScoring","maxTime","max","IcpcScoring","_Scoring","SubtaskScoring","isAdmin","getUserContest","handleApiError","checkAdminContest","contestId","exec","findById","ex","cb","fse","tmp","setGracefulCleanup","JudgeConfig","MAX_TRIES","SANDBOX_OFFSET","MAX_SANDBOXES","MAX_SIMUL_TESTS","COMPILATION_TL","CHECKING_TL","CHECKING_ML","CHECKING_WTL","WT_MULTIPLIER","OUTPUT_LIMIT","TEMP_DIR","ISOLATE_PATH","VISIBILITY_WINDOW","BOUND_ML","FileCacher","size","dirSync","prefix","unsafeCleanup","has","best","value","idx","random","getFilePath","removeSync","delete","popLessFrequent","nv","set","writeStream","createWriteStream","ensureSpace","ping","d","copySync","flag","JudgeEnvironment","seaweed","sandboxes","nextSandboxId","cache","checkerCache","ack","queue","app","PORT","listen","MongoStore","favicon","cookieParser","bodyParser","multer","flash","restify","apiRoutes","staticCompressed","timesync","routes","use","enableBrotli","resave","saveUninitialized","mongooseConnection","urlencoded","extended","requestHandler","header","method","matchPasswords","isValid","restifyShared","runValidators","totalCountHeader","preMiddleware","query","outputFn","erm","statusCode","fixEntry","serve","findOneAndUpdate","render","contestRouter","userRouter","submissionRouter","handleContestError","ContestSelection","override","users","du","u","handle","oldUser","update","awaited","erred","x","send","deepPopulate","ContestProblem","letter","color","default","scoringOpts","ContestSchema","start_time","end_time","validate","validator","v","letters","val","ids","hidden","Boolean","upseeing","blind","Number","freeze","unfreeze","plugin","y","xd","yd","methods","hasStarted","hasEnded","isRunning","getTimeInContest","getDurationInContest","diff","getRemainingInContest","isFrozen","isBlind","sha256","UserSchema","description","password","email","unofficial","disabled","weights","isModified","candidate","_creator","DEFAULT_VERDICT","SubmissionSchema","codeHash","CommentSchema","text","ClarificationSchema","broadcast","comments","PrintoutSchema","lines","done","UserSelection","handleUserError","api2","admin","passport","handleInternalError","loadZip","loade","write","then","toJSON","hasStatement","getStatement","infoStatement","catch","deepcopy","getScoringClass","wd","e","getDatasets","$set","minimize","grader","precheck","ContestProblemSelection","mongo","filterOutSub","filterOutPrivateSub","filterPrivateUser","filterBlind","applyFreezeFilter","subs","checkForDuplicateSubmission","hashCode","getVisibleClarifications","clarificationQuery","$or","getVisiblePrintouts","printoutQuery","estimateLines","acc","select","contestObj","languages","availableLanguages","$ne","teams","clarifications","printouts","_user","userObject","filteredSubs","findIndex","prob","read","lean","filteredSub","insertData","$push","t","trim","target","clar","toPush","updateQuery","$each","err3","toRejudge","reflect","ans","r","iso","command","stdin","stdout","stderr","execute","evaluate","sol","SOURCE_PATH","solExec","SOURCE_EXEC_PATH","Isolate","init","Compilation","getLog","cleanup","compilationStepAsync","testcase","timelimit","getTimelimit","memorylimit","getMemorylimit","evaluationResult","checkingResult","execTime","exitWith","execLog","Evaluation","translateBoxExitCode","Verdict","dummy","getRunningTime","exitStatus","getExitStatus","exitCode","getExitCode","IsolateConst","EXIT_TIMEOUT","EXIT_TIMEOUT_WALL","EXIT_OUTPUT_LIMIT","createFileFromStorage","Checking","getCheckerLanguage","CHECKER_EXEC_PATH","testCaseAsync","totalTime","wallTime","cases","boxes","j","promiseReflect","pingCurrent","caseResult","getWallTime","box","testDataset","packageFid","compilationSteps","checkerPath","getChecker","compilationResult","checkerCompilationResult","getDatasetsCount","addFromContent","datasetVerdict","testTask","pack","testPackage","sandbox","environment","Profiler","policyPath","javaExecutorPath","CPP","execPath","wtlimit","wallclockLimit","memorySize","removeFile","Py2","setEnv","HOME","dirs","Py3","Java","oldProc","maxProcesses","oldEnv","oldCgTiming","cgTiming","oldCgMemory","cgMemorySize","oldCg","cgroup","MALLOC_ARENA_MAX","globFromStorage","basename","C","answer","checkerInput","checkerOutput","checkerError","getFileToString","sourceFile","preserveEnv","oldTL","oldWTL","getFileToStorage","globToStorage","CHECKER_PATH","judeLoader","slow_code","tle_code","fake_mle_code","slow2_code","java_wacode","java_mlecode","java_rtecode","crazy_code","pycode","VerdictConst","VERDICT_INQ","VERDICT_SKIP","VERDICT_WA","VERDICT_RTE","VERDICT_MLE","VERDICT_TLE","VERDICT_WTE","VERDICT_OLE","VERDICT_CE","VERDICT_CTE","VERDICT_FAIL","VERDICT_CHTE","VERDICT_JE","VERDICT_UE","VERDICT_AC","VerdictTag","Promise","jenv","spawnDetachedPromise","spawn","spawnDetachedAsync","options","capture","stdio","Sandbox","cacher","getRootPath","flags","resolvePath","_getMode","fd","chmod","buf","fun","absolute","matches","mode","getFileStats","rmdir","unlink","EXIT_SANDBOX_ERROR","EXIT_OK","EXIT_SIGNAL","EXIT_FILE_ACCESS","EXIT_SYSCALL","EXIT_NONZERO_RETURN","initialized","innerDir","chdir","inheritEnv","fsize","stackSize","extraTimelimit","verbosity","bufferize","setDefaultConfigs","emptyDir","boxId","getNextBoxId","executable","execs","outerDir","mkdir","getChdirPath","dir","getBoxFilePath","verbose","line","parseFloat","exitcode","exitsig","checkWall","msg","list","getStatusList","NONZERO_RETURN","oldVal","comm","promise","getRunArgs","ret","cap","IsolatePool","ptr","setEnvironment","setStorage","getSeconds","tuple","start","hrtime","started","elapsed","noChecking","javaChecking","originalCode","rePackage","reClass","reMain","reString","reComment","reInline","reUnicode","aux","handleAdminPageError"],"mappings":"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","file":"index.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 39);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap c2b1740c51b5219514c7","module.exports = require(\"mongoose\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"mongoose\"\n// module id = 0\n// module chunks = 0","module.exports = require(\"path\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"path\"\n// module id = 1\n// module chunks = 0","module.exports = require(\"babel-runtime/core-js/get-iterator\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"babel-runtime/core-js/get-iterator\"\n// module id = 2\n// module chunks = 0","module.exports = require(\"express\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"express\"\n// module id = 3\n// module chunks = 0","/* eslint-disable */\nlet path = require(\"path\"),\n  fs = require(\"fs\"),\n  mongoose = require(\"mongoose\");\n// files = fs.readdirSync(__dirname);\n\nrequire(\"../db\");\n\n/* files.forEach(function(file) {\n    var name = path.basename(file, '.js');\n    if (name === 'index')\n        return;\n\n    var mod = require('./' + name);\n    module.exports[name] = mod();\n});*/\n\nmodule.exports = {\n  Contest: require(\"./Contest\")(),\n  User: require(\"./User\")(),\n  Submission: require(\"./Submission\")(),\n  Problem: require(\"./Problem\")(),\n  Clarification: require(\"./Clarification\")(),\n  Printout: require(\"./Printout\")()\n};\n\n\n\n// WEBPACK FOOTER //\n// ./models/index.js","module.exports = require(\"babel-runtime/regenerator\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"babel-runtime/regenerator\"\n// module id = 5\n// module chunks = 0","module.exports = require(\"babel-runtime/helpers/asyncToGenerator\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"babel-runtime/helpers/asyncToGenerator\"\n// module id = 6\n// module chunks = 0","module.exports = require(\"babel-runtime/helpers/classCallCheck\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"babel-runtime/helpers/classCallCheck\"\n// module id = 7\n// module chunks = 0","module.exports = require(\"babel-runtime/helpers/createClass\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"babel-runtime/helpers/createClass\"\n// module id = 8\n// module chunks = 0","module.exports = require(\"babel-runtime/core-js/promise\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"babel-runtime/core-js/promise\"\n// module id = 9\n// module chunks = 0","module.exports = require(\"babel-runtime/core-js/object/keys\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"babel-runtime/core-js/object/keys\"\n// module id = 10\n// module chunks = 0","/**\n * Created by rsalesc on 14/06/16.\n */\n\nconst path = require(\"path\");\nconst fs = require(\"fs-extra\");\nconst util = require(\"util\");\nconst glob = require(\"glob\");\n\nasync function exists(p) {\n  try {\n    await fs.stat(p);\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nasync function fileExists(p) {\n  try {\n    const res = await fs.stat(p);\n    return res.isFile();\n  } catch (e) {\n    return false;\n  }\n}\n\nasync function dirExists(p) {\n  try {\n    const res = await fs.statAsync(p);\n    return res.isDirectory();\n  } catch (e) {\n    return false;\n  }\n}\n\nfunction inspect(p) {\n  return util.inspect(p, false, null);\n}\n\nfunction logInspect(p) {\n  return console.log(inspect(p));\n}\n\nfunction fillUpTo(arr, n = 0) {\n  if (n === 0)\n    return [];\n  if (!(arr instanceof Array) || arr.length === 0)\n    arr = [undefined];\n\n  while (arr.length > n)\n    arr.pop();\n  while (arr.length < n) {\n    const el = arr.pop();\n    arr.push(el);\n    arr.push(el);\n  }\n\n  return arr;\n}\n\nfunction destroy(obj) {\n  for (const prop of Object.keys(obj)) {\n    const property = obj[prop];\n    if (property != null && typeof property === \"object\")\n      destroy(property);\n    else\n      obj[prop] = null;\n  }\n}\n\nfunction normalizePath(p) {\n  const normalizedPath = path.normalize(p);\n  if (normalizedPath[-1] === \"/\")\n    return normalizedPath.slice(0, -1);\n  return normalizedPath;\n}\n\n// eslint-disable-next-line require-await\nasync function globAsync(pattern, opts) {\n  return new Promise((resolve, reject) => {\n    glob(pattern, opts, (err, files) => {\n      if (err)\n        return reject(err);\n      return resolve(files);\n    });\n  });\n}\n\nasync function mkdtemp(...args) {\n  return new Promise((resolve, reject) => fs.mkdtemp(...args, (err, result) => {\n    if (err)\n      return reject(err);\n    return resolve(result);\n  }));\n}\n\nmodule.exports = {\n  exists,\n  fileExists,\n  dirExists,\n  inspect,\n  logInspect,\n  fillUpTo,\n  destroy,\n  globAsync,\n  mkdtemp\n};\n\n\n\n// WEBPACK FOOTER //\n// ./judge/utils.js","module.exports = require(\"fs-extra\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"fs-extra\"\n// module id = 12\n// module chunks = 0","const mongoose = require(\"mongoose\");\nconst models = require(\"./models/\");\nconst crypto = require(\"crypto\");\n\nconst Schema = mongoose.Schema;\n\nconst getTokenModel = (db) => {\n  const TokenSchema = new Schema({\n    _id: { type: String },\n    user: { type: Schema.Types.ObjectId, ref: \"User\", required: true },\n    expiresAt: { type: Date, required: true },\n    roles: [{ type: String }]\n  });\n\n  return db.models.Token\n    ? db.model(\"Token\")\n    : db.model(\"Token\", TokenSchema);\n};\n\nconst getAuthorizationToken = (req) => {\n  let authorizationToken = req.get(\"Authorization\")\n    ? req.get(\"Authorization\").split(\" \").pop()\n    : null;\n\n  if (!authorizationToken && req.cookies.token)\n    authorizationToken = req.cookies.token;\n  return authorizationToken;\n};\n\nmodule.exports = {\n  initialize: (opts = {}) => (req, res, next) => {\n    if (!opts.db)\n      return next(new Error(\"mongoose db must be provided to Auth2\"));\n    if (!opts.age)\n      opts.age = 60 * 60;\n    if (!opts.secret)\n      opts.secret = \"\";\n    if (!opts.model)\n      return next(new Error(\"model must be provided to Auth2\"));\n    if (!opts.id)\n      opts.id = \"_id\";\n    if (!opts.usernameField)\n      opts.usernameField = \"username\";\n    if (!opts.passwordField)\n      opts.passwordField = \"password\";\n    if (!opts.usernameSchema)\n      opts.usernameSchema = \"username\";\n    if (!opts.passwordSchema)\n      opts.passwordSchema = \"password\";\n\n    req.getUsername = () => req.body[opts.usernameField];\n    req.getPassword = () => req.body[opts.passwordField];\n\n    if (!opts.requiredFieldsFn)\n      opts.requiredFieldsFn = (model, req) => req.getUsername() && req.getPassword();\n\n\n    if (!opts.filterFn) {\n      opts.filterFn = (model, req) => {\n        const qs = {};\n        qs[opts.usernameSchema] = req.getUsername();\n        return qs;\n      };\n    }\n\n    if (!opts.queryFn) {\n      opts.queryFn = (model, req, resolve, reject) => {\n        model.findOne(opts.filterFn(model, req), (err, user) => {\n          if (err)\n            return reject(err);\n\n          resolve(user);\n        });\n      };\n    }\n\n    if (!opts.passwordFn)\n      opts.passwordFn = (user, req) => user[opts.passwordSchema] == req.getPassword();\n    if (!opts.roleFn)\n      opts.roleFn = user => [];\n\n    req.auth2 = { opts };\n    next();\n  },\n  authenticate: (roles = [], success, failure) => (req, res, next) => {\n    if (!Array.isArray(roles))\n      roles = [roles];\n\n    if (!req.auth2 || !req.auth2.opts) {\n      return failure\n        ? failure(req, res, next, { code: 500, message: \"invalid auth2 footprint\" })\n        : res.status(500).json({ error: \"invalid auth2 footprint\" });\n    }\n\n    const opts = req.auth2.opts;\n    const User = opts.model;\n\n    if (!opts.requiredFieldsFn(User, req)) {\n      return !failure\n        ? res.status(401).json({ error: \"unauthorized\" })\n        : failure(req, res, next, { code: 401, message: \"unauthorized\" });\n    }\n\n    opts.queryFn(User, req, (user) => {\n      if (!user || !opts.passwordFn(user, req)) {\n        return !failure\n          ? res.status(401).json({ error: \"unauthorized\" })\n          : failure(req, res, next, { code: 401, message: \"unauthorized\" });\n      }\n\n      const matchedRoles = roles.filter(role => opts.roleFn(user).indexOf(role) !== -1);\n\n      if (roles.length > 0 && matchedRoles.length === 0) {\n        return !failure\n          ? res.status(401).json({ error: \"unauthorized\" })\n          : failure(req, res, next, { code: 401, message: \"unauthorized\" });\n      }\n\n      const randomToken = crypto.randomBytes(20).toString(\"hex\");\n      const session = {\n        _id: randomToken,\n        user: user.toObject()[opts.id],\n        expiresAt: new Date(Date.now() + opts.age * 1000),\n        roles: matchedRoles\n      };\n\n      const Token = getTokenModel(opts.db);\n      const tokenObject = new Token(session);\n      tokenObject.save((err) => {\n        if (err)\n          return next(err);\n\n        res.cookie(\"token\", randomToken, { maxAge: opts.age * 1000, httpOnly: true });\n        req.auth2 = { ...req.auth2, ...session, ...{ user }};\n        return success\n          ? success(req, res, next)\n          : res.json({ token: session._id });\n      });\n    }, next);\n  },\n  isAuth: (roles = []) => (req, res, next) => {\n    if (!Array.isArray(roles))\n      roles = [roles];\n\n    if (!req.auth2 || !req.auth2.opts)\n      return res.status(500).json({ error: \"invalid auth2 footprint\" });\n\n    const authorizationToken = getAuthorizationToken(req);\n\n    if (!authorizationToken)\n      return res.status(401).json({ error: \"unauthorized\" });\n\n    const { opts } = req.auth2;\n    const User = opts.model;\n    const Token = getTokenModel(opts.db);\n\n    Token.findOne({ _id: authorizationToken }, (err, token) => {\n      if (err)\n        return next(err);\n\n      if (!token || new Date() > token.expiresAt) {\n        res.clearCookie(\"token\");\n        if (token)\n          token.remove();\n        return res.status(401).json({ error: \"unauthorized\" });\n      }\n\n      // check if user really exists and retrieve its role array again\n      const qs = {};\n      qs[opts.id] = token.user;\n\n      User.findOne(qs, (err, user) => {\n        if (err)\n          return next(err);\n        if (!user)\n          return res.status(401).json({ error: \"unauthorized\" });\n\n        // console.log(opts.roleFn(user), token.roles);\n        const matchedRoles = roles.filter(role => opts.roleFn(user).indexOf(role) !== -1);\n        if (roles.length > 0 && matchedRoles.length === 0)\n          return res.status(403).json({ error: \"no privilege\" });\n\n        const registeredRoles = matchedRoles.filter(role => token.roles.indexOf(role) !== -1);\n        if (token.roles.length > 0 && registeredRoles.length === 0)\n          return res.status(401).json({ error: \"unauthorized\" });\n\n        token.expiresAt = new Date(Date.now() + opts.age * 1000);\n        token.save((err) => {\n          if (err)\n            return next(err);\n          res.cookie(\"token\", authorizationToken, { maxAge: opts.age * 1000, httpOnly: true });\n          req.auth2 = { ...req.auth2, ...token.toObject(), ...{ user, token: authorizationToken, roles: registeredRoles }};\n          next();\n        });\n      });\n    });\n  },\n  possiblyAuth: (roles = []) => (req, res, next) => {\n    if (!Array.isArray(roles))\n      roles = [roles];\n\n    if (!req.auth2 || !req.auth2.opts)\n      return res.status(500).json({ error: \"invalid auth2 footprint\" });\n\n    const authorizationToken = getAuthorizationToken(req);\n\n    if (!authorizationToken)\n      return next();\n\n    const { opts } = req.auth2;\n    const User = opts.model;\n    const Token = getTokenModel(opts.db);\n\n    Token.findOne({ _id: authorizationToken }, (err, token) => {\n      if (err)\n        return next();\n\n      if (!token || new Date() > token.expiresAt) {\n        res.clearCookie(\"token\");\n        if (token)\n          token.remove();\n        return next();\n      }\n\n      // check if user really exists and retrieve its role array again\n      const qs = {};\n      qs[opts.id] = token.user;\n\n      User.findOne(qs, (err, user) => {\n        if (err)\n          return next();\n        if (!user)\n          return next();\n\n        const matchedRoles = roles.filter(role => opts.roleFn(user).indexOf(role) !== -1);\n        if (roles.length > 0 && matchedRoles.length === 0)\n          return next();\n\n        const registeredRoles = matchedRoles.filter(role => token.roles.indexOf(role) !== -1);\n        if (token.roles.length > 0 && registeredRoles.length === 0)\n          return next();\n\n        token.expiresAt = new Date(Date.now() + opts.age * 1000);\n        token.save((err) => {\n          if (err)\n            return next(err);\n          res.cookie(\"token\", authorizationToken, { maxAge: opts.age * 1000, httpOnly: true });\n          req.auth2 = { ...req.auth2, ...token.toObject(), ...{ user, token: authorizationToken, roles: registeredRoles }};\n          next();\n        });\n      });\n    });\n  },\n  dispose: redirect => (req, res, next) => {\n    if (!req.auth2 || !req.auth2.opts)\n      return res.status(500).json({ error: \"invalid auth2 footprint\" });\n\n    const authorizationToken = getAuthorizationToken(req);\n\n    if (!authorizationToken) {\n      return redirect\n        ? redirect(req, res, next)\n        : res.sendStatus(200);\n    }\n\n    const { opts } = req.auth2;\n\n    const Token = getTokenModel(opts.db);\n    Token.findOneAndRemove({ _id: req.auth2.token }, (err) => {\n      if (err)\n        next(err);\n\n      req.auth2 = { opts: req.auth2.opts };\n      res.clearCookie(\"token\");\n\n      return redirect\n        ? redirect(req, res, next)\n        : res.sendStatus(200);\n    });\n  }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./auth2.js","module.exports = require(\"babel-runtime/helpers/extends\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"babel-runtime/helpers/extends\"\n// module id = 14\n// module chunks = 0","/**\n * Created by rsalesc on 15/07/16.\n */\nconst express = require(\"express\");\nconst router = express.Router();\nconst path = require(\"path\");\n\nconst models = require(\"../../models/\");\nconst { Submission } = models;\n\nconst SubmissionNoCode\n    = \"_id _creator contest problem language code verdict\";\n\nfunction handleSubmissionError(err, req, res, next) {\n  res.status(500).json([err]);\n}\n\nfunction handleRequestError(err, req, res, next) {\n  res.status(400).json({ err: err.toString() });\n}\n\nfunction rejudge(id) {\n  return new Promise((resolve, reject) => {\n    Submission.findByIdAndUpdate(id, {}, { new: true }, (err, sub) => {\n      if (err)\n        return reject(err);\n\n      sub.populate(\"problem\", async (err, sub) => {\n        if (err)\n          return reject(err);\n        try {\n          await judeQueue.add({\n            id: sub.problem._id,\n            subid: sub._id,\n            fid: sub.problem.fid,\n            code: sub.code,\n            lang: sub.language\n          });\n        } catch (err) {\n          return reject(err);\n        }\n\n        const verdict = {};\n        for (const data of sub.problem.attr.datasets) {\n          verdict[data.name] = {\n            verdict: \"VERDICT_INQ\", passed: -1, score: 0, info: \"\"\n          };\n        }\n\n        sub.verdict = verdict;\n        sub.save((err) => {\n          if (err)\n            return reject(err);\n          return resolve();\n        });\n      });\n    });\n  });\n}\n\n// TODO: set back to IN_QUEUE status\nrouter.post(\"/:id/rejudge\", async (req, res, next) => {\n  if (!req.params.id)\n    return handleSubmissionError(\"no rejudge id provided\", req, res);\n  try {\n    await rejudge(req.params.id, req, res, next);\n    return res.json({ success: \"rejudged\" });\n  } catch (err) {\n    return handleSubmissionError(err, req, res);\n  }\n});\n\nmodule.exports = router;\nmodule.exports.SubmissionNoCode = SubmissionNoCode;\nmodule.exports.rejudge = rejudge;\n\n\n\n// WEBPACK FOOTER //\n// ./routes/api/submission.js","module.exports = require(\"babel-runtime/core-js/object/get-prototype-of\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"babel-runtime/core-js/object/get-prototype-of\"\n// module id = 16\n// module chunks = 0","module.exports = require(\"babel-runtime/helpers/possibleConstructorReturn\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"babel-runtime/helpers/possibleConstructorReturn\"\n// module id = 17\n// module chunks = 0","module.exports = require(\"babel-runtime/helpers/inherits\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"babel-runtime/helpers/inherits\"\n// module id = 18\n// module chunks = 0","/**\n * Created by rsalesc on 14/06/16.\n */\nconst winston = require(\"winston\");\nconst process = require(\"process\");\n\nconst logger = new winston.Logger({\n    level: process.env.LOG_LEVEL || \"info\",\n    transports: [\n        new winston.transports.Console({\n            // eslint-disable-next-line no-constant-condition\n            level: process.env.VERBOSE || true\n                ? \"debug\"\n                : \"warn\"\n            // handleExceptions: true\n        }),\n        new winston.transports.File({\n            name: \"info-file\",\n            level: \"info\",\n            filename: `${__dirname}/../logs/info.log`\n        }),\n        new winston.transports.File({\n            name: \"error-file\",\n            level: \"warn\",\n            filename: `${__dirname}/../logs/error.log`\n            // handleExceptions: true, json: true\n        })\n    ]\n});\n\nmodule.exports = logger\n;\n\n\n\n// WEBPACK FOOTER //\n// ./judge/logger.js","module.exports = require(\"babel-runtime/helpers/slicedToArray\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"babel-runtime/helpers/slicedToArray\"\n// module id = 20\n// module chunks = 0","module.exports = require(\"fs\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"fs\"\n// module id = 21\n// module chunks = 0","/**\n * Created by rsalesc on 15/06/16.\n */\n\nconst yauzl = require(\"yauzl\");\nconst concatStream = require(\"concat-stream\");\nconst utils = require(\"./utils\");\nconst wildcard = require(\"node-wildcard\");\nconst path = require(\"path\");\nconst logger = require(\"./logger\");\nconst fs = require(\"fs-extra\");\nconst promisify = require(\"es6-promisify\");\nconst glob = promisify(require(\"glob\").glob);\nconst streamifier = require(\"streamifier\");\n\n/* Helper Functions for storage */\nfunction dealWithEntry(zipFile, entry) {\n  return new Promise((resolve, reject) => {\n    zipFile.openReadStream(entry, (err, stream) => {\n      if (err) {\n        zipFile.readEntry();\n        return reject(err);\n      }\n\n      const concat = concatStream((buffer) => {\n        zipFile.readEntry();\n        return resolve({ path: entry.fileName, buffer });\n      });\n\n      stream.on(\"error\", (err2) => {\n        zipFile.readEntry();\n        return reject(err2);\n      });\n\n      return stream.pipe(concat);\n    });\n  });\n}\n\nfunction loadZipAsync(p) {\n  const absPath = path.resolve(p);\n  return new Promise((resolve, reject) => {\n    yauzl.open(absPath, { lazyEntries: true },\n               (err, zipFile) => {\n                 if (err)\n                   return reject(err);\n                 const toWait = [];\n                 zipFile.readEntry();\n\n                 // process entries\n                 zipFile.on(\"entry\", (entry) => {\n                   if (/\\/$/.test(entry.fileName))\n                     return zipFile.readEntry();\n\n                   return toWait.push(dealWithEntry(zipFile, entry));\n                 });\n\n                 zipFile.once(\"end\", async () => {\n                   zipFile.close();\n                   // resolve or reject result\n                   try {\n                     const resWait = await Promise.all(toWait);\n                     resolve(resWait);\n                   } catch (ex) {\n                     reject(ex);\n                   }\n                 });\n\n                 return null;\n               });\n  });\n}\n\n/**\n*   This is the base class for Storage\n*   Make sure it runs inside an async environment\n*   @abstract\n */\nclass Storage {\n  constructor() {\n    if (this.constructor.name === Storage.name)\n      throw `Cannot instantiate abstract class ${this.constructor.name}`;\n  }\n\n  /**\n  *   Load a directory/file into the storage\n  *   @param {string} path to the directory/file\n      */\n  // eslint-disable-next-line no-unused-vars\n  async load(p) {\n    throw `Function not implemented in ${this.constructor.name}`;\n  }\n\n  /**\n   * Relative path to be normalized\n   * @param p to be normalized\n   * @returns {string} normalized path\n   */\n  // eslint-disable-next-line no-unused-vars\n  normalizePath(p) {\n    return p.length === 0 || p.charAt(0) !== \"/\"\n      ? `/${p}`\n      : p;\n  }\n\n  /**\n   *  Load a ZIP file into the storage\n   *  @param {string} path to the zip file\n   */\n  // eslint-disable-next-line no-unused-vars\n  async loadZip(p) {\n    throw `Function not implemented in ${this.constructor.name}`;\n  }\n\n  /**\n  *   Create a file in the storage from a provided buffer/string\n  *   @param {string} path/ID of the new file in the Storage\n  *   @param {buffer|string} content of the new file\n    */\n  // eslint-disable-next-line no-unused-vars\n  async createFileFromContent(p, content) {\n    throw `Function not implemented in ${this.constructor.name}`;\n  }\n\n  /**\n  *   Get buffer from a file in Storage\n  *   @param {string} path/ID to the file in storage\n  *   @returns {buffer} buffer from the file\n    */\n  // eslint-disable-next-line no-unused-vars\n  async getFileBuffer(p) {\n    throw `Function not implemented in ${this.constructor.name}`;\n  }\n\n  /**\n  *   Get string from a file in storage\n  *   @param {string} path/ID to the file in storage\n  *   @returns {string} string from the file\n    */\n  // eslint-disable-next-line no-unused-vars\n  async getFileString(p) {\n    throw `Function not implemented in ${this.constructor.name}`;\n  }\n\n  /**\n   * Get readable stream from a file in storage\n   * @param {string} path/ID to the file in storage\n   * @returns {string} readable stream to the file\n   * */\n  // eslint-disable-next-line no-unused-vars\n  async getFileStream(p) {\n    throw `Function not implemented in ${this.constructor.name}`;\n  }\n\n  /**\n   *  Check if file is readable\n   */\n  async isReadable(p) {\n    try {\n      await this.getFileBuffer(p);\n      return true;\n    } catch (ex) {\n      return false;\n    }\n  }\n\n  /**\n     * Get file names that match the given glob pattern\n     * @param {string} glob pattern\n     * @return {string[]} file names that match the given glob pattern\n     */\n  // eslint-disable-next-line no-unused-vars\n  async glob(p, sort = false) {\n    throw `Function not implemented in ${this.constructor.name}`;\n  }\n\n  /**\n     *  Dispose any resource cached in-memory by the storage\n     *  (the Storage object should be unusable after that)\n     */\n  // eslint-disable-next-line no-unused-vars\n  async dispose(p) {\n    throw `Function not implemented in ${this.constructor.name}`;\n  }\n}\n\nclass RealStorage extends Storage {\n  // WARNING: class created only for testing purposes.\n  // Non-persistent Storage should be used (in-memory, temporary dir, etc)\n  // TODO: every function should check if dir exist and create it if it doesnt\n  constructor() {\n    super();\n    this.path = \"/\";\n  }\n\n  // eslint-disable-next-line require-await\n  async load(p) {\n    this.path = path.resolve(p);\n  }\n\n  async createFileFromContent(p, content) {\n    const abs = path.resolve(this.path, p);\n    try {\n      await fs.writeFile(abs, content);\n    } catch (e) {\n      logger.error(\"[%s] File %s could not be created\", this.constructor.name, p);\n      throw e;\n    }\n  }\n\n  async getFileBuffer(p) {\n    const abs = path.resolve(this.path, p);\n    try {\n      const res = await fs.readFile(abs);\n      return res;\n    } catch (e) {\n      logger.error(\"[%s] File %s could not be retrieved\", this.constructor.name, p);\n      throw e;\n    }\n  }\n\n  async getFileString(p) {\n    const abs = path.resolve(this.path, p);\n    try {\n      const res = await fs.readFile(abs, \"utf8\");\n      return res;\n    } catch (e) {\n      logger.error(\"[%s] File %s could not be retrieved\", this.constructor.name, p);\n      throw e;\n    }\n  }\n\n  async getFileStream(p) {\n    return fs.createReadStream(p);\n  }\n}\n\nclass MemoryStorage extends Storage {\n  constructor() {\n    super();\n    this.data = {};\n  }\n\n  async load(p) {\n    const absPath = path.resolve(p);\n    const stat = await fs.lstat(absPath);\n    if (stat.isDirectory()) {\n      const res = await glob(\"**/*\", { cwd: absPath, nodir: true });\n\n      await Promise.all(res.map(async (file) => {\n        this.data[this.normalizePath(file)] = await fs.readFile(path.join(absPath, file));\n      }));\n    } else\n      this.data[this.normalizePath(absPath)] = await fs.readFile(absPath);\n  }\n\n  async loadZip(p) {\n    const res = await loadZipAsync(p);\n    const promises = res.map(({ path: resPath, buffer }) =>\n      this.createFileFromContent(resPath, buffer));\n    await Promise.all(promises);\n  }\n\n  // eslint-disable-next-line require-await\n  async createFileFromContent(p, content) {\n    const norm = this.normalizePath(p);\n    this.data[norm] = new Buffer(content);\n  }\n\n  // eslint-disable-next-line require-await\n  async getFileBuffer(p, def = null) {\n    const normalizedPath = this.normalizePath(p);\n    if (!this.data.hasOwnProperty(normalizedPath)) {\n      if (def === null)\n        throw `File ${normalizedPath} not found in MemoryStorage`;\n      else\n        return new Buffer(def);\n    }\n    return this.data[normalizedPath];\n  }\n\n  // eslint-disable-next-line require-await\n  async getFileString(p, def = null) {\n    const normalizedPath = this.normalizePath(p);\n    if (!this.data.hasOwnProperty(normalizedPath)) {\n      if (def === null)\n        throw `File ${normalizedPath} not found in MemoryStorage`;\n      else\n        return def.toString();\n    }\n    return this.data[normalizedPath].toString();\n  }\n\n  // eslint-disable-next-line require-await\n  async getFileStream(p, def = null) {\n    return streamifier.createReadStream(this.getFileBuffer(p, def));\n  }\n\n  // eslint-disable-next-line require-await\n  async glob(p, sort = false) {\n    const normalizedPath = this.normalizePath(p);\n    const res = [];\n    for (const fn of Object.keys(this.data)) {\n      if (wildcard(fn, normalizedPath))\n        res.push(fn);\n    }\n    if (sort)\n      res.sort();\n    return res;\n  }\n\n  // eslint-disable-next-line require-await\n  async dispose() {\n    utils.destroy(this.data);\n    this.data = null;\n  }\n}\n\nif (!module.parent && false) {\n  // eslint-disable-next-line require-await\n  (async () => {\n    console.log(\"Testing with async...\");\n    const store = new MemoryStorage();\n    await store.load(\"test_contest\");\n    console.log(store.getFileString(\"jude.yml\"));\n    await store.createFileFromContent(\"lola\", \"HAHAHA\");\n    console.log(store.getFileBuffer(\"jude.yml\"));\n    console.log(store.data);\n  })();\n}\n\n\nmodule.exports = {\n  Storage,\n  RealStorage,\n  MemoryStorage\n};\n\n\n\n// WEBPACK FOOTER //\n// ./judge/storage.js","module.exports = function(module) {\r\n\tif(!module.webpackPolyfill) {\r\n\t\tmodule.deprecate = function() {};\r\n\t\tmodule.paths = [];\r\n\t\t// module.parent = undefined by default\r\n\t\tif(!module.children) module.children = [];\r\n\t\tObject.defineProperty(module, \"loaded\", {\r\n\t\t\tenumerable: true,\r\n\t\t\tget: function() {\r\n\t\t\t\treturn module.l;\r\n\t\t\t}\r\n\t\t});\r\n\t\tObject.defineProperty(module, \"id\", {\r\n\t\t\tenumerable: true,\r\n\t\t\tget: function() {\r\n\t\t\t\treturn module.i;\r\n\t\t\t}\r\n\t\t});\r\n\t\tmodule.webpackPolyfill = 1;\r\n\t}\r\n\treturn module;\r\n};\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// (webpack)/buildin/module.js\n// module id = 23\n// module chunks = 0","module.exports = require(\"babel-runtime/core-js/object/assign\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"babel-runtime/core-js/object/assign\"\n// module id = 24\n// module chunks = 0","var mongoose = require('mongoose')\nconst MongoQueue2 = require(\"mongo-queue2\");\nconst weed = require('jude-seaweedfs');\n\n// mongodb setup\n\nlet mongo_host = process.env.MONGO_HOST || 'localhost';\nlet weed_host = process.env.WEED_HOST || 'localhost';\n\nvar uri = 'mongodb://'+mongo_host+'/jude-dev';\nif(!global.db) {\n  global.db = mongoose.createConnection(uri);\n  global.db.mods = {};\n  global.judeQueue = new MongoQueue2(db, \"jude-queue2\");\n  global.weedClient     = new weed({\n      server:     weed_host,\n      port:       9333\n  });\n}\n\nmodule.exports = global.db;\n\n\n// WEBPACK FOOTER //\n// ./db.js","module.exports = require(\"mongo-queue2\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"mongo-queue2\"\n// module id = 26\n// module chunks = 0","module.exports = require(\"babel-runtime/core-js/set\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"babel-runtime/core-js/set\"\n// module id = 27\n// module chunks = 0","/**\n * Created by rsalesc on 15/07/16.\n */\n\nconst mongoose = require(\"mongoose\");\nconst { Schema } = mongoose;\n\n// TODO: add creation time (with a plugin)\nmodule.exports = () => {\n  if (db.models.Problem)\n    return db.model(\"Problem\");\n\n  const VisibilitySchema = new Schema({\n    contest: { type: Schema.Types.ObjectId, ref: \"Contest\" }\n  }, { _id: false });\n\n  const ProblemSchema = new Schema({\n    code: {\n      type: String,\n      minlength: 4,\n      maxlength: 24,\n      match: /[a-zA-Z][a-zA-Z0-9-]*/,\n      required: true\n    },\n    name: {\n      type: String,\n      minlength: 4,\n      maxlength: 64,\n      required: true\n    },\n    statementFid: String,\n    fid: String,\n    attr: Schema.Types.Mixed,\n    visibility: [VisibilitySchema]\n  }, { timestamps: true });\n\n  ProblemSchema.index({ code: 1 }, { unique: 1 });\n  ProblemSchema.index({ name: 1 });\n  ProblemSchema.index({ code: \"text\", name: \"text\" });\n\n  ProblemSchema.pre(\"remove\", function (next) {\n    db.model(\"Submission\").remove({ problem: this._id }, (err) => {\n      if (err)\n        console.error(err);\n    });\n    const contestQuery = {\n      problems: {\n        $elemMatch: {\n          problem: this._id\n        }\n      }\n    };\n\n    db.model(\"Contest\").find(contestQuery, (err, contests) => {\n      if (err)\n        return console.error(err);\n\n      for (const contest of contests) {\n        contest.problems\n                    = contest.problems.filter(problem => !this._id.equals(problem.problem));\n        contest.save((err) => {\n          if (err)\n            console.error(err);\n        });\n      }\n    });\n    next();\n  });\n\n  return db.model(\"Problem\", ProblemSchema);\n};\n\n\n\n// WEBPACK FOOTER //\n// ./models/Problem.js","module.exports = require(\"sha256\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"sha256\"\n// module id = 29\n// module chunks = 0","module.exports = require(\"glob\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"glob\"\n// module id = 30\n// module chunks = 0","module.exports = require(\"process\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"process\"\n// module id = 31\n// module chunks = 0","/**\n * Created by rsalesc on 14/06/16.\n */\n\nconst path = require(\"path\");\nconst task = require(\"./task\");\nconst YAML = require(\"yamljs\");\nconst logger = require(\"./logger\");\nconst utils = require(\"./utils\");\nconst scoring = require(\"./scoring\");\n\nconst JUDE_FN = \"jude.yml\";\n\n/**\n*   Base class for all Loaders\n*   Make sure it runs inside an aysnc or blockable environment\n*   @abstract\n */\nclass Loader {\n  constructor(store) {\n    //if (new.target == Loader)\n    //  throw `Cannot instantiate abstract class Loader`;\n    this.store = store;\n  }\n\n  /**\n    *   Check if a package can be loaded by this Loader\n    *   @param {Storage} Storage object\n    *   @returns {boolean} if package can be loaded or not\n     */\n  // eslint-disable-next-line no-unused-vars\n  static async isLoadable(store) {\n    throw `Auto-detection not implemented in ${this.name}`;\n  }\n\n  /**\n    *   Load package and return a Task\n    *   @returns {Task} resulting task or null if some error occurs\n     */\n  load() {\n    throw `Load function not implemented in ${this.constructor.name}`;\n  }\n}\n\nclass JudeLoader extends Loader {\n  static async isLoadable(store) {\n    return store.isReadable(JUDE_FN);\n  }\n\n  /**\n    *   Get paths for the tests of dataset\n    *   @param {string} dataset directory\n    *   @returns {Object[]} tests found\n     */\n  async getTestcases(datasetPath) {\n    const testsPath = path.join(\"tests\", datasetPath);\n\n    const inputs = (await this.store.glob(path.join(testsPath, \"/*.in\"))).sort();\n    const res = [];\n\n    for (const input of inputs) {\n      const output = input.replace(/\\.in$/, \".out\");\n      // eslint-disable-next-line no-await-in-loop\n      if (!await this.store.isReadable(output)) {\n        logger.error(\"[%s] test %s should exist\", JudeLoader.name, output);\n        throw \"Missing output file in dataset\";\n      }\n\n      res.push({\n        in: input,\n        out: output\n      });\n    }\n\n    if (res.length === 0) {\n      logger.error(\"[%s] dataset %s is empty\", JudeLoader.name, datasetPath);\n      throw \"Dataset has no tests\";\n    }\n    return res;\n  }\n\n  /**\n    * Returns parsed datasets given their properties in datasets\n    * @param {Object[]} datasets to be parsed in Jude format\n    * @throws if data is inconsistent\n     */\n  async parseDatasets(datasets) {\n    if (!datasets || datasets.length === 0) {\n      logger.error(\"[%s] package has no dataset\", JudeLoader.name);\n      throw \"Package has no dataset\";\n    }\n\n    const res = [];\n    let percentageSum = 0;\n\n    for (const dataset of datasets) {\n      const cur = {\n        name: dataset.name || dataset.path,\n        percentage: dataset.percentage || 0,\n        testcases: await this.getTestcases(dataset.path) // eslint-disable-line no-await-in-loop\n      };\n\n      cur.checkerParams = dataset.checkerParams || cur.name;\n\n      percentageSum += cur.percentage;\n      res.push(cur);\n    }\n\n    // check scoring\n    if (Math.abs(percentageSum - 1) > utils.EPS) {\n      logger.error(\"[%s] datasets percentages should sum to 1\", JudeLoader.name);\n      throw \"Datasets percentages do not sum to 1\";\n    }\n\n    return res;\n  }\n\n  /**\n    *   Get a {Task} object correspondent to the loaded Jude file\n    *   @param {string} loaded Jude file\n    *   @returns {Task} task loaded or null if some error occurred\n     */\n  async getTask(cfg) {\n    const lims = cfg.limits || {};\n    const checks = cfg.checker || {};\n    const multiplier = lims.timeMultiplier || 1;\n    const ratio = lims.timeApproximation || 500;\n\n    const attr = {\n      weight: cfg.weight || 1,\n      datasets: await this.parseDatasets(cfg.datasets),\n      scoring: cfg.scoring || \"ProductScoring\",\n      author: cfg.author || \"\",\n      limits: {\n        // in ms\n        time: lims.time\n          ? Math.ceil(lims.time * multiplier / ratio) * ratio\n          : 1000,\n        memory: lims.memory || 256,\n        source: lims.source || 500\n      },\n      blockedLanguages: [],\n      checker: {\n        language: (checks.language || \"cpp\").toUpperCase(),\n        path: checks.path || \"checker.cpp\"\n      },\n      statement: cfg.statement || null\n    };\n\n    if (!attr.scoring || !scoring.hasOwnProperty(attr.scoring)) {\n      logger.error(\"[%s] scoring type %s does not exist\", JudeLoader.name, attr.scoring);\n      return null;\n    }\n\n    if (attr.statement && !await this.store.isReadable(attr.statement)) {\n      logger.error(\"[%s] statement was specified but could not be find in %s\",\n                   JudeLoader.name, attr.statement);\n      return null;\n    }\n\n    if (!await this.store.isReadable(attr.checker.path)) {\n      logger.error(\"[%s] checker could not be found in %s\", JudeLoader.name, attr.checker.path);\n      return null;\n    }\n\n    return new task.Task(attr);\n  }\n\n  async load() {\n    if (!await this.constructor.isLoadable(this.store)) {\n      logger.error(\"[%s] package is not loadable or does not exist\", JudeLoader.name);\n      return null;\n    }\n\n    try {\n      const cfg = YAML.parse(await this.store.getFileString(JUDE_FN));\n      return this.getTask(cfg);\n    } catch (e) {\n      logger.error(\"[%s] package could not be read or parsed\", JudeLoader.name);\n      logger.debug(e);\n      return null;\n    }\n  }\n}\n\n/**\n* Contains the loaders available for use\n* They can be accessed by their names\n */\nconst LOADERS = new Map([\n  // add loaders here in the following format\n  [JudeLoader.name, JudeLoader]\n]);\n\n/**\n*   Returns a loader capable of loading package informed\n*   @param {Storage} storage object\n*/\nasync function autoDetect(store) {\n  for (const [_, loader] of LOADERS) {\n    // eslint-disable-next-line no-await-in-loop\n    if (await loader.isLoadable(store))\n      return loader;\n  }\n  return null;\n}\n\n// exports names manually since it's still not supported\nmodule.exports = {\n  Loader,\n  JudeLoader,\n  autoDetect,\n  LOADERS\n};\n\n\n\n// WEBPACK FOOTER //\n// ./judge/loader.js","module.exports = require(\"babel-runtime/core-js/map\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"babel-runtime/core-js/map\"\n// module id = 33\n// module chunks = 0","/**\n * Created by rsalesc on 15/06/16.\n */\n\nfunction submissionComparator(a, b) {\n  if (a.timeInContest === b.timeInContest)\n    return new Date(a.time).getTime() - new Date(b.time).getTime();\n  return a.timeInContest - b.timeInContest;\n}\n\nclass Scoring {\n  constructor(task, opts = {}) {\n    // if (new.target == Scoring)\n    //  throw `Cannot instantiate abstract class Scoring`;\n    this._task = task;\n    this._opts = { ...this.defaults, ...opts };\n  }\n\n  get task() {\n    return this._task;\n  }\n\n  get opts() {\n    return this._opts;\n  }\n\n  // eslint-disable-next-line no-unused-vars\n  static isTaskValid(tk) {\n    throw new Error(\"Function not implemented in this class\");\n  }\n\n  static hasWeight() {\n    throw new Error(\"Function not implemented in this class\");\n  }\n\n  static hasPartial() {\n    throw new Error(\"Function not implemented in this class\");\n  }\n\n  static hasPenalty() {\n    throw new Error(\"Function not implemented in this class\");\n  }\n\n  get weight() {\n    throw new Error(\"Function not implemented in this class\");\n  }\n\n  get defaults() {\n    throw new Error(\"Function not implemented in this class\");\n  }\n\n  // eslint-disable-next-line no-unused-vars\n  solved(obj) {\n    throw new Error(\"Function not implemented in this class\");\n  }\n\n  // eslint-disable-next-line no-unused-vars\n  attempted(obj) {\n    throw new Error(\"Function not implemented in this class\");\n  }\n\n  // eslint-disable-next-line no-unused-vars\n  eval(verdicts) {\n    throw new Error(\"Function not implemented in this class\");\n  }\n\n  // eslint-disable-next-line no-unused-vars\n  evalContest(submissions) {\n    throw new Error(\"Function not implemented in this class\");\n  }\n\n  skipped() {\n    return [\"\", \"VERDICT_INQ\", \"VERDICT_JE\", \"VERDICT_CE\", \"VERDICT_FAIL\",\n            \"VERDICT_CHTE\", \"VERDICT_UE\", \"VERDICT_CTE\"];\n  }\n\n  hasSkipped(verdicts) {\n    const toSkip = this.skipped();\n    for (const key of Object.keys(verdicts)) {\n      const verdict = verdicts[key];\n      if (toSkip.indexOf(verdict.verdict) !== -1)\n        return true;\n    }\n\n    return false;\n  }\n\n  evalContext(submissions) {\n    return this.evalContest(\n      submissions\n        .filter(s => s.timeInContest >= 0)\n        .filter(s => !this.hasSkipped(s.verdict))\n        .sort(submissionComparator)\n    );\n  }\n\n  // eslint-disable-next-line no-unused-vars\n  static mergeEvaluations(evals, opts = {}) {\n    throw new Error(\"Function not implemented in this class\");\n  }\n}\n\nclass ProductScoring extends Scoring {\n  // eslint-disable-next-line no-unused-vars\n  static isTaskValid(tk) {\n    return true;\n  }\n\n  static hasWeight() {\n    return true;\n  }\n\n  static hasPartial() {\n    return false;\n  }\n\n  static hasPenalty() {\n    return true;\n  }\n\n  get defaults() {\n    return { weight: this.task.getWeight() };\n  }\n\n  get weight() {\n    return this.opts.weight;\n  }\n\n  solved(obj) {\n    return obj.score === this.weight;\n  }\n\n  attempted(obj) {\n    return obj.affect || obj.fails > 0;\n  }\n\n  fails(obj) {\n    return obj.fails;\n  }\n\n  eval(verdicts) {\n    let res = 1;\n    for (const key of Object.keys(verdicts)) {\n      const verdict = verdicts[key];\n      if (verdict.verdict === \"VERDICT_INQ\") {\n        return {\n          score: 0, affect: false, penalty: 0, fails: 0\n        };\n      }\n\n      res *= verdict.verdict === \"VERDICT_AC\"\n        ? 1\n        : 0;\n    }\n\n    return {\n      score: parseInt(res * this.weight, 10), penalty: 0, affect: true, fails: 0\n    };\n  }\n\n  evalContest(submissions) {\n    submissions.sort(submissionComparator);\n\n    let fails = 0;\n\n    for (const submission of submissions) {\n      const evaluation = this.eval(submission.verdict);\n      if (evaluation.affect) {\n        if (evaluation.score === 0)\n          fails++;\n        else {\n          return {\n            score: evaluation.score,\n            penalty: submission.timeInContest,\n            affect: true,\n            fails\n          };\n        }\n      }\n    }\n\n    return {\n      score: 0, penalty: 0, affect: false, fails\n    };\n  }\n\n  static mergeEvaluations(evals, opts = {}) {\n    opts = { penalty: 20, ...opts };\n    return evals.reduce((old, cur) => ({\n      score: old.score + cur.score,\n      penalty: !cur.affect ? old.penalty : old.penalty + cur.penalty + cur.fails * (opts.penalty || 20)\n    }), { score: 0, penalty: 0 });\n  }\n}\n\nclass SubtaskSumScoring extends Scoring {\n  // eslint-disable-next-line no-unused-vars\n  static isTaskValid(tk) {\n    return true;\n  }\n\n  static hasWeight() {\n    return true;\n  }\n\n  static hasPartial() {\n    return true;\n  }\n\n  static hasPenalty() {\n    return true;\n  }\n\n  get weight() {\n    return this.opts.weight;\n  }\n\n  get defaults() {\n    return { weight: this.task.getWeight() };\n  }\n\n  solved(obj) {\n    return obj.score > 0;\n  }\n\n  attempted(obj) {\n    return obj.affect || obj.fails > 0;\n  }\n\n  fails(obj) {\n    return obj.fails;\n  }\n\n  eval(verdicts) {\n    let res = 0;\n\n    for (const key of Object.keys(verdicts)) {\n      const verdict = verdicts[key];\n      if (verdict.verdict === \"VERDICT_INQ\") {\n        return {\n          score: 0, affect: false, penalty: 0, fails: 0\n        };\n      }\n\n      res += verdict.verdict === \"VERDICT_AC\"\n        ? this.task.getDatasetFromName(key).percentage\n        : 0;\n    }\n\n    return {\n      score: parseInt(res * this.weight, 10), penalty: 0, affect: true, fails: 0\n    };\n  }\n\n  evalContest(submissions) {\n    submissions.sort(submissionComparator);\n\n    let bestIndex = submissions.length;\n    let bestScore = 0;\n\n    for (let i = 0; i < submissions.length; i++) {\n      const evaluation = this.eval(submissions[i].verdict);\n      if (evaluation.affect && evaluation.score > bestScore) {\n        bestScore = evaluation.score;\n        bestIndex = i;\n      }\n    }\n\n    let fails = 0;\n\n    for (let i = 0; i < bestIndex; i++) {\n      const submission = submissions[i];\n\n      const evaluation = this.eval(submission.verdict);\n      if (evaluation.affect)\n        fails++;\n    }\n\n    if (bestScore > 0) {\n      const submission = submissions[bestIndex];\n      return {\n        score: bestScore,\n        penalty: submission.timeInContest,\n        affect: true,\n        fails\n      };\n    }\n\n    return {\n      score: 0, penalty: 0, affect: false, fails\n    };\n  }\n\n  static mergeEvaluations(evals, opts = {}) {\n    opts = { penalty: 1, ...opts };\n\n    return evals.reduce((old, cur) => ({\n      score: old.score + cur.score,\n      penalty: !cur.affect ? old.penalty : old.penalty + cur.penalty + cur.fails * (opts.penalty || 1)\n    }), { score: 0, penalty: 0 });\n  }\n}\n\nclass SubtaskMaxScoring extends SubtaskSumScoring {\n  static mergeEvaluations(evals, opts = {}) {\n    opts = { penalty: 1, ...opts };\n\n    const maxTime = evals.reduce((old, cur) => Math.max(old, cur.affect ? cur.penalty : 0), 0);\n\n    return evals.reduce((old, cur) => ({\n      score: old.score + cur.score,\n      penalty: !cur.affect ? old.penalty : old.penalty + cur.fails * (opts.penalty || 1)\n    }), { score: 0, penalty: maxTime });\n  }\n}\n\nclass IcpcScoring extends Scoring {\n  // eslint-disable-next-line no-unused-vars\n  static isTaskValid(tk) {\n    return true;\n  }\n\n  static hasWeight() {\n    return false;\n  }\n\n  static hasPartial() {\n    return false;\n  }\n\n  static hasPenalty() {\n    return true;\n  }\n\n  get defaults() {\n    return {};\n  }\n\n  solved(obj) {\n    return obj.score > 0;\n  }\n\n  attempted(obj) {\n    return obj.affect || obj.fails > 0;\n  }\n\n  fails(obj) {\n    return obj.fails;\n  }\n\n  eval(verdicts) {\n    let res = 1;\n    for (const key of Object.keys(verdicts)) {\n      const verdict = verdicts[key];\n      if (verdict.verdict === \"VERDICT_INQ\") {\n        return {\n          score: 0, affect: false, penalty: 0, fails: 0\n        };\n      }\n\n      res *= verdict.verdict === \"VERDICT_AC\"\n        ? 1\n        : 0;\n    }\n\n    return {\n      score: res, penalty: 0, affect: true, fails: 0\n    };\n  }\n\n  evalContest(submissions) {\n    submissions.sort(submissionComparator);\n\n    let fails = 0;\n\n    for (const submission of submissions) {\n      const evaluation = this.eval(submission.verdict);\n      if (evaluation.affect) {\n        if (evaluation.score === 0)\n          fails++;\n        else {\n          return {\n            score: 1,\n            penalty: submission.timeInContest,\n            affect: true,\n            fails\n          };\n        }\n      }\n    }\n\n    return {\n      score: 0, penalty: 0, affect: false, fails\n    };\n  }\n\n  mergeEvaluations(evals, opts = {}) {\n    opts = { penalty: 20, ...opts };\n\n    return evals.reduce((old, cur) => ({\n      score: old.score + cur.score,\n      penalty: !cur.affect ? old.penalty : old.penalty + cur.penalty + cur.fails * (opts.penalty || 20)\n    }), { score: 0, penalty: 0 });\n  }\n}\n\nmodule.exports = {\n  _Scoring: Scoring,\n  ProductScoring,\n  IcpcScoring,\n  SubtaskMaxScoring,\n  SubtaskSumScoring,\n  // Maintaining backward-compatibility\n  SubtaskScoring: SubtaskMaxScoring\n};\n\n\n\n// WEBPACK FOOTER //\n// ./judge/scoring.js","const mongoose = require(\"mongoose\");\nconst { isAdmin, getUserContest } = require(\"@routes/common\");\n\nfunction handleApiError(res, error) {\n  return res.status(400).json({ error });\n}\n\nfunction checkAdminContest(contestId) {\n  return function (req, res, next) {\n    if (isAdmin(req)) {\n      getUserContest(req.auth2.user).exec((err, contest) => {\n        if (err)\n          return handleApiError(res, err);\n        if (!contest)\n          return res.status(400).json({ error: \"contest not found\" });\n        if (!contest._id.equals(mongoose.Types.ObjectId(contestId)))\n          return res.status(401).json({ error: \"unauthorized\" });\n        return next();\n      });\n    } else\n      return next();\n  };\n}\n\nmodule.exports = {\n  checkAdminContest,\n  handleApiError\n};\n\n\n\n// WEBPACK FOOTER //\n// ./routes/api/v2/util.js","const { Contest } = require(\"@models\");\n\nfunction getUserContest(user) {\n  try {\n    return Contest.findById(user.contest);\n  } catch (ex) {\n    return { exec: cb => cb(ex) };\n  }\n}\n\nfunction isAdmin(req) {\n  return req.auth2.roles.indexOf(\"admin\") !== -1;\n}\n\nmodule.exports = {\n  getUserContest,\n  isAdmin\n};\n\n\n\n// WEBPACK FOOTER //\n// ./routes/common.js","/**\n * Created by rsalesc on 15/06/16.\n */\n\nconst fs = require(\"fs\");\nconst fse = require(\"fs-extra\");\nconst tmp = require(\"tmp\");\ntmp.setGracefulCleanup();\n\nconst path = require(\"path\");\n\nconst MongoQueue2 = require(\"mongo-queue2\");\n\nconst JudgeConfig = {\n  MAX_TRIES: 5,\n  EPS: 1e-7,\n  SANDBOX_OFFSET: parseInt(process.env.SANDBOX_OFFSET || 0, 10),\n  MAX_SANDBOXES: parseInt(process.env.MAX_SANDBOXES || 10, 10),\n  MAX_SIMUL_TESTS: parseInt(process.env.MAX_SIMUL_TESTS || 1, 10),\n  COMPILATION_TL: 90,\n  CHECKING_TL: 90,\n  CHECKING_ML: 512,\n  CHECKING_WTL: 90,\n  WT_MULTIPLIER: 15,\n  OUTPUT_LIMIT: 1 << 24,\n  TEMP_DIR: \"/tmp\",\n  ISOLATE_PATH: path.resolve(\"/usr/local/bin/isolate\"),\n  VISIBILITY_WINDOW: parseInt(process.env.VISIBILITY_WINDOW || 20, 10),\n  BOUND_ML: 2048\n};\n\nclass FileCacher {\n  constructor(size = 20) {\n    this.path = tmp.dirSync({ prefix: \"judecache-\", unsafeCleanup: true }).name;\n    this.has = new Map();\n    this.size = size;\n  }\n\n  popLessFrequent() {\n    let best = 1e9;\n    let res = [];\n    for (const [key, value] of this.has) {\n      if (value < best)\n        res = [];\n      if (value <= best) {\n        best = value;\n        res.push(key);\n      }\n    }\n\n    try {\n      if (res.length > 0) {\n        const idx = Math.random() * res.length | 0;\n        const p = this.getFilePath(res[idx]);\n        fs.removeSync(p);\n        this.has.delete(res[idx]);\n        return true;\n      }\n      return false;\n    } catch (ex) {\n      return false;\n    }\n  }\n\n  ensureSpace() {\n    while (this.has.size >= this.size) {\n      if (!this.popLessFrequent())\n        break;\n    }\n  }\n\n  ping(p) {\n    const nv = Math.max(this.has.get(p) || 0, 0) + 1;\n    for (const [key, value] of this.has)\n      this.has.set(key, value - 1);\n\n    this.has.set(p, nv);\n  }\n\n  addFromStream(p, cb) {\n    const writeStream = fs.createWriteStream(path.join(this.path, p));\n    writeStream.on(\"finish\", () => {\n      this.ensureSpace();\n      this.ping(p);\n      if (cb)\n        cb(null);\n    });\n\n    writeStream.on(\"error\", (err) => {\n      if (cb)\n        cb(null);\n    });\n\n    return writeStream;\n  }\n\n  async addFromFile(p, d) {\n    await fse.copySync(d, this.getFilePath(p));\n    this.ensureSpace();\n    this.ping(p);\n  }\n\n  async addFromContent(p, content) {\n    await fse.writeFile(this.getFilePath(p), content, { flag: \"wx+\" });\n    this.ensureSpace();\n    this.ping(p);\n  }\n\n  exists(p) {\n    return this.has.has(p);\n  }\n\n  getFilePath(p) {\n    return path.resolve(this.path, p);\n  }\n}\n\nclass JudgeEnvironment {\n  constructor(db, seaweed) {\n    this.sandboxes = [];\n    this.nextSandboxId = 0;\n    this.db = db;\n    this.cache = new FileCacher();\n    this.checkerCache = new FileCacher();\n    this.ack = null;\n\n    this.seaweed = seaweed;\n    if (db)\n      this.queue = new MongoQueue2(db, \"jude-queue2\");\n  }\n\n  async pingCurrent() {\n    if (!this.ack)\n      return null;\n    \n    try {\n      await this.queue.ping(this.ack);\n      console.log(`pinged ${this.ack}`);\n    } catch (ex) {\n      console.error(`couldnt ack ${this.ack}`);\n    }\n\n    return null;\n  }\n\n  getNextBoxId() {\n    const res = this.nextSandboxId++;\n    this.nextSandboxId %= JudgeConfig.MAX_SANDBOXES;\n    return res % JudgeConfig.MAX_SANDBOXES\n      + JudgeConfig.SANDBOX_OFFSET * JudgeConfig.MAX_SANDBOXES;\n  }\n}\n\nmodule.exports = {\n  JudgeEnvironment,\n  JudgeConfig\n};\n\n\n\n// WEBPACK FOOTER //\n// ./judge/environment.js","module.exports = require(\"passport\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"passport\"\n// module id = 38\n// module chunks = 0","var app = require('./app');\nvar port = process.env.PORT || 3000;\n\napp.listen(port, () => {\n  console.log(`application is listening in port ${port}!`)\n});\n\n\n// WEBPACK FOOTER //\n// ./index.js","const express = require(\"express\");\nconst session = require(\"express-session\");\nconst MongoStore = require(\"connect-mongo\")(session);\nconst mongoose = require(\"mongoose\");\nconst path = require(\"path\");\nconst favicon = require(\"serve-favicon\");\nconst logger = require(\"morgan\");\nconst cookieParser = require(\"cookie-parser\");\nconst bodyParser = require(\"body-parser\");\nconst multer = require(\"multer\");\nconst flash = require(\"connect-flash\");\nconst router = express.Router();\n// var methodOverride = require('method-override');\nconst restify = require(\"express-restify-mongoose\");\nconst apiRoutes = require(\"./routes/api\");\nconst staticCompressed = require(\"express-static-gzip\");\nconst timesync = require(\"timesync/server\");\n\n// expose db object globally\nrequire(\"./db\");\n\nconst app = express();\nconst routes = require(\"./routes/index\");\nconst auth2 = require(\"./auth2\");\nconst models = require(\"./models\");\n\n// app.use(express.static(path.join(__dirname, \"public\")));\napp.use(\"/static-jude\", staticCompressed(path.join(__dirname, \"public\"), { enableBrotli: true }));\n\n// setup auth method\n// configure session\napp.use(session({\n  secret: \"truesecretmofos\",\n  resave: false,\n  saveUninitialized: false,\n  store: new MongoStore({ mongooseConnection: db })\n}));\n\n// view engine setup\napp.set(\"views\", path.join(__dirname, \"views\"));\napp.set(\"view engine\", \"jade\");\n\n// uncomment after placing your favicon in /public\n// app.use(favicon(path.join(__dirname, 'public', 'favicon.ico')));\napp.use(logger(\"dev\"));\napp.use(bodyParser.json());\napp.use(bodyParser.urlencoded({ extended: false }));\napp.use(cookieParser());\napp.use(multer());\napp.use(flash());\napp.use(\"/timesync\", timesync.requestHandler);\n\n// app.use(methodOverride('X-HTTP-Method-Override'));\n\n// setup cors\napp.use((req, res, next) => {\n  res.header(\"Access-Control-Allow-Origin\", \"*\");\n  res.header(\"Access-Control-Allow-Headers\", \"Origin, X-Requested-With, Content-Type, Accept, Authorization\");\n  res.header(\"Access-Control-Allow-Credentials\", \"true\");\n  res.header(\"Access-Control-Expose-Headers\", \"X-Total-Count\");\n  if (req.method === \"OPTIONS\")\n    return res.sendStatus(200);\n  return next();\n});\n\n// configure api auth\napp.use(auth2.initialize({\n  db,\n  usernameField: \"handle\",\n  usernameSchema: \"handle\",\n  model: models.User,\n  age: 12 * 60 * 60,\n  roleFn: (user) => {\n    const roles = [];\n    if (user.role)\n      roles.push(user.role);\n    if (!user.contest)\n      roles.push(\"root\");\n    return roles;\n  },\n  passwordFn: (user, req) => user.matchPasswords(req.getPassword()),\n  requiredFieldsFn: (model, req) => req.getUsername() && req.getPassword()\n      && (!req.body.contest || mongoose.Types.ObjectId.isValid(req.body.contest)),\n  filterFn: (model, req) => {\n    const { opts } = req.auth2;\n    const qs = {};\n    qs[opts.usernameSchema] = req.getUsername();\n    qs.contest = req.body.contest || null;\n    return qs;\n  }\n}));\n\n// setup routes here\napp.use(\"/\", routes);\n\nconst restifyShared = {\n  runValidators: true,\n  totalCountHeader: true,\n  findOneAndRemove: false,\n  preMiddleware: (req, res, next) => {\n    if (req.body.id)\n      req.body._id = req.body.id;\n    if (req.params.id)\n      req.params._id = req.params.id;\n    if (req.query.id)\n      req.query._id = req.query.id;\n    if (req.query.query && req.query.query.id)\n      req.query.query._id = req.query.query.id;\n\n    /* if(req.query) {\n      for(let prop in req.query) {\n        if(req.query.hasOwnProperty(prop)) {\n          try {\n            req.query[prop] = JSON.parse(req.query[prop]);\n          } catch(ex) {}\n        }\n      }\n    }*/\n\n    /* if(req.query.query) {\n        for(let prop in req.query.query) {\n          if(req.query.query.hasOwnProperty(prop)\n            && mongoose.Types.ObjectId.isValid(req.query.query[prop]))\n              req.query.query[prop] = new mongoose.Types.ObjectId(req.query.query[prop]);\n        }\n    }*/\n\n    auth2.isAuth(\"root\")(req, res, next);\n  },\n  outputFn: (req, res, next) => {\n    const result = req.erm.result;\n    const statusCode = req.erm.statusCode;\n\n    const fixEntry = (entry) => {\n      if (entry && entry._id)\n        return { ...entry, ...{ id: entry._id }};\n      return entry;\n    };\n\n    if (Array.isArray(result))\n      res.status(statusCode).json(result.map(fixEntry));\n    else\n      res.status(statusCode).json(fixEntry(result));\n  }\n};\n\nrestify.serve(router, models.Problem, { ...{ name: \"problems\" }, ...restifyShared });\nrestify.serve(router, models.User, { ...{ name: \"users\", findOneAndUpdate: false }, ...restifyShared });\nrestify.serve(router, models.Submission, { ...{ name: \"submissions\" }, ...restifyShared });\nrestify.serve(router, models.Contest, { ...{ name: \"contests\", findOneAndUpdate: false }, ...restifyShared });\n\n// extra api routes\nrouter.use(\"/api/v1\", apiRoutes);\n\napp.use(router);\n\n// catch 404 and forward to error handler\napp.use((req, res, next) => {\n  const err = new Error(\"Not Found\");\n  err.status = 404;\n  next(err);\n});\n\n// error handlers\n\n// development error handler\n// will print stacktrace\nif (app.get(\"env\") === \"development\") {\n  app.use((err, req, res, next) => {\n    res.status(err.status || 500);\n    res.render(\"error\", {\n      message: err.message,\n      error: err\n    });\n  });\n}\n\n// production error handler\n// no stacktraces leaked to user\napp.use((err, req, res, next) => {\n  res.status(err.status || 500);\n  res.render(\"error\", {\n    message: err.message,\n    error: {}\n  });\n});\n\nmodule.exports = app;\n\n\n\n// WEBPACK FOOTER //\n// ./app.js","module.exports = require(\"express-session\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"express-session\"\n// module id = 42\n// module chunks = 0","module.exports = require(\"connect-mongo\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"connect-mongo\"\n// module id = 43\n// module chunks = 0","module.exports = require(\"serve-favicon\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"serve-favicon\"\n// module id = 44\n// module chunks = 0","module.exports = require(\"morgan\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"morgan\"\n// module id = 45\n// module chunks = 0","module.exports = require(\"cookie-parser\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"cookie-parser\"\n// module id = 46\n// module chunks = 0","module.exports = require(\"body-parser\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"body-parser\"\n// module id = 47\n// module chunks = 0","module.exports = require(\"multer\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"multer\"\n// module id = 48\n// module chunks = 0","module.exports = require(\"connect-flash\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"connect-flash\"\n// module id = 49\n// module chunks = 0","module.exports = require(\"express-restify-mongoose\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"express-restify-mongoose\"\n// module id = 50\n// module chunks = 0","/**\n * Created by rsalesc on 15/07/16.\n */\nconst express = require(\"express\");\nconst router = express.Router();\n\nconst contestRouter = require(\"./contest\");\nconst userRouter = require(\"./user\");\nconst submissionRouter = require(\"./submission\");\n\n// middlewares\nrouter.use(\"/contests\", contestRouter);\nrouter.use(\"/users\", userRouter);\nrouter.use(\"/submissions\", submissionRouter);\n\nmodule.exports = router;\n\n\n\n// WEBPACK FOOTER //\n// ./routes/api/index.js","/**\n * Created by rsalesc on 15/07/16.\n */\nconst express = require(\"express\");\nconst router = express.Router();\nconst path = require(\"path\");\n\nconst mongoose = require(\"mongoose\");\nconst models = require(\"../../models/\");\nconst { Contest, User } = models;\nconst { SubmissionNoCode } = require(\"./submission\");\nconst { ObjectId } = mongoose.Types;\n\nfunction handleContestError(err, req, res, next) {\n  res.status(400).json({ error: err });\n}\n\nconst ContestSelection\n    = \"name start_time end_time _id registration_end collabs _creator\";\n\nrouter.post(\"/:id/addUsers\", async (req, res) => {\n  // eslint-disable-next-line\n  const { users, override } = Object.assign({}, { override: false }, req.body);\n\n  // eslint-disable-next-line promise/avoid-new\n  const awaited = await Promise.all(users.map(u => new Promise((resolve) => {\n    // eslint-disable-next-line new-cap, prefer-object-spread/prefer-object-spread\n    const du = Object.assign({}, u, { contest: ObjectId(req.params.id) });\n    const user = new User(du);\n    return User.findOne({ handle: user.handle, contest: user.contest }, (err, oldUser) => {\n      if (err)\n        return resolve(err);\n\n      if (!oldUser) {\n        return user.save((err2) => {\n          if (err2)\n            return resolve(err2);\n          return resolve(true);\n        });\n      } else if (!override)\n        return resolve(false);\n\n      // eslint-disable-next-line no-underscore-dangle \n      return oldUser.update(du, (err2) => {\n        if (err2)\n          return resolve(err2);\n        return resolve(true);\n      });\n    });\n  })));\n\n  const erred = awaited.filter(x => x !== true && x !== false);\n  if (erred.length > 0)\n    return handleContestError(erred[0], req, res);\n\n  return res.send(200);\n});\n\nmodule.exports = router;\n\n\n\n// WEBPACK FOOTER //\n// ./routes/api/contest.js","module.exports = require(\"jude-seaweedfs\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"jude-seaweedfs\"\n// module id = 53\n// module chunks = 0","/**\n * Created by rsalesc on 14/07/16.\n */\nconst mongoose = require(\"mongoose\");\nconst deepPopulate = require(\"mongoose-deep-populate\")(mongoose);\nconst { Schema } = mongoose;\n\nmodule.exports = () => {\n  if (db.models.Contest)\n    return db.model(\"Contest\");\n\n  const Problem = require(\"./Problem\")();\n\n  const ContestProblem = new Schema({\n    letter: {\n      type: String,\n      required: true,\n      match: /[A-Z][0-9]*/\n    },\n    problem: { type: Schema.Types.ObjectId, ref: \"Problem\", required: true },\n    color: { type: String, default: \"000\" },\n    scoringOpts: { type: Schema.Types.Mixed, default: {}}\n  }, { _id: false });\n\n  const ContestSchema = new Schema({\n    name: { type: String, minlength: 4, maxlength: 64 },\n    start_time: { type: Date, required: true },\n    end_time: { type: Date, required: true },\n    scoring: { type: String, required: true },\n    scoringOpts: { type: Schema.Types.Mixed, default: {}},\n    problems: {\n      type: [ContestProblem],\n      validate: {\n        validator(v) {\n          if (!Array.isArray(v))\n            return false;\n          const letters = v.map(val => val.letter);\n          const ids = v.map(val => val.problem.toString());\n\n          return new Set(letters).size === letters.length\n            && new Set(ids).size === ids.length;\n        },\n        message: \"Contest cannot have repeated letters and problems must be an array\"\n      }\n    },\n    hidden: Boolean,\n    upseeing: { type: Boolean, required: true, default: false },\n    blind: { type: Number, default: 0 },\n    freeze: { type: Number, default: 0 },\n    unfreeze: { type: Boolean, default: false }\n  }, { timestamps: true });\n\n  ContestSchema.index({ name: 1 });\n  ContestSchema.index({ name: \"text\" });\n  ContestSchema.plugin(deepPopulate);\n\n  ContestSchema.pre(\"save\", function (next) {\n    this.problems.sort((a, b) => {\n      try {\n        return ((x, y) => {\n          const xd = parseInt(x.slice(1), 10) || 0;\n          const yd = parseInt(y.slice(1), 10) || 0;\n\n          if (x[0] === y[0])\n            return xd < yd ? -1 : xd > yd ? 1 : 0;\n\n          return x[0] < y[0]\n            ? -1\n            : 1;\n        })(a.letter, b.letter);\n      } catch (ex) {\n        return false;\n      }\n    });\n\n    next();\n  });\n\n  ContestSchema.methods.hasStarted = function () {\n    return this.start_time.getTime() <= Date.now();\n  };\n\n  ContestSchema.methods.hasEnded = function () {\n    return this.end_time.getTime() <= Date.now();\n  };\n\n  ContestSchema.methods.isRunning = function () {\n    return this.hasStarted() && !this.hasEnded();\n  };\n\n  ContestSchema.methods.getTimeInContest = function (x) {\n    const cur = x != null ? x : Date.now();\n    return parseInt((cur - this.start_time.getTime()) / 60 / 1000, 10);\n  };\n\n  ContestSchema.methods.getDurationInContest = function () {\n    const diff = (this.end_time.getTime() - this.start_time.getTime());\n    return parseInt(Math.ceil(diff / 60 / 1000), 10);\n  };\n\n  ContestSchema.methods.getRemainingInContest = function (x) {\n    return this.getDurationInContest()\n      - (x != null ? x : this.getTimeInContest());\n  };\n\n  ContestSchema.methods.isFrozen = function (x) {\n    return this.getRemainingInContest(x) <= this.freeze\n    && (this.isRunning()\n      || (this.hasEnded() && !this.unfreeze && this.freeze > 0));\n  };\n\n  ContestSchema.methods.isBlind = function (x) {\n    return this.getRemainingInContest(x) <= this.blind\n      && (this.isRunning()\n        || (this.hasEnded() && !this.unfreeze && this.blind > 0));\n  };\n\n  ContestSchema.pre(\"remove\", function (next) {\n    db.model(\"Submission\").remove({ contest: this._id }, (err) => {\n      if (err)\n        console.error(err);\n    });\n    db.model(\"User\").remove({ contest: this._id }, (err) => {\n      if (err)\n        console.error(err);\n    });\n    db.model(\"Clarification\").remove({ contest: this._id }, (err) => {\n      if (err)\n        console.error(err);\n    });\n    db.model(\"Printout\").remove({ contest: this._id }, (err) => {\n      if (err)\n        console.error(err);\n    });\n    next();\n  });\n\n\n  return db.model(\"Contest\", ContestSchema);\n};\n\n\n\n// WEBPACK FOOTER //\n// ./models/Contest.js","module.exports = require(\"mongoose-deep-populate\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"mongoose-deep-populate\"\n// module id = 55\n// module chunks = 0","/**\n * Created by rsalesc on 14/07/16.\n */\nvar mongoose = require('mongoose')\nvar Schema = mongoose.Schema\nconst sha256 = require('sha256');\n\nmodule.exports = () => {\n    if(db.models.User)\n        return db.model(\"User\");\n\n    var UserSchema = new Schema({\n        handle: {\n            type: String,\n            minlength: 4,\n            maxlength: 16,\n            match: /[a-zA-Z][a-zA-Z0-9_\\.]*/,\n            required: true\n        },\n        name: {\n            type: String,\n            maxlength: 48,\n            default: \"unnamed\"\n        },\n        description:String,\n        password: {type: String},\n        email: {\n            type: String,\n            maxlength: 64\n            // TODO: put email regex here\n        },\n        contest: {type: Schema.Types.ObjectId, ref: 'Contest'},\n        unofficial: {type: Boolean, default: false},\n        disabled: {type: Boolean, default: false},\n        role: {type: String, default: \"contestant\"}\n    }, {timestamps: true});\n\n    UserSchema.index({handle: 1, contest: 1}, {unique: true});\n    UserSchema.index({handle: 'text', name: 'text'}, {\n        weights: {\n            handle: 2,\n            name: 1\n        }\n    });\n\n    UserSchema.pre('save', function(next){\n        if(this.isModified('password')){\n            this.password = sha256(this.password);\n        }\n\n        next();\n    });\n\n    UserSchema.methods.matchPasswords = function(candidate){\n        return this.password == sha256(candidate);\n    };\n\n    UserSchema.pre(\"remove\", function(next) {\n        db.model(\"Submission\").remove({ _creator: this._id }, err => {\n            if(err) console.error(err);\n        });\n        next();\n    });\n\n    return db.model('User', UserSchema)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./models/User.js","/**\n * Created by rsalesc on 15/07/16.\n */\n\nconst mongoose = require(\"mongoose\");\nconst { Schema } = mongoose;\n\nconst DEFAULT_VERDICT = {\n  verdict: \"\", info: \"\", passed: -1, score: 0\n};\n\n// TODO: add creation time (with a plugin)\nmodule.exports = () => {\n  if (db.models.Submission)\n    return db.model(\"Submission\");\n\n\n  const SubmissionSchema = new Schema({\n    _creator: { type: Schema.Types.ObjectId, ref: \"User\", required: true },\n    contest: { type: Schema.Types.ObjectId, ref: \"Contest\" },\n    problem: { type: Schema.Types.ObjectId, ref: \"Problem\", required: true },\n    time: { type: Date, default: Date.now },\n    timeInContest: { type: Number, default: 0 },\n    // add enum validator? maybe not, language set is mutable\n    language: String,\n    code: String,\n    codeHash: { type: String, default: \"\" },\n    verdict: Schema.Types.Mixed\n  }, { timestamps: true });\n\n  SubmissionSchema.index({ contest: 1, _creator: 1 });\n  SubmissionSchema.index({ contest: 1, problem: 1 });\n  SubmissionSchema.index({ contest: 1, time: 1 });\n  SubmissionSchema.index({ contest: 1, timeInContest: 1 });\n  SubmissionSchema.index({ problem: 1, _creator: 1 });\n  SubmissionSchema.index({ _creator: 1 });\n\n  SubmissionSchema.pre(\"save\", function (next) {\n    if (this.problem) {\n      db.model(\"Problem\").findById(this.problem).exec((err, problem) => {\n        if (err)\n          next(err);\n        this.verdict = this.verdict || {};\n        const res = {};\n        for (const data of problem.attr.datasets)\n          res[data.name] = this.verdict[data.name] || DEFAULT_VERDICT;\n\n        this.verdict = res;\n        next();\n      });\n    }\n  });\n\n  return db.model(\"Submission\", SubmissionSchema);\n};\n\n\n\n// WEBPACK FOOTER //\n// ./models/Submission.js","const mongoose = require(\"mongoose\");\nconst { Schema } = mongoose;\n\nmodule.exports = () => {\n  if (db.models.Clarification)\n    return db.model(\"Clarification\");\n\n  const CommentSchema = new Schema({\n    _creator: { type: Schema.Types.ObjectId, ref: \"User\" },\n    text: String\n  }, { timestamps: true });\n\n  const ClarificationSchema = new Schema({\n    _creator: { type: Schema.Types.ObjectId, ref: \"User\" },\n    contest: { type: Schema.Types.ObjectId, ref: \"Contest\" },\n    problem: { type: Schema.Types.ObjectId, ref: \"Problem\" },\n    broadcast: { type: Boolean, default: false },\n    comments: [CommentSchema]\n  }, { timestamps: true });\n\n  ClarificationSchema.index({ _creator: 1, contest: 1 });\n  ClarificationSchema.index({ contest: 1, broadcast: 1 });\n\n  return db.model(\"Clarification\", ClarificationSchema);\n};\n\n\n\n// WEBPACK FOOTER //\n// ./models/Clarification.js","const mongoose = require(\"mongoose\");\nconst { Schema } = mongoose;\n\nmodule.exports = () => {\n  if (db.models.Printout)\n    return db.model(\"Printout\");\n\n  const PrintoutSchema = new Schema({\n    _creator: { type: Schema.Types.ObjectId, ref: \"User\" },\n    contest: { type: Schema.Types.ObjectId, ref: \"Contest\" },\n    text: String,\n    lines: Number,\n    done: Boolean\n  }, { timestamps: true });\n\n  PrintoutSchema.index({ _creator: 1, contest: 1 });\n\n  return db.model(\"Printout\", PrintoutSchema);\n};\n\n\n\n// WEBPACK FOOTER //\n// ./models/Printout.js","const express = require(\"express\");\nconst path = require(\"path\");\nconst mongoose = require(\"mongoose\");\n// eslint-disable-next-line new-cap\nconst router = express.Router();\nconst models = require(\"../../models/\");\nconst { User, Submission } = models;\nconst { SubmissionNoCode } = require(\"./submission\");\nconst { ObjectId } = mongoose.Types;\n\nconst UserSelection = \"_id handle name\";\n\nfunction handleUserError(err, req, res) {\n  res.json({ error: err });\n}\n\nmodule.exports = router;\n\n\n\n// WEBPACK FOOTER //\n// ./routes/api/user.js","module.exports = require(\"express-static-gzip\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"express-static-gzip\"\n// module id = 61\n// module chunks = 0","module.exports = require(\"timesync/server\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"timesync/server\"\n// module id = 62\n// module chunks = 0","const express = require(\"express\");\nconst router = express.Router();\nconst path = require(\"path\");\nconst models = require(\"../models\");\nconst { Problem, Contest } = models;\n\nconst Storage = require(\"../judge/storage\").MemoryStorage;\nconst Loader = require(\"../judge/loader\");\nconst utils = require(\"../judge/utils\");\nconst api2 = require(\"./api/v2\");\nconst contest = require(\"./contest\");\nconst admin = require(\"./admin\");\nconst auth2 = require(\"../auth2\");\nconst passport = require(\"passport\");\n\nfunction handleInternalError(err, req, res, next) {\n  res.status(500).json({ error: err.toString() });\n}\n\n/* GET home page. */\nrouter.get(\"/\", (req, res, next) => {\n  res.render(\"index\");\n});\n\nrouter.post(\"/api-logout\", auth2.dispose());\nrouter.post(\"/api-login\", auth2.authenticate([\"contestant\", \"admin\", \"root\"]));\n\nrouter.post(\"/upload/:id\", auth2.isAuth([\"root\"]), (req, res, next) => {\n  if (!req.files || !req.files.file)\n    return res.status(404).json({ message: \"exactly one file should be uploaded\" });\n  Problem.findOne({ _id: req.params.id }, (err, problem) => {\n    if (err)\n      return res.status(400).json({ message: err.toString() });\n    if (!problem)\n      return res.status(400).json({ message: \"problem not found\" });\n\n    (async () => {\n      const file = req.files.file;\n\n      let task = null;\n      const store = new Storage();\n      try {\n        await store.loadZip(file.path);\n\n        const loade = await Loader.autoDetect(store);\n        if (loade === null)\n          throw new Error(\"Package is not loadable\");\n\n        task = await (new loade(store)).load();\n      } catch (ex) {\n        return res.status(400).json({ message: ex.toString() });\n      }\n\n      if (!task)\n        return res.status(400).json({ message: \"package could not be loaded\" });\n\n\n      console.log(`Uploading package ${file.path}`);\n\n      weedClient.write(file.path).then(async (info) => {\n        problem.fid = info.fid;\n        problem.attr = task.toJSON();\n\n        if (task.hasStatement()) {\n          weedClient.write(await store.getFileBuffer(task.getStatement())).then((infoStatement) => {\n            problem.statementFid = infoStatement.fid;\n            info.statementFid = infoStatement.fid;\n\n            problem.save((err) => {\n              if (err)\n                return res.status(400).json({ message: err.toString() });\n              res.send(info);\n            });\n          }).catch((err) => {\n            console.error(err);\n            res.status(400).json({ message: err.toString() });\n          });\n        } else {\n          problem.save((err) => {\n            if (err) {\n              console.error(err);\n              return res.status(400).json({ message: err.toString() });\n            }\n            res.send(info);\n          });\n        }\n      }).catch((err) => {\n        console.error(err);\n        return res.status(400).json({ message: err.toString() });\n      });\n    })();\n  });\n});\n\nrouter.get(\"/contest-list\", (req, res, next) => {\n  Contest.find({ hidden: false }, (err, contests) => {\n    if (err)\n      return handleInternalError(err, req, res);\n\n    res.json({ contests });\n  });\n});\n\nrouter.use(\"/contest\", contest);\nrouter.use(\"/admin\", admin);\nrouter.use(\"/api/v2\", api2);\n\nmodule.exports = router;\n\n\n\n// WEBPACK FOOTER //\n// ./routes/index.js","module.exports = require(\"yauzl\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"yauzl\"\n// module id = 64\n// module chunks = 0","module.exports = require(\"concat-stream\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"concat-stream\"\n// module id = 65\n// module chunks = 0","module.exports = require(\"babel-runtime/helpers/typeof\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"babel-runtime/helpers/typeof\"\n// module id = 66\n// module chunks = 0","module.exports = require(\"util\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"util\"\n// module id = 67\n// module chunks = 0","module.exports = require(\"node-wildcard\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"node-wildcard\"\n// module id = 68\n// module chunks = 0","module.exports = require(\"winston\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"winston\"\n// module id = 69\n// module chunks = 0","module.exports = require(\"es6-promisify\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"es6-promisify\"\n// module id = 70\n// module chunks = 0","module.exports = require(\"streamifier\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"streamifier\"\n// module id = 71\n// module chunks = 0","/**\n * Created by rsalesc on 14/06/16.\n */\n\nconst scoring = require(\"./scoring\");\nconst deepcopy = require(\"deepcopy\");\n\nclass Task {\n  constructor(attr) {\n    this.attr = attr;\n  }\n\n  // function to check if task is valid\n\n  /**\n     * Get scoring class\n     */\n  getScoringClass() {\n    return scoring[this.attr.scoring];\n  }\n\n  /**\n     * Get scoring\n     */\n  getScoring() {\n    return new (this.getScoringClass())(this);\n  }\n\n  /*\n    *   Get task directory\n    *   @returns {string} task directory\n     */\n  getDirectory() {\n    return this.attr.wd;\n  }\n\n  /*\n    *   Get checker path\n    *   @returns {string} checker path\n     */\n  getChecker() {\n    return this.attr.checker.path;\n  }\n\n  /*\n    *   Get checker language\n    *   @returns {string} checker language\n     */\n  getCheckerLanguage() {\n    return this.attr.checker.language;\n  }\n\n  /*\n    *   Get datasets\n     */\n  getDatasets() {\n    return this.attr.datasets;\n  }\n\n  /*\n    *   Get count of datasets\n     */\n  getDatasetsCount() {\n    try {\n      return this.attr.datasets.length;\n    } catch (e) {\n      return 0;\n    }\n  }\n\n  /*\n    *   Get timelimit (in secs)\n     */\n  getTimelimit() {\n    try {\n      return this.attr.limits.time / 1000;\n    } catch (e) {\n      return 1.0;\n    }\n  }\n\n  getTimelimitMs() {\n    return this.attr.limits.time;\n  }\n\n  /*\n    *   Get memory limit (in MB)\n     */\n  getMemorylimit() {\n    try {\n      return this.attr.limits.memory;\n    } catch (e) {\n      return 256;\n    }\n  }\n\n  getWeight() {\n    return this.weight || (this.attr.weight || 1);\n  }\n\n  getDataset(index) {\n    const datasets = this.getDatasets();\n    if(index >= datasets.length)\n      return null;\n\n    return datasets[index];\n  }\n\n  getDatasetFromName(name) {\n    const datasets = this.getDatasets();\n    for(let dataset of datasets) {\n      if(dataset.name === name)\n        return dataset;\n    }\n\n    return null;\n  }\n\n  /**\n     * @return {Boolean} if task has a statement specified in package\n     */\n  hasStatement() {\n    return Boolean(this.attr.statement);\n  }\n\n  getStatement() {\n    if (!this.attr.statement)\n      return null;\n    return this.attr.statement;\n  }\n\n  toJSON() {\n    const res = deepcopy(this.attr);\n    for (const dataset of res.datasets)\n      delete dataset.testcases;\n    return res;\n  }\n}\n\nmodule.exports = { Task };\n\n\n\n// WEBPACK FOOTER //\n// ./judge/task.js","module.exports = require(\"deepcopy\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"deepcopy\"\n// module id = 73\n// module chunks = 0","module.exports = require(\"yamljs\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"yamljs\"\n// module id = 74\n// module chunks = 0","/**\n * Created by rsalesc on 15/07/16.\n */\nconst express = require(\"express\");\nconst router = express.Router();\nconst auth2 = require(\"~/auth2\");\n\nconst contest = require(\"@routes/api/v2/contest\");\nconst problems = require(\"@routes/api/v2/problems\");\n\nrouter.use(auth2.isAuth([\"root\", \"admin\"]));\nrouter.use(contest);\nrouter.use(problems);\n\nmodule.exports = router;\n\n\n\n// WEBPACK FOOTER //\n// ./routes/api/v2/index.js","module.exports = require(\"crypto\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"crypto\"\n// module id = 76\n// module chunks = 0","const express = require(\"express\");\nconst router = express.Router();\nconst { checkAdminContest, handleApiError } = require(\"./util\");\nconst { Contest } = require(\"@models\");\n\nrouter.post(\"/contest/:id\", (req, res) => {\n  checkAdminContest(req.params.id)(req, res, () => {\n    Contest.update({ _id: req.params.id }, { $set: req.body.contest },\n                   { runValidators: true }, (err) => {\n                     if (err)\n                       return handleApiError(res, err);\n                     return res.send(200);\n                   });\n  });\n});\n\nrouter.post(\"/contest/:id/problems\", (req, res) => {\n  checkAdminContest(req.params.id)(req, res, () => {\n    Contest.update({ _id: req.params.id }, { $set: { problems: req.body.problems }},\n                   { runValidators: true }, (err) => {\n                     if (err)\n                       return handleApiError(res, err);\n                     return res.send(200);\n                   });\n  });\n});\n\nrouter.get(\"/contest/:id\", (req, res) => {\n  checkAdminContest(req.params.id)(req, res, () => {\n    Contest.findById(req.params.id, (err, contest) => {\n      if (err)\n        return handleApiError(res, err);\n      if (!contest)\n        return res.status(400).json({ error: \"contest not found\" });\n      return res.json(contest.toObject({ minimize: false }));\n    });\n  });\n});\n\nmodule.exports = router;\n\n\n\n// WEBPACK FOOTER //\n// ./routes/api/v2/contest.js","const express = require(\"express\");\nconst router = express.Router();\nconst { checkAdminContest, handleApiError } = require(\"./util\");\nconst { Problem } = require(\"@models\");\n\nrouter.get(\"/problems\", (req, res) => {\n  Problem.find({}, (err, problems) => {\n    if (err)\n      return handleApiError(res, err);\n\n    return res.json(problems.map(p => p.toObject({ minimize: false })));\n  });\n});\n\nmodule.exports = router;\n\n\n\n// WEBPACK FOOTER //\n// ./routes/api/v2/problems.js","const path = require(\"path\");\nconst mongoose = require(\"mongoose\");\nconst grader = require(\"../judge/grader\");\nconst precheck = require(\"../judge/precheck\");\nconst auth2 = require(\"../auth2\");\n\nconst express = require(\"express\");\nconst router = express.Router();\n\nconst models = require(\"../models/\");\nconst sha256 = require(\"sha256\");\n\nconst ContestProblemSelection\n    = \"code name _id attr.weight attr.author attr.datasets attr.scoring attr.limits attr.blockedLanguages\";\nconst {\n  Contest, Submission, Problem, User, Clarification, Printout\n} = models;\n\nconst { rejudge } = require(\"@routes/api/submission\");\nconst { getUserContest, isAdmin } = require(\"@routes/common\");\nconst { ObjectId } = mongoose.mongo;\n\nfunction handleContestError(err, req, res) {\n  res.status(500).json({ error: err.toString() });\n  console.error(err);\n}\n\nfunction handleRequestError(err, req, res) {\n  res.status(400).json({ error: err.toString() });\n}\n\nfunction filterOutSub(sub) {\n  for (const dataset of Object.keys(sub.verdict))\n    sub.verdict[dataset].info = {};\n\n  sub.code = undefined;\n  return sub;\n}\n\nfunction filterOutPrivateSub(sub) {\n  for (const dataset of Object.keys(sub.verdict)) {\n    if (sub.verdict[dataset].verdict !== \"VERDICT_CE\") {\n      if (sub.verdict[dataset].info)\n        sub.verdict[dataset].info.text = undefined;\n      else\n        sub.verdict[dataset].info = {};\n    }\n  }\n\n  return sub;\n}\n\nfunction filterPrivateUser(user) {\n  if (!user)\n    user = {};\n\n  user.password = undefined;\n  user.email = undefined;\n\n  return user;\n}\n\nfunction filterBlind(contest, user, sub) {\n  if (contest.isFrozen(sub.timeInContest) && !sub._creator.equals(user._id)\n    || contest.isBlind(sub.timeInContest)) {\n    for (const dataset of Object.keys(sub.verdict)) {\n      sub.verdict[dataset] = { verdict: \"VERDICT_INQ\" };\n    }\n  }\n  return sub;\n}\n\nfunction applyFreezeFilter(contest, user, subs) {\n  let res = subs;\n\n  // we have to filter out submissions\n  if (!contest.hasEnded()) {\n    res = res.filter(sub =>\n      !contest.isFrozen(sub.timeInContest) || sub._creator.equals(user._id));\n  }\n  return res.map(sub => filterBlind(contest, user, sub));\n}\n\nfunction checkForDuplicateSubmission(user, contest, problem, hashCode) {\n  return new Promise((resolve, reject) => {\n    Submission.findOne({ _creator: user, contest, problem, codeHash: hashCode }).exec((err, result) => {\n      if (err)\n        return reject(err);\n\n      resolve(result != null);\n    });\n  });\n}\n\nfunction getVisibleClarifications(req, done) {\n  const clarificationQuery = isAdmin(req)\n    ? { contest: req.auth2.user.contest }\n    : {\n      contest: req.auth2.user.contest,\n      $or: [\n        { _creator: req.auth2.user._id },\n        { broadcast: true }\n      ]\n    };\n\n  return Clarification.find(clarificationQuery)\n    .sort(\"-updatedAt\").exec(done);\n}\n\nfunction getVisiblePrintouts(req, done) {\n  const printoutQuery = isAdmin(req)\n    ? { contest: req.auth2.user.contest }\n    : {\n      contest: req.auth2.user.contest,\n      _creator: req.auth2.user._id\n    };\n\n  return Printout.find(printoutQuery)\n    .sort(\"-createdAt\").exec(done);\n}\n\nfunction estimateLines(text) {\n  return text.split(\"\\n\").reduce((acc, value) =>\n    acc + parseInt(Math.ceil((value.length + 1) / 80), 10), 0);\n}\n\n// ensure user is auth'ed\nrouter.use(auth2.isAuth([\"contestant\", \"admin\"]));\n\nrouter.get(\"/\", (req, res) => {\n  getUserContest(req.auth2.user).deepPopulate(\"problems.problem\", { populate: { \"problems.problem\": { select: ContestProblemSelection }}}).exec((err, contest) => {\n    if (err)\n      return handleContestError(err, req, res);\n    if (!contest)\n      return handleContestError(\"inconsistent session\", req, res);\n\n    if (!isAdmin(req) && !contest.hasStarted())\n      contest.problems = [];\n\n    const contestObj = {\n      ...contest.toObject({ minimize: false }),\n      ...{ languages: Object.entries(grader.availableLanguages) }\n    };\n\n    User.find({ contest: contest.id, role: \"contestant\", disabled: { $ne: true } })\n      .select(\"-password -email\").exec((err, teams) => {\n        if (err)\n          return handleContestError(err, req, res);\n        if (teams === null)\n          return handleContestError(\"couldnt retrieve teams\", req, res);\n\n        return getVisibleClarifications(req, (err, clarifications) => {\n          if (err)\n            return handleContestError(err, req, res);\n          return getVisiblePrintouts(req, (err, printouts) => {\n            if (err)\n              return handleContestError(err, req, res);\n            return res.json({\n              _user: req.auth2.user._id,\n              userObject: filterPrivateUser(req.auth2.user.toObject({ minimize: false })),\n              teams,\n              clarifications,\n              printouts,\n              contest: contestObj\n            });\n          });\n        });\n    });\n  });\n});\n\nrouter.get(\"/my\", (req, res, next) => {\n  Submission.find({ contest: req.auth2.user.contest, _creator: req.auth2.user._id })\n    .sort(\"-time\")\n    .exec((err, subs) => {\n      if (err)\n        return handleContestError(err, req, res, next);\n\n      return res.json({\n        _user: req.auth2.user._id,\n        submissions: subs\n      });\n    });\n});\n\nrouter.get(\"/submissions\", (req, res) => {\n  getUserContest(req.auth2.user).exec((err, contest) => {\n    if (err)\n      return handleContestError(err, req, res);\n    if (!contest)\n      return handleContestError(\"non existent contest\", req, res);\n\n    if (!contest.hasStarted())\n      return res.json({ _user: req.auth2.user._id, submissions: []});\n\n    return Submission.find({ contest: req.auth2.user.contest }).sort(\"-time\").select(\"-code\")\n      .exec((err, subs) => {\n        if (err)\n          return handleContestError(err, req, res);\n        let filteredSubs = subs;\n        if (!isAdmin(req))\n          filteredSubs = applyFreezeFilter(contest, req.auth2.user, filteredSubs);\n        filteredSubs = filteredSubs.map(filterOutSub);\n        return res.json({ _user: req.auth2.user._id, submissions: filteredSubs });\n      });\n  });\n});\n\n// TODO: hash submissions to avoid duplicates\nrouter.post(\"/submit\", (req, res) => {\n  if (!req.body.code || !req.body.language || !req.body.problem)\n    return handleRequestError(\"all fields must be filled\", req, res);\n  const { user } = req.auth2;\n\n  if (isAdmin(req))\n    return handleRequestError(\"admin cannot submit solutions\", req, res);\n  if (user.disabled)\n    return handleRequestError(\"you cant submit solutions\", req, res);\n\n  if (!grader.availableLanguages.hasOwnProperty(req.body.language))\n    return handleRequestError(\"language is invalid\", req, res);\n\n  try {\n    req.body.code = precheck[req.body.language](req.body.code);\n  } catch (ex) {\n    return handleRequestError(ex.message, req, res);\n  }\n\n  getUserContest(user).exec((err, contest) => {\n    if (err)\n      return handleContestError(err, req, res);\n    if (!contest)\n      return handleContestError(\"contest not found\", req, res);\n\n    Problem.findById(req.body.problem).exec(async (err, problem) => {\n      if (err)\n        return handleContestError(err, req, res);\n      if (!problem || contest.problems.findIndex(x => x.problem == req.body.problem) === -1)\n        return handleRequestError(\"problem not found\", req, res);\n\n      if (!contest.hasStarted())\n        return handleRequestError(\"contest has not started\", req, res);\n\n      const hashCode = sha256(req.body.code);\n\n      try {\n        if (await checkForDuplicateSubmission(user._id, contest._id, req.body.problem, hashCode))\n          return handleRequestError(\"you can't submit the same code twice\", req, res);\n      } catch (ex) {\n        return handleContestError(ex, req, res);\n      }\n\n      let timeInContest = contest.getTimeInContest();\n\n      if (contest.hasEnded())\n        timeInContest = -1;\n\n      const verdict = {};\n      for (const data of problem.attr.datasets) {\n        verdict[data.name] = {\n          verdict: \"VERDICT_INQ\", passed: -1, score: 0, info: \"\"\n        };\n      }\n\n\n      const sub = new Submission({\n        _creator: req.auth2.user.id,\n        contest,\n        problem: req.body.problem,\n        timeInContest,\n        language: req.body.language,\n        code: req.body.code,\n        codeHash: hashCode,\n        verdict\n      });\n\n      sub.save(async (err) => {\n        if (err)\n          return handleContestError(err, req, res);\n\n        try {\n          await judeQueue.add({\n            id: req.body.problem,\n            subid: sub._id,\n            fid: problem.fid,\n            code: req.body.code,\n            lang: req.body.language\n          });\n        } catch (ex) {\n          return handleContestError(ex, req, res);\n        }\n\n        res.json({ success: \"submitted\" });\n      });\n    });\n  });\n});\n\nrouter.get(\"/statement/:letter\", (req, res, next) => {\n  getUserContest(req.auth2.user).deepPopulate(\"problems.problem\").exec((err, contest) => {\n    if (err)\n      return handleContestError(err, req, res, next);\n    if (!contest)\n      return handleContestError(\"contest not found\", req, res);\n\n    if (!contest.hasStarted() && !isAdmin(req))\n      return handleRequestError(\"contest has not started\", req, res);\n\n    for (const prob of contest.problems) {\n      if (prob.letter === req.params.letter) {\n        // res.setHeader('Content-Disposition', 'attachment');\n        return weedClient.read(prob.problem.statementFid, res);\n      }\n    }\n\n    return handleRequestError(\"problem not found\", req, res);\n  });\n});\n\nrouter.get(\"/submission/:id\", (req, res, next) => {\n  getUserContest(req.auth2.user).exec((err, contest) => {\n    if (err)\n      return handleContestError(err, req, res, next);\n    if (!contest)\n      return handleContestError(\"contest not found\", req, res, next);\n\n    Submission.findById(req.params.id).lean().exec((err2, sub) => {\n      if (err2)\n        return handleContestError(err2, req, res, next);\n      if (!sub)\n        return handleRequestError(\"submission not found\", req, res, next);\n\n      if (!sub._creator.equals(req.auth2.user._id) && !(contest.hasEnded() && contest.upseeing && !contest.isFrozen()) && !isAdmin(req))\n        return res.json(filterBlind(contest, req.auth2.user, filterOutSub(sub)));\n\n\n      let filteredSub = filterOutPrivateSub(sub);\n      if (!isAdmin(req))\n        filteredSub = filterBlind(contest, req.auth2.user, filteredSub);\n      return res.json(filteredSub);\n    });\n  });\n});\n\nrouter.post(\"/clarification\", (req, res, next) => {\n  if (req.auth2.user.disabled)\n    return handleRequestError(\"you are a disabled user\", req, res);\n\n  getUserContest(req.auth2.user).exec((err, contest) => {\n    if (err)\n      return handleContestError(err, req, res, next);\n    if (!contest)\n      return handleContestError(\"contest not found\", req, res, next);\n\n    // TODO: validate if comments are really strings\n\n    let insertData = {\n      _creator: req.auth2.user._id,\n      contest: contest._id,\n      problem: req.body.problem || null,\n      comments: (req.body.$push || []).map(t => (t || \"\").trim()).filter(t => t).map(t => ({\n        _creator: isAdmin(req) ? null : req.auth2.user._id,\n        text: t\n      }))\n    };\n\n    if (insertData.comments.length === 0)\n      return handleRequestError(\"cant create empty clarification\", req, res, next);\n\n    if (isAdmin(req))\n      insertData._creator = req.body.target || null;\n    if (isAdmin(req) && req.body.broadcast != null)\n      insertData = { ...insertData, broadcast: req.body.broadcast };\n\n    return new Clarification(insertData).save((err2) => {\n      if (err2)\n        return handleContestError(err2, req, res, next);\n      return res.json({ success: \"posted\" });\n    });\n  });\n});\n\nrouter.post(\"/clarification/:id\", (req, res, next) => {\n  if (req.auth2.user.disabled)\n    return handleRequestError(\"you are a disabled user\", req, res);\n\n  getUserContest(req.auth2.user).exec((err, contest) => {\n    if (err)\n      return handleContestError(err, req, res, next);\n    if (!contest)\n      return handleContestError(\"contest not found\", req, res, next);\n\n    return Clarification.findById(req.params.id, (err2, clar) => {\n      if (err2)\n        return handleContestError(err2, req, res, next);\n      if (!clar || !clar.contest.equals(ObjectId(req.auth2.user.contest)))\n        return handleRequestError(\"clarification not found\", req, res, next);\n      if (!isAdmin(req) && !clar._creator.equals(ObjectId(req.auth2.user._id))) {\n        return handleRequestError(\"no permission on this clarification\",\n                                  req, res, next);\n      }\n      if (req.body.$push.length && clar.broadcast && !isAdmin(req)) {\n        return handleRequestError(\"cant comment on a broadcast clarification\",\n                                  req, res, next);\n      }\n      // TODO: validate if comments are really strings\n\n      const toPush = (req.body.$push || []).map(t => (t || \"\").trim())\n        .filter(t => t).map(t => ({\n          _creator: isAdmin(req) ? null : req.auth2.user._id,\n          text: t\n        }));\n      let updateQuery = {\n        $push: { comments: { $each: toPush }}\n      };\n\n      if (isAdmin(req) && req.body.broadcast != null)\n        updateQuery = { ...updateQuery, broadcast: req.body.broadcast };\n\n      return Clarification.update({ _id: req.params.id }, updateQuery, (err3) => {\n        if (err3)\n          return handleContestError(err3, req, res, next);\n\n        return res.json({ success: \"posted\" });\n      });\n    });\n  });\n});\n\nrouter.post(\"/printout\", (req, res, next) => {\n  if (req.auth2.user.disabled)\n    return handleRequestError(\"you are a disabled user\", req, res);\n\n  getUserContest(req.auth2.user).exec((err, contest) => {\n    if (err)\n      return handleContestError(err, req, res, next);\n    if (!contest)\n      return handleContestError(\"contest not found\", req, res, next);\n\n    const insertData = {\n      _creator: req.auth2.user._id,\n      contest: contest._id,\n      text: (req.body.text || \"\").trim(),\n      lines: estimateLines(req.body.text),\n      done: false\n    };\n\n    if (!insertData.text)\n      return handleRequestError(\"cant create empty printout\", req, res, next);\n\n    return new Printout(insertData).save((err2) => {\n      if (err2)\n        return handleContestError(err2, req, res, next);\n      return res.json({ success: \"posted\" });\n    });\n  });\n});\n\nrouter.post(\"/printout/:id\", (req, res, next) => {\n  if (!isAdmin(req))\n    return handleRequestError(\"only admins can mark printouts\", req, res, next);\n  getUserContest(req.auth2.user).exec((err, contest) => {\n    if (err)\n      return handleContestError(err, req, res, next);\n    if (!contest)\n      return handleContestError(\"contest not found\", req, res, next);\n\n    return Printout.update({\n      _id: req.params.id\n    }, { done: req.body.done }, (err) => {\n      if (err)\n        return handleContestError(err, req, res, next);\n      return res.json({ success: \"posted\" });\n    });\n  });\n});\n\nrouter.get(\"/languages\", (req, res) => res.json(Object.entries(grader.availableLanguages)));\n\nrouter.use(auth2.isAuth([\"admin\"]));\n\nrouter.post(\"/rejudge\", (req, res, next) => {\n  getUserContest(req.auth2.user).exec(async (err, contest) => {\n    if (err)\n      return handleContestError(err, req, res, next);\n    if (!contest)\n      return handleContestError(\"contest not found\", req, res, next);\n\n    // filter by contest\n    const toRejudge = [...new Set((req.body.submissions || []))];\n\n    const reflect = (p => p.then(v => ({v, status: true }), e => ({e, status: false })));\n\n    const ans = await Promise.all(toRejudge.map(s => rejudge(s)).map(reflect));\n    return res.json({ success: ans.filter(r => r.status).length });\n  });\n});\n\nmodule.exports = router;\n\n\n\n// WEBPACK FOOTER //\n// ./routes/contest.js","module.exports = require(\"babel-runtime/helpers/toConsumableArray\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"babel-runtime/helpers/toConsumableArray\"\n// module id = 80\n// module chunks = 0","module.exports = require(\"babel-runtime/core-js/object/entries\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"babel-runtime/core-js/object/entries\"\n// module id = 81\n// module chunks = 0","/**\n * Created by rsalesc on 24/06/16.\n */\n\n// eslint-disable-next-line no-unused-vars\nconst fs = require(\"fs\");\nconst fse = require(\"fs-extra\");\nconst path = require(\"path\");\nconst promiseReflect = require(\"promise-reflect\");\n\nconst verdict = require(\"./verdict\");\nconst utils = require(\"./utils\");\nconst logger = require(\"./logger\");\nconst sandbox = require(\"./sandbox\");\nconst environment = require(\"./environment\");\n\nconst loader = require(\"./loader\");\nconst Profiler = require(\"./profiler\");\n\nconst Storage = require(\"./storage\").MemoryStorage;\n\nconst { Verdict } = verdict;\nconst { Isolate, IsolateConst } = sandbox;\nconst { JudgeEnvironment, JudgeConfig } = environment;\nconst { JudeLoader } = loader;\n\nconst policyPath = \"/etc/java-sandbox/security.policy\";\nconst javaExecutorPath = \"/etc/java-sandbox/executor.jar\";\n\nasync function evaluate(iso, store, command, input, output = \"output\", error = \"error\") {\n  if (input)\n    iso.stdin = input;\n  iso.stdout = output;\n  iso.stderr = error;\n\n  // remove stdout and stderr, only for dbg\n  const res = await iso.execute(command);\n  // iso.removeFile(iso.stdout)\n  // iso.removeFile(iso.stderr)\n\n  return res;\n}\n\nconst Evaluation = {\n  async CPP(iso, store, execPath, test, timelimit = null, wtlimit = null, memorylimit = null,\n            input = \"input\", output = \"output\",\n            error = \"error\") {\n    iso.timelimit = timelimit;\n    iso.wallclockLimit = wtlimit;\n    iso.memorySize = memorylimit;\n    await iso.createFileFromStorage(input, test);\n    await iso.createFileFromStorage(\"eval\", execPath, true);\n\n    const res = await evaluate(iso, store, [\"./eval\"], input, output, error);\n    await iso.removeFile(\"eval\");\n    await iso.removeFile(input);\n\n    return res;\n  },\n  async Py2(iso, store, execPath, test, timelimit = null, wtlimit = null, memorylimit = null,\n            input = \"input\", output = \"output\",\n            error = \"error\") {\n    iso.timelimit = timelimit;\n    iso.wallclockLimit = wtlimit;\n    iso.memorySize = memorylimit;\n    iso.setEnv.HOME = \"./\";\n    iso.dirs.push({ in: \"/usr\" });\n    iso.dirs.push({ in: \"/etc\" });\n    await iso.createFileFromStorage(input, test);\n    await iso.createFileFromStorage(\"sol.pyc\", \"sol.pyc\", true);\n\n    const res = await evaluate(iso, store, [\"/usr/bin/python2\", \"sol.pyc\"], input, output, error);\n    iso.dirs.pop();\n    iso.dirs.pop();\n\n    await iso.removeFile(\"sol.pyc\");\n    await iso.removeFile(input);\n\n    return res;\n  },\n  async Py3(iso, store, execPath, test, timelimit = null, wtlimit = null, memorylimit = null,\n            input = \"input\", output = \"output\",\n            error = \"error\") {\n    iso.timelimit = timelimit;\n    iso.wallclockLimit = wtlimit;\n    iso.memorySize = memorylimit;\n    iso.setEnv.HOME = \"./\";\n    iso.dirs.push({ in: \"/usr\" });\n    iso.dirs.push({ in: \"/etc\" });\n    await iso.createFileFromStorage(input, test);\n    await iso.createFileFromStorage(\"sol.pyc\", \"sol.pyc\", true);\n\n    const res = await evaluate(iso, store, [\"/usr/bin/python3\", \"sol.pyc\"], input, output, error);\n    iso.dirs.pop();\n    iso.dirs.pop();\n\n    await iso.removeFile(\"sol.pyc\");\n    await iso.removeFile(input);\n\n    return res;\n  },\n  async Java(iso, store, execPath, test, timelimit = null, wtlimit = null, memorylimit = null,\n             input = \"input\", output = \"output\",\n             error = \"error\") {\n    const oldProc = iso.maxProcesses;\n    const oldEnv = iso.setEnv;\n    const oldCgTiming = iso.cgTiming;\n    const oldCgMemory = iso.cgMemorySize;\n    const oldCg = iso.cgroup;\n\n    iso.setEnv.MALLOC_ARENA_MAX = \"1\";\n    iso.maxProcesses = null;\n    iso.timelimit = timelimit;\n    iso.wallclockLimit = wtlimit;\n    iso.dirs.push({ in: \"/etc\" });\n    iso.dirs.push({ in: \"/usr/lib/jvm\" });\n    iso.memorySize = (1300 * 1024) + memorylimit;\n    iso.cgMemorySize = iso.memorySize;\n    iso.cgTiming = true;\n    iso.cgroup = true;\n\n    await iso.createFileFromStorage(input, test);\n    await iso.globFromStorage(\"*.class\", path.basename);\n\n    const command = [\n      \"/usr/bin/java\",\n      \"-client\",\n      `-javaagent:${javaExecutorPath}=policy:${policyPath}`,\n      \"-Xss128m\",\n      `-Xmx${memorylimit / 1024 | 0}m`,\n      \"-XX:MaxMetaspaceSize=256m\",\n      \"-XX:CompressedClassSpaceSize=64m\",\n      \"-XX:ErrorFile=submission_jvm_crash.log\",\n      \"Main\"\n    ];\n\n    // console.log(iso.getRunArgs());\n    const res = await evaluate(iso, store, command, input, output, error);\n    // console.log(fs.readFileSync(iso.resolvePath(\"output\"), \"utf8\"));\n    // console.log(fs.readFileSync(iso.resolvePath(\"error\"), \"utf8\"));\n    // console.log(fs.readFileSync(iso.resolvePath(\"run.log.0\"), \"utf8\"));\n\n    // console.log(fs.readFileSync(iso.resolvePath(\"submission_jvm_crash.log\")));\n    // console.log(fs.readFileSync(iso.resolvePath(\"state\"), \"utf8\"));\n\n    // require(\"sleep\").sleep(20);\n\n    if (await iso.fileExists(\"submission_jvm_crash.log\"))\n      throw new Error(\"JVM somehow crashed\");\n\n    //if (!await iso.fileExists(\"state\"))\n      //throw new Error(\"State file not found\");\n\n    await iso.removeFile(input);\n    iso.dirs.pop();\n    iso.dirs.pop();\n    iso.setEnv = oldEnv;\n    iso.maxProcesses = oldProc;\n    iso.cgTiming = oldCgTiming;\n    iso.cgMemorySize = oldCgMemory;\n    iso.cgroup = oldCg;\n\n    return res;\n  }\n};\nEvaluation.C = Evaluation.CPP;\n\nconst Checking = {\n  async CPP(iso, store, execPath,\n            input = \"input\", output = \"output\", answer = \"answer\",\n            checkerInput = null, checkerOutput = \"checker_output\", checkerError = \"checker_error\") {\n    iso.timelimit = JudgeConfig.CHECKING_TL;\n    iso.wallclockLimit = JudgeConfig.CHECKING_WTL;\n    iso.memorySize = JudgeConfig.CHECKING_ML * 1024;\n\n    await iso.createFileFromStorage(\"eval\", execPath, true);\n\n    const res = await evaluate(iso, store, [\"./eval\", input, output, answer],\n                               checkerInput, checkerOutput, checkerError);\n    await iso.removeFile(\"eval\");\n    await iso.removeFile(input);\n\n    res.stdout = await iso.getFileToString(checkerOutput);\n    res.stderr = await iso.getFileToString(checkerError);\n    return res;\n  }\n};\nChecking.C = Checking.CPP;\n\nconst Compilation = {\n  async CPP(iso, store, file, execPath) {\n    const sourceFile = \"source.cpp\";\n    await iso.createFileFromStorage(sourceFile, file);\n\n    const oldEnv = iso.preserveEnv;\n    const oldProc = iso.maxProcesses;\n    const oldTL = iso.timelimit;\n    const oldWTL = iso.wallclockLimit;\n    iso.preserveEnv = true;\n    iso.maxProcesses = null;\n    iso.dirs.push({ in: \"/etc\" });\n    iso.timelimit = JudgeConfig.COMPILATION_TL;\n    iso.wallclockLimit = JudgeConfig.COMPILATION_TL;\n\n    const res = await evaluate(iso, store, [\"/usr/bin/g++\", \"-lm\", \"-std=c++14\",\n                                            sourceFile, \"-O3\"]);\n\n    iso.maxProcesses = oldProc;\n    iso.preserveEnv = oldEnv;\n    iso.timelimit = oldTL;\n    iso.wallclockLimit = oldWTL;\n    iso.dirs.pop();\n\n    await iso.removeFile(sourceFile);\n\n    if (res.code === 0 && execPath) {\n      await iso.getFileToStorage(\"a.out\", execPath);\n      await iso.removeFile(\"a.out\");\n    }\n\n    res.stdout = await iso.getFileToString(\"output\");\n    res.stderr = await iso.getFileToString(\"error\");\n    await iso.removeFile(\"output\");\n    await iso.removeFile(\"error\");\n    return res;\n  },\n  async C(iso, store, file, execPath) {\n    const sourceFile = \"source.c\";\n    await iso.createFileFromStorage(sourceFile, file);\n\n    const oldEnv = iso.preserveEnv;\n    const oldProc = iso.maxProcesses;\n    const oldTL = iso.timelimit;\n    const oldWTL = iso.wallclockLimit;\n    iso.preserveEnv = true;\n    iso.maxProcesses = null;\n    iso.dirs.push({ in: \"/etc\" });\n    iso.timelimit = JudgeConfig.COMPILATION_TL;\n    iso.wallclockLimit = JudgeConfig.COMPILATION_TL;\n\n    const res = await evaluate(iso, store, [\"/usr/bin/gcc\", \"-lm\", \"-std=c11\",\n                                            sourceFile, \"-O3\"]);\n\n\n    iso.maxProcesses = oldProc;\n    iso.preserveEnv = oldEnv;\n    iso.timelimit = oldTL;\n    iso.wallclockLimit = oldWTL;\n    iso.dirs.pop();\n\n    await iso.removeFile(sourceFile);\n\n    if (res.code === 0 && execPath) {\n      await iso.getFileToStorage(\"a.out\", execPath);\n      await iso.removeFile(\"a.out\");\n    }\n\n    res.stdout = await iso.getFileToString(\"output\");\n    await iso.removeFile(\"output\");\n    return res;\n  },\n  async Java(iso, store, file) {\n    const sourceFile = \"Main.java\";\n    await iso.createFileFromStorage(sourceFile, file);\n\n    const oldEnv = iso.preserveEnv;\n    const oldProc = iso.maxProcesses;\n    const oldTL = iso.timelimit;\n    const oldWTL = iso.wallclockLimit;\n    iso.preserveEnv = true;\n    iso.maxProcesses = null;\n    iso.dirs.push({ in: \"/etc\" });\n    iso.dirs.push({ in: \"/usr/lib/jvm\" });\n    iso.timelimit = JudgeConfig.COMPILATION_TL;\n    iso.wallclockLimit = JudgeConfig.COMPILATION_TL;\n\n    const res = await evaluate(iso, store,\n                               [\"/usr/bin/javac\", \"-Xlint\", \"-encoding\", \"UTF-8\", sourceFile]);\n\n    iso.maxProcesses = oldProc;\n    iso.preserveEnv = oldEnv;\n    iso.timelimit = oldTL;\n    iso.wallclockLimit = oldWTL;\n    iso.dirs.pop();\n    iso.dirs.pop();\n\n    await iso.removeFile(sourceFile);\n\n    if (res.code === 0)\n      await iso.globToStorage(\"*.class\", path.basename);\n\n\n    res.stdout = await iso.getFileToString(\"output\");\n    res.stderr = await iso.getFileToString(\"error\");\n    await iso.removeFile(\"output\");\n    await iso.removeFile(\"error\");\n    return res;\n  },\n  async Py2(iso, store, file, execPath) {\n    const sourceFile = \"sol.py\";\n    await iso.createFileFromStorage(sourceFile, file);\n\n    const oldEnv = iso.preserveEnv;\n    const oldProc = iso.maxProcesses;\n    const oldTL = iso.timelimit;\n    const oldWTL = iso.wallclockLimit;\n    iso.preserveEnv = true;\n    iso.maxProcesses = null;\n    iso.dirs.push({ in: \"/etc\" });\n    iso.dirs.push({ in: \"/usr\" });\n    iso.timelimit = JudgeConfig.COMPILATION_TL;\n    iso.wallclockLimit = JudgeConfig.COMPILATION_TL;\n\n    const res = await evaluate(iso, store, [\"/usr/bin/python2\", \"-m\", \"py_compile\",\n                                            sourceFile]);\n\n    iso.maxProcesses = oldProc;\n    iso.preserveEnv = oldEnv;\n    iso.timelimit = oldTL;\n    iso.wallclockLimit = oldWTL;\n    iso.dirs.pop();\n    iso.dirs.pop();\n\n    await iso.removeFile(sourceFile);\n\n    if (res.code === 0 && execPath)\n      await iso.globToStorage(\"**/*.pyc\", _ => \"sol.pyc\");\n\n    res.stdout = await iso.getFileToString(\"output\");\n    res.stderr = await iso.getFileToString(\"error\");\n    await iso.removeFile(\"output\");\n    await iso.removeFile(\"error\");\n    return res;\n  },\n  async Py3(iso, store, file, execPath) {\n    const sourceFile = \"sol.py\";\n    await iso.createFileFromStorage(sourceFile, file);\n\n    const oldEnv = iso.preserveEnv;\n    const oldProc = iso.maxProcesses;\n    const oldTL = iso.timelimit;\n    const oldWTL = iso.wallclockLimit;\n    iso.preserveEnv = true;\n    iso.maxProcesses = null;\n    iso.dirs.push({ in: \"/etc\" });\n    iso.dirs.push({ in: \"/usr\" });\n    iso.timelimit = JudgeConfig.COMPILATION_TL;\n    iso.wallclockLimit = JudgeConfig.COMPILATION_TL;\n\n    const res = await evaluate(iso, store, [\"/usr/bin/python3\", \"-m\", \"py_compile\",\n                                            sourceFile]);\n\n    iso.maxProcesses = oldProc;\n    iso.preserveEnv = oldEnv;\n    iso.timelimit = oldTL;\n    iso.wallclockLimit = oldWTL;\n    iso.dirs.pop();\n    iso.dirs.pop();\n\n    await iso.removeFile(sourceFile);\n\n    if (res.code === 0 && execPath)\n      await iso.globToStorage(\"**/*.pyc\", _ => \"sol.pyc\");\n\n\n    res.stdout = await iso.getFileToString(\"output\");\n    res.stderr = await iso.getFileToString(\"error\");\n    await iso.removeFile(\"output\");\n    await iso.removeFile(\"error\");\n    return res;\n  }\n};\n\n/* Path constants to be used in the grading steps */\nconst SOURCE_PATH = \"_/sol\";\nconst SOURCE_EXEC_PATH = \"_/sol_exec\";\nconst CHECKER_PATH = \"_/checker\";\nconst CHECKER_EXEC_PATH = \"_/checker_exec\";\n\n/**\n*   Compile the solution\n*   @param {JudgeEnvironment}\n*   @param {Storage}\n*   @param {string} solution language\n*   @param {string} path of the solution code in the storage\n*   @param {string} path of the resulting executable file in the storage\n*   @retuns {Object} compilation output/verdict (Isolate.execute() result\n*     + Isolate.getLog() result)\n */\nasync function compilationStepAsync(env, store, lang, sol = SOURCE_PATH,\n                                    solExec = SOURCE_EXEC_PATH) {\n  const iso = new Isolate(env, store);\n  try {\n    await iso.init();\n    const result = await Compilation[lang](iso, store, sol, solExec);\n\n    // get log\n    result.log = await iso.getLog();\n\n    // cleanup\n    try {\n      await iso.cleanup();\n    } catch (e) {\n      console.error(e);\n    }\n\n    return result;\n  } catch (e) {\n    logger.error(\"compilation step failed - %s\", e.toString());\n    try {\n      await iso.cleanup();\n    } catch (e2) {\n      console.error(e2);\n    }\n\n    throw { code: 2 };\n  }\n}\n\n/*\n*   Promisified testCase\n */\n// eslint-disable-next-line require-await\nasync function testCaseAsync(env, store, iso, task, lang, dataset, testcase) {\n  return new Promise(async (resolve) => {\n    logger.debug(`running on testcase ${testcase.in}`);\n\n    // to seconds\n    const timelimit = task.getTimelimit();\n\n    // to KB\n    const memorylimit = task.getMemorylimit() * 1024;\n\n    let evaluationResult = {};\n    let checkingResult = {};\n    let execTime;\n    const exitWith = v => resolve(v);\n\n    let execLog = {};\n    // grading step\n    try {\n      await iso.init();\n      evaluationResult = await Evaluation[lang](iso, store, SOURCE_EXEC_PATH,\n                                                testcase.in, timelimit,\n                                                timelimit * JudgeConfig.WT_MULTIPLIER, memorylimit);\n\n      evaluationResult.log = await iso.getLog();\n      execLog = evaluationResult.log;\n\n      // sandbox crashed\n      if (!Isolate.translateBoxExitCode(evaluationResult.code)) {\n        console.log(\"sandbox crashed in evaluation step\");\n        console.log(evaluationResult);\n        return exitWith(new Verdict(0, \"VERDICT_JE\"));\n      }\n\n      const dummy = new Isolate(env, store, evaluationResult.log);\n      execTime = dummy.getRunningTime();\n\n      // execution failed, do something and return\n      if (evaluationResult.code === 1) {\n        const exitStatus = dummy.getExitStatus();\n        const exitCode = dummy.getExitCode();\n\n        if (exitStatus === IsolateConst.EXIT_TIMEOUT)\n          return exitWith(new Verdict(0, \"VERDICT_TLE\", -1, { time: timelimit }));\n        else if (exitStatus === IsolateConst.EXIT_TIMEOUT_WALL)\n          return exitWith(new Verdict(0, \"VERDICT_WTE\", -1, { time: execTime }));\n        else if (exitStatus === IsolateConst.EXIT_OUTPUT_LIMIT)\n          return exitWith(new Verdict(0, \"VERDICT_OLE\", -1, { time: execTime }));\n\n\n        // TODO: add sandbox information about RTE\n        return exitWith(new Verdict(0, \"VERDICT_RTE\", -1, {\n          text: `exited with code ${exitCode}`,\n          time: execTime\n        }));\n      }\n    } catch (e) {\n      logger.error(\"execution step failed - %s\", e.toString());\n      return exitWith(new Verdict(0, \"VERDICT_JE\"));\n    }\n\n    try {\n      // recreate file to avoid input modification when checking\n      await iso.createFileFromStorage(\"input\", testcase.in);\n      await iso.createFileFromStorage(\"answer\", testcase.out);\n\n      checkingResult = await Checking[task.getCheckerLanguage()](iso, store,\n                                                                 CHECKER_EXEC_PATH);\n      checkingResult.log = await iso.getLog();\n\n      if (!Isolate.translateBoxExitCode(checkingResult.code)) {\n        console.log(\"error in checking step right after grading\");\n        console.log(checkingResult);\n        return exitWith(new Verdict(0, \"VERDICT_JE\"));\n      }\n\n      iso.log = execLog;\n      const output = checkingResult.stderr;\n\n      if (checkingResult.code === 1) {\n        const dummy = new Isolate(env, store, checkingResult.log);\n        const exitStatus = dummy.getExitStatus();\n        const exitCode = dummy.getExitCode();\n\n        if (exitStatus === IsolateConst.EXIT_TIMEOUT\n          || exitStatus === IsolateConst.EXIT_TIMEOUT_WALL)\n          return exitWith(new Verdict(0, \"VERDICT_CHTE\"));\n\n\n        if (exitCode === 1 || exitCode === 2)\n          return exitWith(new Verdict(0, \"VERDICT_WA\", 0, { text: output, time: execTime }));\n\n        return exitWith(new Verdict(0, \"VERDICT_FAIL\", 0, { text: output, time: execTime }));\n      }\n\n      return exitWith(new Verdict(1, \"VERDICT_AC\", 0, { text: output, time: execTime }));\n    } catch (e) {\n      logger.error(\"checker step failed - %s\", e.toString());\n      console.log(e);\n      return exitWith(new Verdict(0, \"VERDICT_JE\"));\n    }\n  });\n}\n\n/**\n*   Test to-be-executed solution against testcases of the given dataset\n*   Files expected to be created beforehand are: _/checker_exec, _/sol_exec\n*   @param {JudgeEnvironment}\n*   @param {Storage}\n*   @param {Task}   task\n*   @param {string} language of the to-be-executed solution\n*   @param {Object} dataset\n */\nasync function testDataset(env, store, task, lang, dataset) {\n  let execTime = -1;\n  try {\n    const n = dataset.testcases.length;\n    let totalTime = 0;\n    let wallTime = 0;\n\n    for (let i = 0; i < n; i += JudgeConfig.MAX_SIMUL_TESTS) {\n      const cases = [];\n      const boxes = [];\n      for (let j = 0; j < JudgeConfig.MAX_SIMUL_TESTS && i + j < n; j++) {\n        const iso = new Isolate(env, store);\n        boxes.push(iso);\n        cases.push(testCaseAsync(env, store, iso, task, lang,\n                                 dataset, dataset.testcases[i + j]));\n      }\n\n      // eslint-disable-next-line no-await-in-loop\n      const res = await Promise.all(cases.map(promiseReflect));\n      env.pingCurrent().then(() => null).catch(console.error);\n\n      for (let j = 0; j < JudgeConfig.MAX_SIMUL_TESTS && i + j < n; j++) {\n        const { status } = res[j];\n\n        if (status === \"rejected\")\n          throw res[j].error;\n\n        const caseResult = res[j].data;\n        totalTime += boxes[j].getRunningTime();\n        wallTime += boxes[j].getWallTime();\n        if (caseResult.info.hasOwnProperty(\"time\"))\n          execTime = Math.max(execTime, caseResult.info.time);\n\n        if (caseResult.verdict !== \"VERDICT_AC\") {\n          caseResult.passed = i + j;\n          if (execTime >= 0)\n            caseResult.info.time = execTime;\n          return caseResult;\n        }\n      }\n\n      // eslint-disable-next-line require-await, no-await-in-loop\n      await Promise.all(boxes.map(async box => box.cleanup()));\n    }\n\n    console.log(\"rt\", totalTime);\n    console.log(\"wt\", wallTime);\n  } catch (e) {\n    logger.error(\"dataset test failed - %s\", e.toString());\n    return new Verdict(0, \"VERDICT_JE\");\n  }\n\n  return new Verdict(1, \"VERDICT_AC\", dataset.testcases.length, { time: execTime });\n}\n\n/**\n*   Test code against testcases of the given task, in the given language.\n*   Created files in storage are: _/checker_exec, _/sol_exec\n*\n*   @param {JudgeEnvironment}\n*   @param {string} unique file ID of the package\n*   @param {Task}\n*   @param {Storage}\n*   @param {string} the submitted code\n*   @param {string} language of the submitted code\n*   @returns {Verdict} evalution output/verdict\n */\nasync function testTask(env, packageFid, task, store, code, lang) {\n  // create solution source in the storage\n  await store.createFileFromContent(SOURCE_PATH, code);\n\n  // setup compilation step\n  const compilationSteps = [compilationStepAsync(env, store, lang)];\n\n  // check for cached checker\n  if (env.checkerCache.exists(packageFid)) {\n    const checkerPath = env.checkerCache.getFilePath(packageFid);\n    await store.createFileFromContent(CHECKER_EXEC_PATH, await fse.readFile(checkerPath));\n    env.checkerCache.ping(packageFid);\n    console.log(\"using cached checker\");\n  } else {\n    compilationSteps.push(compilationStepAsync(env, store, task.getCheckerLanguage(),\n                                               task.getChecker(), CHECKER_EXEC_PATH));\n  }\n\n  // compile files\n  const [compilationResult,\n         checkerCompilationResult] = await Promise.all(compilationSteps);\n\n    // sandbox crashed\n  if (!Isolate.translateBoxExitCode(compilationResult.code)) {\n    console.log(\"sandbox crashed in compilation step\");\n    console.log(compilationResult);\n    return utils.fillUpTo([new Verdict(0, \"VERDICT_JE\")], task.getDatasetsCount());\n  }\n\n  // check if checker had to be compiled (in case it wasn't cached).\n  if (checkerCompilationResult != null) {\n    // sandbox crashed\n    if (!Isolate.translateBoxExitCode(checkerCompilationResult.code)) {\n      console.log(\"sandbox crashed in checker compilation step\");\n      console.log(checkerCompilationResult);\n      return utils.fillUpTo([new Verdict(0, \"VERDICT_JE\")], task.getDatasetsCount());\n    }\n\n    // checker compilation failed, do something and return\n    if (checkerCompilationResult.code === 1) {\n      const dummy = new Isolate(env, null, compilationResult.log);\n      const exitStatus = dummy.getExitStatus();\n      const exitCode = dummy.getExitCode();\n      const output = compilationResult.stderr;\n\n      logger.error(\"checker compilation failed with error %s (%d):\\n%s\",\n                   exitStatus, exitCode, output);\n\n      return utils.fillUpTo([new Verdict(0, \"VERDICT_JE\")], task.getDatasetsCount());\n    }\n\n    // cache compiled checker\n    console.log(\"caching compiled checker\");\n    await env.checkerCache.addFromContent(packageFid,\n                                          await store.getFileBuffer(CHECKER_EXEC_PATH));\n  }\n\n  // compilation failed\n  if (compilationResult.code === 1) {\n    const dummy = new Isolate(env, null, compilationResult.log);\n    const exitStatus = dummy.getExitStatus();\n    const output = compilationResult.stderr;\n\n    if (exitStatus === IsolateConst.EXIT_TIMEOUT || exitStatus === IsolateConst.EXIT_TIMEOUT_WALL)\n      return utils.fillUpTo([new Verdict(0, \"VERDICT_CTE\")], task.getDatasetsCount());\n\n    return utils.fillUpTo([new Verdict(0, \"VERDICT_CE\", -1, output)], task.getDatasetsCount());\n  }\n\n  // now run solution against each of the datasets in ladder fashion\n  const verdicts = [];\n  for (const dataset of task.getDatasets()) {\n    // eslint-disable-next-line no-await-in-loop\n    const datasetVerdict = await testDataset(env, store, task, lang, dataset);\n    verdicts.push(datasetVerdict);\n\n    // if it was not accepted, break here (ladder effect)\n    if (datasetVerdict.verdict !== \"VERDICT_AC\")\n      break;\n  }\n\n  // push skip verdict to enforce ladder effect\n  verdicts.push(new Verdict(0, \"VERDICT_SKIP\"));\n  return utils.fillUpTo(verdicts, task.getDatasetsCount());\n}\n\n/**\n * Test solution against package test cases\n * @param env\n * @param pack\n * @param code\n * @param lang\n */\nasync function testPackage(env, packageFid, code, lang) {\n  const pack = env.cache.getFilePath(packageFid);\n  const store = new Storage();\n  await store.loadZip(pack);\n\n  const Loader = await loader.autoDetect(store);\n  if (Loader === null)\n    throw new Error(\"Package is not loadable\");\n\n  const task = await new Loader(store).load();\n\n  const datasets = task.getDatasets();\n  const verdicts = await testTask(env, packageFid, task, store, code, lang);\n\n  const res = {};\n  for (let i = 0; i < datasets.length; i++)\n    res[datasets[i].name] = verdicts[i];\n\n\n  return res;\n}\n\n// testing\nif (!module.parent && false) {\n  (async () => {\n    const env = new JudgeEnvironment();\n    const store = new Storage();\n    await store.loadZip(\"test/test_contest.zip\");\n\n    const judeLoader = new JudeLoader(store);\n    const task = await judeLoader.load();\n\n    /* eslint-disable */\n    const code = \"\\#include \\<bits/stdc++.h>\\nusing namespace std;\\nint main(){int x, y; cin >> x >> y; cout << x+y << ' ' << x*y << endl;}\";\n    const slow_code = \"\\#include \\<bits/stdc++.h>\\nusing namespace std;\\nint main(){for(int i = 0; i < 1000000/2; i++) cerr << 129312 << '\\\\n'; int x, y; cin >> x >> y; cout << x+y << ' ' << x*y << endl;}\";\n    const tle_code = \"\\#include \\<bits/stdc++.h>\\nusing namespace std;\\nint main(){for(int i = 0; i < 1000000000000LL; i++);}\";\n    const fake_mle_code = \"\\#include \\<bits/stdc++.h>\\nusing namespace std;\\nint main(){vector<int> v(1000000000);}\";\n    const slow2_code = \"\\#include \\<bits/stdc++.h>\\nusing namespace std;\\nint main(){int acc = 0; for(int i = 0; i < 1000000000; i++) acc += i; cout << acc << endl;}\";\n        // console.log(code)\n        // utils.logInspect(testTask(env, task, store, slow_code, \"CPP\"))\n\n    const java_wacode = `\n        public class Main {\n            public static void main(String[] args) {\n                System.out.println(\"Hello!\");\n            }\n        }`;\n\n    const java_mlecode = `\n        public class Main {\n            public static void main(String[] args) {\n                long a[] = new long[1024*1024*21];\n                for(int i = 0; i < 1024*1024*21; i++) a[i] = i;\n                System.out.println(\"Hello!\");\n            }\n        }`;\n    \n    const java_rtecode = `import java.util.*;\n \npublic class Main\n{\n\tpublic static void main (String[] args)\n\t{\n\t\tint n;\n\t\tScanner in = new Scanner(System.in);\n\t\tn = in.nextInt();\n\t\tif (n % 100 >= 65) \n\t\t\tn = 100 * (n / 100 + 1);\n\t\tif (n % 20 > 15) \n\t\t\tn = 20 * (n / 20 + 1);\n\t\tSystem.out.println((n / 100) * 100 + (n % 100 / 20) * 30 + 2 * (n % 20));\n\t}\n}`;\n\n    const crazy_code = `import java.io.OutputStream;\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.io.PrintWriter;\nimport java.util.StringTokenizer;\nimport java.io.IOException;\nimport java.io.BufferedReader;\nimport java.io.InputStreamReader;\nimport java.io.InputStream;\n\n/**\n * Built using CHelper plug-in\n * Actual solution is at the top\n */\npublic class Main {\n    public static void main(String[] args) {\n        TaskG solver = new TaskG();\n        solver.solve();\n    }\n\n    static class TaskG {\n        static final long MODULO = (long) (1e9 + 7);\n\n        public void solve() {\n        \tSystem.out.println(5);\n        }\n\n        private int gcd(int a, int b) {\n            while (b > 0) {\n                int t = a % b;\n                a = b;\n                b = t;\n            }\n            return a;\n        }\n    }\n}`;\n\n    const pycode = \"print '5'\";\n\n    utils.logInspect(await testTask(env, task, store, java_rtecode, \"Java\"));\n\n        //\n        // let env = new JudgeEnvironment()\n        // let store = new Storage()\n        // store.load(\"test_contest/\")\n        //\n        // let iso = new Isolate(env, store)\n        // iso.init()\n        //\n        // Compilation.CPP(iso, store, \"checker.cpp\", \"_/checker\")\n        // console.log(iso.getLog())\n        // Compilation.CPP(iso, store, \"sol.cpp\", \"_/sol\")\n        // console.log(iso.getLog())\n        //\n        // iso.cleanup()\n        //\n        // iso = new Isolate(env, store)\n        // iso.init()\n        //\n        // Evaluation.CPP(iso, store, \"_/sol\", \"tests/set1/3.in\")\n        //\n        // iso.createFileFromStorage(\"input\", \"tests/set1/3.in\")\n        // iso.createFileFromStorage(\"answer\", \"tests/set1/3.out\")\n        // iso.createFileFromStorage(\"checker\", \"_/checker\", true)\n        //\n        // console.log(evaluate(iso, store, [\n        //     \"./checker\", \"input\", \"output\", \"answer\"\n        // ], null, \"checker_output\", \"checker_error\"))\n        //\n        // console.log(iso.getLog())\n        // console.log(iso.getFileToString(\"checker_output\"))\n        //\n        // //sleep(10)\n        //\n        // iso.cleanup()\n  })();\n}\n\n/* eslint-enable */\nconst availableLanguages = {\n  CPP: \"C++ 14\",\n  C: \"C 11\",\n  Java: \"Java 8\",\n  Py2: \"Python 2\",\n  Py3: \"Python 3\"\n};\n\nmodule.exports = { testTask, testPackage, availableLanguages };\n\n\n\n// WEBPACK FOOTER //\n// ./judge/grader.js","module.exports = require(\"promise-reflect\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"promise-reflect\"\n// module id = 83\n// module chunks = 0","const VerdictConst = {\n  \"\": \"won't be judged\",\n  VERDICT_INQ: \"in queue\",\n  VERDICT_SKIP: \"skipped\",\n\n  VERDICT_WA: \"wrong answer\",\n  VERDICT_RTE: \"runtime error\",\n  VERDICT_MLE: \"memory limit exceeded\",\n  VERDICT_TLE: \"time limit exceeded\",\n  VERDICT_WTE: \"walltime limit exceeded\",\n  VERDICT_OLE: \"output limit exceeded\",\n\n  VERDICT_CE: \"compilation error\",\n  VERDICT_CTE: \"compilation timed out\",\n\n  VERDICT_FAIL: \"checker failed\",\n  VERDICT_CHTE: \"checker timed out\",\n\n  VERDICT_JE: \"judge crashed\",\n  VERDICT_UE: \"unknown error\",\n\n  VERDICT_AC: \"accepted\"\n};\n\nconst VerdictTag = {\n  \"\": \"white\",\n  VERDICT_INQ: \"light\",\n  VERDICT_SKIP: \"dark\",\n\n  VERDICT_WA: \"danger\",\n  VERDICT_RTE: \"danger\",\n  VERDICT_MLE: \"danger\",\n  VERDICT_TLE: \"danger\",\n  VERDICT_WTE: \"danger\",\n  VERDICT_OLE: \"danger\",\n\n  VERDICT_CE: \"warning\",\n  VERDICT_CTE: \"warning\",\n\n  VERDICT_FAIL: \"info\",\n  VERDICT_CHTE: \"info\",\n\n  VERDICT_JE: \"black\",\n  VERDICT_UE: \"black\",\n\n  VERDICT_AC: \"success\"\n};\n\nclass Verdict {\n  constructor(score, verdict, passed = -1, info = {}) {\n    this.score = score || 0;\n    this.verdict = verdict;\n    this.passed = passed;\n    this.info = {};\n    if (typeof info === \"string\")\n      Object.assign(this.info, { text: info });\n    else\n      Object.assign(this.info, info || {});\n  }\n\n  wasExecuted() {\n    return this.passed >= 0;\n  }\n\n  getTextInfo() {\n    return this.info.text || \"\";\n  }\n\n  getVerdictCode() {\n    return this.verdict;\n  }\n\n  getVerdictText() {\n    return VerdictConst.hasOwnProperty(this.verdict)\n      ? VerdictConst[this.verdict]\n      : this.verdict;\n  }\n\n  getScore() {\n    return this.score;\n  }\n\n  getPassed() {\n    return Math.max(0, this.passed);\n  }\n\n  toJSON() {\n    return {\n      score: this.score,\n      verdict: this.verdict,\n      passed: this.passed,\n      info: this.info\n    };\n  }\n\n  static fromJSON(json) {\n    return new Verdict(json.score || 0, json.verdict, json.passed || -1, json.info || {});\n  }\n}\n\nmodule.exports = {\n  Verdict,\n  VerdictConst,\n  VerdictTag\n};\n\n\n\n// WEBPACK FOOTER //\n// ./judge/verdict.js","/**\n * Created by rsalesc on 15/06/16.\n */\nconst Promise = require(\"bluebird\");\n\nconst fs = require(\"fs-extra\");\n\nconst path = require(\"path\");\nconst logger = require(\"./logger\");\nconst jenv = require(\"./environment\");\nconst utils = require(\"./utils\");\nconst { globAsync } = utils;\n\nconst Storage = require(\"./storage\").MemoryStorage;\nconst { JudgeConfig } = jenv;\nconst spawnDetachedPromise = require(\"child-process-promise\").spawn;\n\n/*\n*   spawnDetached async version (promisified)\n *\nfunction spawnDetachedAsync(command, args=[], options={}){\n    return new Promise((resolve, reject) => {\n        options.stdio = ['ignore']\n        options.detached = true;\n        let successfulExitCodes = (options && options.successfulExitCodes) || [0];\n\n        let proc = spawn(command, args, options)\n        proc.unref();\n\n        proc.on(\"close\", (code) => {\n            if(successfulExitCodes.indexOf(code) === -1) {\n                let commandStr = command + (args.length ? (' ' + args.join(' ')) : '');\n                let err = {\n                    code,\n                    message: '`' + commandStr + '` failed with code ' + code,\n                    toString(){\n                        return this.message\n                    }\n                }\n\n                reject(err)\n            } else {\n                resolve({code})\n            }\n        })\n\n        proc.on(\"error\", reject)\n    })\n}*/\n\n// debug\nfunction spawnDetachedAsync(command, args = [], options = {}) {\n  if (options.hasOwnProperty(\"stdio\")) {\n    options.capture = options.stdio;\n    delete options.stdio;\n  }\n  return spawnDetachedPromise(command, args, options);\n}\n\n/*\n* This is the base class for sandboxes\n* All sandboxes should be extended from this\n* Make sure it runs inside an async environment\n* @abstract\n */\nclass Sandbox {\n  /*\n    * @param {Storage} storage which will provide quick interaction (in-memory)\n    *           between host FS and sandbox FS\n    * @param {JudgeEnvironment} judge environment used by the sandbox\n     */\n  constructor(env, store) {\n    //if (new.target == Sandbox)\n    //  throw `Cannot instantiate abstract class Sandbox`;\n    this.cacher = store;\n    this.env = env;\n  }\n\n  setStorage(store) {\n    this.cacher = store;\n  }\n\n  setEnvironment(env) {\n    this.env = env;\n  }\n\n  getRootPath() {\n    throw \"Concrete sandboxes must implement this function\";\n  }\n\n  getRunningTime() {\n    throw \"Concrete sandboxes must implement this function\";\n  }\n\n  getMemoryUsage() {\n    throw \"Concrete sandboxes must implement this function\";\n  }\n\n  getExitCode() {\n    throw \"Concrete sandboxes must implement this function\";\n  }\n\n  /*\n    * @param {string} path in sandbox (relative to its bound directory)\n    * @returns {string} absolute path in host\n    **/\n  resolvePath(p) {\n    return path.join(this.getRootPath(), p);\n  }\n\n  _getMode(exec) {\n    if (exec === true)\n      return 0o777;\n    else if (exec === false)\n      return 0o664;\n    return exec;\n  }\n\n  /*\n    *   Open a new file in sandbox\n    *   @param {string} path in sandbox\n    *   @param {string} flags to fs.open\n    *   @param {boolean|integer} [exec=false] is the new file executable, or octal mode\n    *   @returns {number} file descriptor\n     */\n  async openFile(p, flags = \"wx+\", exec = false) {\n    const absPath = this.resolvePath(p);\n    try {\n      const fd = await fs.open(absPath, flags, this._getMode(exec));\n      return fd;\n    } catch (e) {\n      logger.error(\"Sandbox %s could not open file %s\", this.constructor.name, p);\n      throw e;\n    }\n  }\n\n  /*\n    * Create a new file in sandbox and close it\n    * @param {string} path in sandbox\n    * @param {boolean|integer} [exec=false] is the new file executable, or octal mode\n     */\n  async createFile(p, exec = false) {\n    const absPath = this.resolvePath(p);\n    try {\n      const fd = await fs.open(absPath, \"wx+\");\n      await fs.chmod(absPath, this._getMode(exec));\n      await fs.close(fd);\n    } catch (e) {\n      logger.error(\"Sandbox %s could not create file %s\", this.constructor.name, p);\n      throw e;\n    }\n  }\n\n  /*\n    * Same as {Sandbox#createFile}, but writes file from {FileCacher}\n    * @param {string} path in sandbox\n    * @param {string} path/ID in {FileCacher}\n    * @param {boolean|integer} [exec=false] is the new file executable, or octal mode\n     */\n  async createFileFromStorage(p, d, exec = false) {\n    const absPath = this.resolvePath(p);\n    try {\n      const buf = await this.cacher.getFileBuffer(d);\n      await fs.writeFile(absPath, buf, { flag: \"wx+\" });\n      await fs.chmod(absPath, this._getMode(exec));\n    } catch (e) {\n      logger.error(\"Sandbox %s could not create file from storage\", this.constructor.name);\n      throw e;\n    }\n  }\n\n  async createFileFromString(p, content, exec = false) {\n    const absPath = this.resolvePath(p);\n    try {\n      await fs.writeFile(absPath, content, { flag: \"wx+\" });\n      await fs.chmod(absPath, this._getMode(exec));\n    } catch (e) {\n      logger.error(\"Sandbox %s could not create file from storage\", this.constructor.name);\n      throw e;\n    }\n  }\n\n  /*\n    *   Get an opened file from sandbox\n    *   @param {string} path in sandbox\n    *   @returns {number} file descriptor\n     */\n  async getFile(p) {\n    try {\n      const absPath = this.resolvePath(p);\n      const fd = await fs.open(absPath, \"r\");\n      return fd;\n    } catch (e) {\n      logger.error(\"Sandbox %s could not retrieve file %s\",\n                   this.constructor.name, p);\n      throw e;\n    }\n  }\n\n  async getFileToString(p) {\n    try {\n      const absPath = this.resolvePath(p);\n      return await fs.readFile(absPath, \"utf8\");\n    } catch (e) {\n      if (e.code === \"ENOENT\")\n        return \"\";\n      logger.error(\"Sandbox %s could not retrieve file %s\",\n                   this.constructor.name, p);\n      throw e;\n    }\n  }\n\n  /*\n    *   Get file from sandbox and read it into {FileCacher} storage\n    *   @param {string} path in sandbox\n    *   @param {string} path/ID in {FileCacher} storage\n     */\n  async getFileToStorage(p, d) {\n    try {\n      const absPath = this.resolvePath(p);\n      await this.cacher.createFileFromContent(d, await fs.readFile(absPath));\n    } catch (e) {\n      logger.error(\"Sandbox %s could not retrieve file %s to storage\",\n                   this.constructor.name, p);\n    }\n  }\n\n  async globToStorage(pattern, fun) {\n    try {\n      const files = await globAsync(pattern, { cwd: this.getRootPath(), absolute: true });\n      await Promise.all(files.map(async (file) => {\n        this.cacher.createFileFromContent(fun(file), await fs.readFile(file));\n      }));\n    } catch (ex) {\n      console.log(ex);\n      logger.error(\"Sandbox could not save class files\");\n    }\n  }\n\n  async globFromStorage(pattern, fun) {\n    const matches = await this.cacher.glob(pattern);\n    await Promise.all(matches.map(async (match) => {\n      await this.createFileFromStorage(fun(match), match);\n    }));\n  }\n\n  async getFileStats(p) {\n    const res = await fs.stat(this.resolvePath(p));\n    return res;\n  }\n\n  async chmod(p, mode = 0o664) {\n    await fs.chmod(this.resolvePath(p), mode);\n  }\n\n  async pathExists(p) {\n    try {\n      await this.getFileStats(p);\n      return true;\n    } catch (e) {\n      return false;\n    }\n  }\n\n  async fileExists(p) {\n    try {\n      const res = await this.getFileStats(p);\n      return res.isFile();\n    } catch (e) {\n      console.log(e);\n      return false;\n    }\n  }\n\n  async dirExists(p) {\n    try {\n      const res = await this.getFileStats(p);\n      return res.isDirectory();\n    } catch (e) {\n      return false;\n    }\n  }\n\n  async removeDir(p) {\n    try {\n      await fs.rmdir(this.resolvePath(p));\n    } catch (e) {\n      if (e.code !== \"ENOENT\")\n        throw e;\n    }\n  }\n\n  async removeFile(p) {\n    try {\n      await fs.unlink(this.resolvePath(p));\n    } catch (e) {\n      if (e.code !== \"ENOENT\")\n        throw e;\n    }\n  }\n}\n\nconst IsolateConst = {\n  EXIT_SANDBOX_ERROR: \"sandbox error\",\n  EXIT_OK: \"ok\",\n  EXIT_SIGNAL: \"signal\",\n  EXIT_TIMEOUT: \"timeout\",\n  EXIT_TIMEOUT_WALL: \"wall timeout\",\n  EXIT_FILE_ACCESS: \"file access\",\n  EXIT_SYSCALL: \"syscall\",\n  EXIT_OUTPUT_LIMIT: \"output limit exceeded\",\n  EXIT_NONZERO_RETURN: \"nonzero return\"\n};\n\nclass Isolate extends Sandbox {\n  constructor(env, store, log = {}) {\n    super(env, store);\n    this.log = log;\n    this.path = null;\n    this.initialized = false;\n  }\n\n  getRootPath() {\n    if (!this.path)\n      throw \"sandbox was not init'd\";\n    return this.path;\n  }\n\n  getChdirPath(p) {\n    return path.join(this.innerDir, p);\n  }\n\n  setDefaultConfigs() {\n    this.cgroup = true;\n    this.chdir = this.innerDir;\n    this.dirs = [\n      { in: this.innerDir, out: this.path, opts: \"rw\" }\n    ];\n\n    this.preserveEnv = false;\n    this.inheritEnv = [];\n    this.setEnv = {};\n    this.fsize = null;\n    this.stdin = null;\n    this.stdout = null;\n    this.stderr = null;\n    this.stackSize = null;\n    this.memorySize = null;\n    this.maxProcesses = 1;\n    this.timelimit = null;\n    this.wallclockLimit = null;\n    this.extraTimelimit = null;\n    this.verbosity = 0;\n    this.bufferize = null;\n\n    this.cgMemorySize = null;\n    this.cgTiming = false;\n  }\n\n  async init() {\n    if (this.initialized) {\n      this.setDefaultConfigs();\n      await fs.emptyDir(this.path);\n      return;\n    }\n\n    this.boxId = this.env.getNextBoxId();\n    this.executable = JudgeConfig.ISOLATE_PATH;\n    this.execs = -1;\n\n    this.outerDir = await fs.mkdtemp(path.join(JudgeConfig.TEMP_DIR, \"iso-\"));\n    this.innerDir = \"/tmp\";\n\n    // have to use sum, absoluteness of tmp will mess things up\n    this.path = this.outerDir + this.innerDir;\n\n    // defaults to 0o777\n    await fs.mkdir(this.path);\n    await fs.chmod(this.path, 0o777);\n\n    logger.debug(\"Creating isolate sandbox %s (%d)\", this.path, this.boxId);\n    this.setDefaultConfigs();\n\n    const params = [];\n    if (this.cgroup)\n      params.push(\"--cg\");\n    params.push(`--box-id=${this.boxId}`);\n    params.push(\"--init\");\n\n    try {\n      await spawnDetachedAsync(this.executable, params, { stdio: [\"ignore\"]});\n      this.initialized = true;\n    } catch (e) {\n      logger.error(\"[Isolate] Sandbox could not be initialized\");\n      throw e;\n    }\n  }\n\n  getBoxFilePath(p) {\n    if (this.bufferize)\n      return this.resolvePath(p);\n    return this.getChdirPath(p);\n  }\n\n  getRunArgs() {\n    const res = [`--box-id=${this.boxId}`];\n    // remember to add meta parameter (for logging) before execing\n\n    if (this.bufferize)\n      res.push(`--bufferize=${this.bufferize}`);\n    if (this.chdir)\n      res.push(`--chdir=${this.chdir}`);\n    for (const dir of this.dirs) {\n      let s = dir.in;\n      if (dir.out)\n        s += `=${dir.out}`;\n      if (dir.opts)\n        s += `:${dir.opts}`;\n      res.push(`--dir=${s}`);\n    }\n    if (this.preserveEnv)\n      res.push(\"--full-env\");\n\n    for (const v of this.inheritEnv)\n      res.push(`--env=${v}`);\n    for (const key of Object.keys(this.setEnv))\n      res.push(`--env=${key}=${this.setEnv[key]}`);\n\n\n    if (this.fsize)\n      res.push(`--fsize=${this.fsize}`);\n    if (this.stdin)\n      res.push(`--stdin=${this.getChdirPath(this.stdin)}`);\n    if (this.stdout)\n      res.push(`--stdout=${this.getBoxFilePath(this.stdout)}`);\n    if (this.stderr)\n      res.push(`--stderr=${this.getBoxFilePath(this.stderr)}`);\n    if (this.stackSize)\n      res.push(`--stack=${this.stackSize}`);\n    if (this.memorySize)\n      res.push(`--mem=${this.memorySize}`);\n    if (this.maxProcesses)\n      res.push(`--processes=${this.maxProcesses}`);\n    else\n      res.push(\"--processes\");\n\n    if (this.timelimit)\n      res.push(`--time=${this.timelimit}`);\n    if (this.wallclockLimit)\n      res.push(`--wall-time=${this.wallclockLimit}`);\n    if (this.extraTimelimit)\n      res.push(`--extra-time=${this.extraTimelimit}`);\n\n    for (let i = 0; i < this.verbose; i++)\n      res.push(\"--verbose\");\n\n    if (this.cgroup)\n      res.push(\"--cg\");\n    if (this.cgMemorySize)\n      res.push(`--cg-mem=${this.cgMemorySize}`);\n    if (this.cgTiming)\n      res.push(\"--cg-timing\");\n\n    return res;\n  }\n\n  async getLog(ex) {\n    if (this.execs < 0)\n      throw \"No execution took place in this sandbox\";\n    const exec = ex || this.execs;\n    if (exec > this.execs)\n      throw \"This execution did not take place in this sandbox\";\n\n    if (this.log && this.log.exec === exec)\n      return this.log;\n\n    const fn = `run.log.${exec}`;\n    const res = {};\n\n    try {\n      const log = await this.getFileToString(fn);\n      for (const line of log.split(/[\\r?\\n]+/g)) {\n        const [key, value] = line.split(\":\", 2);\n        if (res.key)\n          res[key].push(value);\n        else\n          res[key] = [value];\n      }\n\n      this.log = res;\n      this.log.exec = exec;\n    } catch (e) {\n      logger.error(\"Error trying to read the log file %s\", this.resolvePath(fn));\n      throw e;\n    }\n\n    return this.log;\n  }\n\n  // seconds (float)\n  getRunningTime() {\n    if (this.log.hasOwnProperty(\"time\"))\n      return parseFloat(this.log.time[0]);\n    return null;\n  }\n\n  // in kilobytes (int)\n  getMemoryUsage() {\n    if (this.log.hasOwnProperty(\"cg-mem\"))\n      return parseInt(this.log[\"cg-mem\"][0], 10);\n    return null;\n  }\n\n  getWallTime() {\n    if (this.log.hasOwnProperty(\"time-wall\"))\n      return parseFloat(this.log[\"time-wall\"][0], 10);\n    return null;\n  }\n\n  getExitCode() {\n    if (this.log.hasOwnProperty(\"exitcode\"))\n      return parseInt(this.log.exitcode[0], 10);\n    return 0;\n  }\n\n  getKillingSignal() {\n    if (this.log.hasOwnProperty(\"exitsig\"))\n      return parseInt(this.log.exitsig[0], 10);\n    return 0;\n  }\n\n  getStatusList() {\n    if (this.log.hasOwnProperty(\"status\"))\n      return this.log.status;\n    return [];\n  }\n\n  static translateBoxExitCode(code) {\n    if (code === 2)\n      return false;\n    if (code === 1 || code === 0)\n      return true;\n    throw `Unknown sandbox exitcode (${code})`;\n  }\n\n  getExitStatus() {\n    const checkWall = (message) => {\n      for (const msg of message) {\n        if (msg.indexOf(\"wall\") !== -1)\n          return true;\n      }\n      return false;\n    };\n\n    const list = this.getStatusList();\n    if (list.indexOf(\"XX\") !== -1)\n      return IsolateConst.EXIT_SANDBOX_ERROR;\n    if (list.indexOf(\"FO\") !== -1)\n      return IsolateConst.EXIT_SYSCALL;\n    if (list.indexOf(\"FA\") !== -1)\n      return IsolateConst.EXIT_FILE_ACCESS;\n    if (list.indexOf(\"TO\") !== -1) {\n      if (this.log.hasOwnProperty(\"message\") && checkWall(this.log.message))\n        return IsolateConst.EXIT_TIMEOUT_WALL;\n      return IsolateConst.EXIT_TIMEOUT;\n    }\n    if (list.indexOf(\"SG\") !== -1)\n      return IsolateConst.EXIT_SIGNAL;\n    if (list.indexOf(\"OL\") !== -1)\n      return IsolateConst.EXIT_OUTPUT_LIMIT;\n\n    if (list.indexOf(\"RE\") !== -1)\n      return IsolateConst.NONZERO_RETURN;\n    return IsolateConst.EXIT_OK;\n  }\n\n  async executeBufferized(...args) {\n    const oldVal = this.bufferize;\n    try {\n      this.bufferize = JudgeConfig.OUTPUT_LIMIT;\n      const res = await this.execute(...args);\n      this.bufferize = oldVal;\n      return res;\n    } catch (e) {\n      this.bufferize = oldVal;\n      throw e;\n    }\n  }\n\n  async execute(comm, capture = [\"ignore\"], promise = false) {\n    this.execs += 1;\n    this.log = null;\n    let args = this.getRunArgs();\n    args.push(`--meta=${this.resolvePath(`run.log.${this.execs}`)}`);\n    args.push(\"--run\");\n    args.push(\"--\");\n\n    const command = Array.isArray(comm)\n      ? comm\n      : [comm];\n    args = args.concat(command);\n\n    if (promise)\n      return spawnDetachedAsync(this.executable, args, { stdio: capture });\n\n    let res = null;\n    try {\n      res = await spawnDetachedAsync(this.executable, args, { stdio: capture });\n    } catch (e) {\n      res = e;\n    }\n\n    const ret = {\n      code: res.code,\n      message: res.message\n    };\n    for (const cap of capture) {\n      if (res.hasOwnProperty(cap))\n        ret[cap] = res[cap].toString();\n    }\n    return ret;\n  }\n\n  async cleanup() {\n    logger.debug(\"Deleting Isolate sandbox %s (%d)\", this.path, this.boxId);\n    const args = [`--box-id=${this.boxId}`];\n    if (this.cgroup)\n      args.push(\"--cg\");\n    args.push(\"--cleanup\");\n\n    try {\n      if (this.initialized)\n        await spawnDetachedAsync(this.executable, args, { stdio: [\"ignore\"]});\n      await fs.remove(this.outerDir);\n    } catch (e) {\n      logger.error(\"Isolate sandbox %s (%d) could not be deleted\", this.path, this.boxId);\n      throw e;\n    }\n  }\n}\n\nclass IsolatePool {\n  constructor(size) {\n    this.size = size;\n    this.sandboxes = [];\n    this.ptr = 0;\n    for (let i = 0; i < size; i++)\n      this.sandboxes.push(new Isolate());\n  }\n\n  getNext(env, store, log = []) {\n    const sandbox = this.sandboxes[this.ptr];\n    this.ptr += 1;\n    this.ptr %= this.size;\n    sandbox.setEnvironment(env);\n    sandbox.setStorage(store);\n    sandbox.log = log;\n    return sandbox;\n  }\n\n  cleanup() {\n    for (const sandbox of this.sandboxes)\n      sandbox.cleanup();\n  }\n}\n\nif (!module.parent && false) {\n  // eslint-disable-next-line require-await\n  (async () => {\n    console.log(\"Testing with async...\");\n    const env = new jenv.JudgeEnvironment();\n    const store = new Storage();\n\n    const iso = new Isolate(env, store);\n    await store.load(\"test_contest/\");\n\n    await iso.init();\n\n    iso.dirs.push({ in: \"/etc\" });\n\n    iso.preserveEnv = true;\n    iso.maxProcesses = null;\n    iso.timelimit = 20;\n    iso.wallclockLimit = 30;\n    console.log(iso.getRunArgs());\n\n    await iso.createFileFromStorage(\"source.cpp\", \"checker.cpp\");\n\n    try {\n      console.log(await iso.execute([\"/usr/bin/g++\", \"source.cpp\", \"-static\",\n                                     \"-std=c++11\", \"-O2\", \"-lm\"], [\"stdout\", \"stderr\"]));\n\n      await iso.getFileToStorage(\"a.out\", \"_/a.out\");\n      await iso.getLog();\n      console.log(iso.log);\n    } catch (e) {\n      logger.error(\"Could not execute a.out\");\n      console.log(e);\n    }\n\n    await iso.cleanup();\n  })();\n}\n\nmodule.exports = {\n  Sandbox,\n  Isolate,\n  IsolateConst,\n  IsolatePool\n};\n\n\n\n// WEBPACK FOOTER //\n// ./judge/sandbox.js","module.exports = require(\"bluebird\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"bluebird\"\n// module id = 86\n// module chunks = 0","module.exports = require(\"tmp\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"tmp\"\n// module id = 87\n// module chunks = 0","module.exports = require(\"child-process-promise\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"child-process-promise\"\n// module id = 88\n// module chunks = 0","const process = require(\"process\");\n\nfunction getSeconds(tuple) {\n  return tuple[0] + (tuple[1] / 1e9);\n}\n\nclass Profiler {\n  constructor() {\n    this.start = {};\n    this.acc = {};\n  }\n\n  fire(task = \"default\") {\n    if (!this.acc.hasOwnProperty(task))\n      this.acc[task] = 0;\n    this.start[task] = process.hrtime();\n  }\n\n  reset(task = \"default\") {\n    this.acc[task] = 0;\n    this.start[task] = process.hrtime();\n  }\n\n  elapsed(task = \"default\") {\n    const started = this.start[task];\n    return this.acc[task] + (started\n        ? getSeconds(process.hrtime(started))\n        : 0);\n  }\n\n  stop(task = \"default\") {\n    this.acc[task] = this.elapsed(task);\n    this.start[task] = null;\n  }\n\n  dump(cb = console.log) {\n    for (const task of Object.keys(this.acc))\n      cb(`${task}: ${this.elapsed(task)}`);\n  }\n}\n\nmodule.exports = Profiler;\n\n\n\n// WEBPACK FOOTER //\n// ./judge/profiler.js","function noChecking(code) {\n  return code;\n}\n\nfunction javaChecking(code) {\n  const originalCode = ` ${code}`.slice(1);\n\n  const rePackage = /\\bpackage\\s+([^.;]+(?:\\.[^.;]+)*?);/gm;\n  const reClass = /\\bpublic\\s+(?:strictfp\\s+)?(?:(?:abstract|final)\\s+)?(?:strictfp\\s+)?class\\s+([_a-zA-Z$][_0-9a-zA-z$]*?)\\b/gm;\n  const reMain = /\\bpublic\\s+(?:strictfp\\s+)?(?:(?:abstract|final)\\s+)?(?:strictfp\\s+)?class\\s+Main\\b/gm;\n\n    // do not handle multichar escape sequences\n  const reString = /\"(?:\\\\[\\s\\S]|[^\"\\\\])*\"|'(?:\\\\[\\s\\S]|[^'\\\\])*'/gm;\n  const reComment = /\\/\\*[\\s\\S]*?\\*\\//gm;\n  const reInline = /\\/\\/.*?$/gm;\n  const reUnicode = /\\\\u([0-9a-fA-F]{4})/gm;\n\n  const aux = code.replace(reComment, \"\").replace(reString, \"\").replace(reInline, \"\")\n        .replace(reUnicode, \"\");\n  if (!reMain.test(aux))\n    throw new Error(\"your Java code should have a Main public class as an entry point\");\n  if (rePackage.test(aux))\n    throw new Error(\"you should not declare package in your Java code\");\n\n  return originalCode;\n}\n\nmodule.exports = {\n    CPP: noChecking,\n    C: noChecking,\n    Java: javaChecking,\n    Py2: noChecking,\n    Py3: noChecking\n};\n\n\n\n// WEBPACK FOOTER //\n// ./judge/precheck.js","const path = require(\"path\");\nconst mongoose = require(\"mongoose\");\nconst passport = require(\"passport\");\nconst auth2 = require(\"../auth2\");\n\nconst express = require(\"express\");\nconst router = express.Router();\n\nconst models = require(\"../models/\");\n\nconst {\n  Contest, Submission, Problem, User\n} = models;\n\n/* router.post('/login', (req, res, next) => {\n  passport.authenticate('custom', (err, user, info) => {\n    if(err) return next(err);\n    if(!user) return res.status(401).json({ error: \"unauthorized\" });\n    req.logIn(user, (err) => {\n      if(err) return next(err);\n      next();\n    });\n  })(req, res, next);\n}, (req, res, next) => {\n  req.session.save((err) => {\n    if(err){\n      return next(err);\n    }\n    res.sendStatus(200);\n  });\n});\n\nrouter.post('/logout', (req, res, next) => {\n  req.logout();\n  res.sendStatus(200);\n});\n*/\n\nrouter.post(\"/login\", auth2.authenticate(\"root\"));\nrouter.post(\"/logout\", auth2.dispose());\n\nfunction handleAdminPageError(err, req, res, next) {\n  res.status(err.status).json({ error: err.message });\n}\n\nrouter.use(auth2.possiblyAuth(\"root\"), (req, res, next) => {\n  if (!req.auth2.user)\n    return res.redirect(\"/\");\n  next();\n});\n\nrouter.get(\"/\", (req, res, next) => {\n  res.render(\"admin\");\n});\n\nmodule.exports = router;\n\n\n\n// WEBPACK FOOTER //\n// ./routes/admin.js"],"sourceRoot":""}