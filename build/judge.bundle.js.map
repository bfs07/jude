{"version":3,"sources":["webpack:///webpack/bootstrap 86a33975cc0745963c76","webpack:///external \"babel-runtime/core-js/get-iterator\"","webpack:///external \"path\"","webpack:///external \"babel-runtime/helpers/classCallCheck\"","webpack:///external \"babel-runtime/helpers/createClass\"","webpack:///external \"mongoose\"","webpack:///external \"babel-runtime/regenerator\"","webpack:///external \"babel-runtime/helpers/asyncToGenerator\"","webpack:///./judge/logger.js","webpack:///external \"fs-extra\"","webpack:///external \"babel-runtime/core-js/object/get-prototype-of\"","webpack:///external \"babel-runtime/helpers/possibleConstructorReturn\"","webpack:///external \"babel-runtime/helpers/inherits\"","webpack:///external \"babel-runtime/core-js/object/keys\"","webpack:///external \"babel-runtime/core-js/promise\"","webpack:///external \"babel-runtime/helpers/slicedToArray\"","webpack:///./judge/utils.js","webpack:///./judge/environment.js","webpack:///external \"fs\"","webpack:///external \"babel-runtime/helpers/extends\"","webpack:///(webpack)/buildin/module.js","webpack:///external \"process\"","webpack:///external \"babel-runtime/core-js/map\"","webpack:///external \"mongo-queue2\"","webpack:///./models/index.js","webpack:///./db.js","webpack:///./models/Problem.js","webpack:///external \"glob\"","webpack:///./judge/storage.js","webpack:///./judge/scoring.js","webpack:///./judge/watch.js","webpack:///external \"mongodb\"","webpack:///external \"winston\"","webpack:///external \"tmp\"","webpack:///./config.js","webpack:///./routes/policies.js","webpack:///external \"express-rate-limit\"","webpack:///./routes/common.js","webpack:///external \"jude-seaweedfs\"","webpack:///./models/Contest.js","webpack:///external \"babel-runtime/core-js/set\"","webpack:///external \"mongoose-deep-populate\"","webpack:///./models/User.js","webpack:///external \"sha256\"","webpack:///./models/Submission.js","webpack:///./models/Clarification.js","webpack:///./models/Printout.js","webpack:///./config.shared.js","webpack:///./judge/grader.js","webpack:///external \"promise-reflect\"","webpack:///./judge/verdict.js","webpack:///external \"babel-runtime/core-js/object/assign\"","webpack:///external \"babel-runtime/helpers/typeof\"","webpack:///external \"util\"","webpack:///./judge/sandbox.js","webpack:///external \"bluebird\"","webpack:///external \"yauzl\"","webpack:///external \"concat-stream\"","webpack:///external \"node-wildcard\"","webpack:///external \"es6-promisify\"","webpack:///external \"streamifier\"","webpack:///external \"child-process-promise\"","webpack:///./judge/loader.js","webpack:///./judge/task.js","webpack:///external \"deepcopy\"","webpack:///external \"yamljs\"","webpack:///./judge/profiler.js"],"names":["winston","require","process","logger","Logger","level","env","LOG_LEVEL","transports","Console","VERBOSE","File","name","filename","__dirname","module","exports","p","fs","stat","exists","res","isFile","fileExists","statAsync","isDirectory","dirExists","pattern","opts","resolve","reject","glob","err","files","globAsync","args","mkdtemp","result","path","util","inspect","logInspect","console","log","fillUpTo","arr","n","Array","length","undefined","pop","el","push","destroy","obj","prop","property","normalizePath","normalizedPath","normalize","slice","fse","tmp","setGracefulCleanup","MongoQueue2","JudgeConfig","FileCacher","size","dirSync","prefix","unsafeCleanup","has","best","key","value","idx","Math","random","getFilePath","removeSync","delete","ex","popLessFrequent","nv","max","get","set","cb","writeStream","createWriteStream","join","on","ensureSpace","ping","d","copySync","content","writeFile","flag","JudgeEnvironment","db","seaweed","sandboxes","nextSandboxId","cache","checkerCache","ack","queue","error","MAX_SANDBOXES","SANDBOX_OFFSET","mongoose","Contest","User","Submission","Problem","Clarification","Printout","weed","mongo_host","MONGO_HOST","weed_host","WEED_HOST","uri","global","createConnection","mods","judeQueue","weedClient","server","port","Schema","models","model","VisibilitySchema","contest","type","Types","ObjectId","ref","_id","ProblemSchema","code","String","minlength","maxlength","match","required","statementFid","fid","attr","Mixed","visibility","timestamps","index","unique","pre","next","remove","problem","contestQuery","problems","$elemMatch","find","contests","filter","equals","save","yauzl","concatStream","utils","wildcard","promisify","streamifier","dealWithEntry","zipFile","entry","openReadStream","stream","readEntry","concat","buffer","fileName","err2","pipe","loadZipAsync","absPath","open","lazyEntries","toWait","test","once","close","all","resWait","Storage","constructor","charAt","getFileBuffer","sort","RealStorage","abs","readFile","createReadStream","MemoryStorage","data","lstat","cwd","nodir","map","file","promises","resPath","createFileFromContent","norm","Buffer","def","hasOwnProperty","toString","fn","parent","store","load","getFileString","submissionComparator","a","b","timeInContest","Date","time","getTime","Scoring","task","_task","_opts","defaults","Error","verdicts","submissions","toSkip","skipped","verdict","indexOf","evalContest","s","hasSkipped","tk","evals","ProductScoring","score","weight","affect","fails","penalty","parseInt","submission","evaluation","eval","getWeight","reduce","old","cur","SubtaskSumScoring","getDatasetFromName","percentage","bestIndex","bestScore","i","SubtaskMaxScoring","maxTime","IcpcScoring","_Scoring","SubtaskScoring","clean","watch","sleepAsync","POLLING_RATE","startWatching","mongodb","environment","grader","ms","setTimeout","msg","VISIBILITY_WINDOW","req","payload","ackById","ObjectID","id","tries","MAX_TRIES","processMessage","testPackage","lang","findById","subid","exec","sub","err3","debug","addFromStream","read","UserThrottlingPolicy","SharedConfig","EPS","MAX_SIMUL_TESTS","COMPILATION_TL","CHECKING_TL","CHECKING_ML","CHECKING_WTL","WT_MULTIPLIER","OUTPUT_LIMIT","TEMP_DIR","ISOLATE_PATH","BOUND_ML","SiteConfig","throttling","windowMs","message","clarifications","printouts","limiter","isAdmin","THROTTLE_CODE","sanitize","handler","status","send","ThrottlingPolicy","sequenceOfOpts","commonOpts","isArray","opt","constraints","x","middlewares","keyGenerator","auth2","user","ip","skip","skipFailedRequests","getUserContest","roles","deepPopulate","ContestProblem","letter","color","default","scoringOpts","ContestSchema","start_time","end_time","scoring","validate","validator","v","letters","val","ids","hidden","Boolean","upseeing","blind","Number","freeze","unfreeze","plugin","y","xd","yd","methods","hasStarted","now","hasEnded","isRunning","getTimeInContest","getDurationInContest","diff","ceil","getRemainingInContest","isFrozen","isBlind","sha256","UserSchema","handle","description","password","email","unofficial","disabled","role","weights","isModified","matchPasswords","candidate","_creator","DEFAULT_VERDICT","info","passed","SubmissionSchema","language","codeHash","datasets","CommentSchema","text","ClarificationSchema","broadcast","comments","PrintoutSchema","lines","done","SOURCE_LIMIT","iso","command","input","output","stdin","stdout","stderr","execute","evaluate","sol","SOURCE_PATH","solExec","SOURCE_EXEC_PATH","Isolate","init","Compilation","getLog","cleanup","compilationStepAsync","dataset","testcase","in","timelimit","getTimelimit","memorylimit","getMemorylimit","evaluationResult","checkingResult","execTime","exitWith","execLog","Evaluation","translateBoxExitCode","Verdict","dummy","getRunningTime","exitStatus","getExitStatus","exitCode","getExitCode","IsolateConst","EXIT_TIMEOUT","EXIT_TIMEOUT_WALL","EXIT_OUTPUT_LIMIT","createFileFromStorage","out","Checking","getCheckerLanguage","CHECKER_EXEC_PATH","testCaseAsync","testcases","totalTime","wallTime","cases","boxes","j","promiseReflect","pingCurrent","then","catch","caseResult","getWallTime","box","testDataset","packageFid","compilationSteps","checkerPath","getChecker","compilationResult","checkerCompilationResult","getDatasetsCount","addFromContent","getDatasets","datasetVerdict","testTask","pack","loadZip","loader","autoDetect","Loader","sandbox","Profiler","JudeLoader","policyPath","javaExecutorPath","CPP","execPath","wtlimit","wallclockLimit","memorySize","removeFile","Py2","setEnv","HOME","dirs","Py3","Java","oldProc","maxProcesses","oldEnv","oldCgTiming","cgTiming","oldCgMemory","cgMemorySize","oldCg","cgroup","MALLOC_ARENA_MAX","globFromStorage","basename","C","answer","checkerInput","checkerOutput","checkerError","getFileToString","sourceFile","preserveEnv","oldTL","oldWTL","getFileToStorage","globToStorage","CHECKER_PATH","judeLoader","slow_code","tle_code","fake_mle_code","slow2_code","java_wacode","java_mlecode","java_rtecode","crazy_code","pycode","availableLanguages","VerdictConst","VERDICT_INQ","VERDICT_SKIP","VERDICT_WA","VERDICT_RTE","VERDICT_MLE","VERDICT_TLE","VERDICT_WTE","VERDICT_OLE","VERDICT_CE","VERDICT_CTE","VERDICT_FAIL","VERDICT_CHTE","VERDICT_JE","VERDICT_UE","VERDICT_AC","VerdictTag","VerdictGhost","json","Promise","jenv","spawnDetachedPromise","spawn","spawnDetachedAsync","options","capture","stdio","Sandbox","cacher","getRootPath","flags","resolvePath","_getMode","fd","chmod","buf","fun","absolute","matches","mode","getFileStats","rmdir","unlink","EXIT_SANDBOX_ERROR","EXIT_OK","EXIT_SIGNAL","EXIT_FILE_ACCESS","EXIT_SYSCALL","EXIT_NONZERO_RETURN","initialized","innerDir","chdir","inheritEnv","fsize","stackSize","extraTimelimit","verbosity","bufferize","setDefaultConfigs","emptyDir","boxId","getNextBoxId","executable","execs","outerDir","mkdir","params","getChdirPath","dir","getBoxFilePath","verbose","split","line","parseFloat","exitcode","exitsig","checkWall","list","getStatusList","NONZERO_RETURN","oldVal","comm","promise","getRunArgs","ret","cap","IsolatePool","ptr","setEnvironment","setStorage","LOADERS","_","isLoadable","YAML","JUDE_FN","datasetPath","testsPath","inputs","replace","isReadable","percentageSum","getTestcases","checkerParams","cfg","lims","limits","checks","checker","multiplier","timeMultiplier","ratio","timeApproximation","parseDatasets","author","memory","source","toUpperCase","statement","blockedLanguages","Task","parse","getTask","deepcopy","getScoringClass","wd","e","getSeconds","tuple","start","acc","hrtime","started","elapsed"],"mappings":"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","file":"judge.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 29);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 86a33975cc0745963c76","module.exports = require(\"babel-runtime/core-js/get-iterator\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"babel-runtime/core-js/get-iterator\"\n// module id = 0\n// module chunks = 0","module.exports = require(\"path\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"path\"\n// module id = 1\n// module chunks = 0","module.exports = require(\"babel-runtime/helpers/classCallCheck\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"babel-runtime/helpers/classCallCheck\"\n// module id = 2\n// module chunks = 0","module.exports = require(\"babel-runtime/helpers/createClass\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"babel-runtime/helpers/createClass\"\n// module id = 3\n// module chunks = 0","module.exports = require(\"mongoose\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"mongoose\"\n// module id = 4\n// module chunks = 0","module.exports = require(\"babel-runtime/regenerator\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"babel-runtime/regenerator\"\n// module id = 5\n// module chunks = 0","module.exports = require(\"babel-runtime/helpers/asyncToGenerator\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"babel-runtime/helpers/asyncToGenerator\"\n// module id = 6\n// module chunks = 0","/**\n * Created by rsalesc on 14/06/16.\n */\nconst winston = require(\"winston\");\nconst process = require(\"process\");\n\nconst logger = new winston.Logger({\n    level: process.env.LOG_LEVEL || \"info\",\n    transports: [\n        new winston.transports.Console({\n            // eslint-disable-next-line no-constant-condition\n            level: process.env.VERBOSE || true\n                ? \"debug\"\n                : \"warn\"\n            // handleExceptions: true\n        }),\n        new winston.transports.File({\n            name: \"info-file\",\n            level: \"info\",\n            filename: `${__dirname}/../logs/info.log`\n        }),\n        new winston.transports.File({\n            name: \"error-file\",\n            level: \"warn\",\n            filename: `${__dirname}/../logs/error.log`\n            // handleExceptions: true, json: true\n        })\n    ]\n});\n\nmodule.exports = logger\n;\n\n\n\n// WEBPACK FOOTER //\n// ./judge/logger.js","module.exports = require(\"fs-extra\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"fs-extra\"\n// module id = 8\n// module chunks = 0","module.exports = require(\"babel-runtime/core-js/object/get-prototype-of\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"babel-runtime/core-js/object/get-prototype-of\"\n// module id = 9\n// module chunks = 0","module.exports = require(\"babel-runtime/helpers/possibleConstructorReturn\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"babel-runtime/helpers/possibleConstructorReturn\"\n// module id = 10\n// module chunks = 0","module.exports = require(\"babel-runtime/helpers/inherits\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"babel-runtime/helpers/inherits\"\n// module id = 11\n// module chunks = 0","module.exports = require(\"babel-runtime/core-js/object/keys\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"babel-runtime/core-js/object/keys\"\n// module id = 12\n// module chunks = 0","module.exports = require(\"babel-runtime/core-js/promise\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"babel-runtime/core-js/promise\"\n// module id = 13\n// module chunks = 0","module.exports = require(\"babel-runtime/helpers/slicedToArray\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"babel-runtime/helpers/slicedToArray\"\n// module id = 14\n// module chunks = 0","/**\n * Created by rsalesc on 14/06/16.\n */\n\nconst path = require(\"path\");\nconst fs = require(\"fs-extra\");\nconst util = require(\"util\");\nconst glob = require(\"glob\");\n\nasync function exists(p) {\n  try {\n    await fs.stat(p);\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nasync function fileExists(p) {\n  try {\n    const res = await fs.stat(p);\n    return res.isFile();\n  } catch (e) {\n    return false;\n  }\n}\n\nasync function dirExists(p) {\n  try {\n    const res = await fs.statAsync(p);\n    return res.isDirectory();\n  } catch (e) {\n    return false;\n  }\n}\n\nfunction inspect(p) {\n  return util.inspect(p, false, null);\n}\n\nfunction logInspect(p) {\n  return console.log(inspect(p));\n}\n\nfunction fillUpTo(arr, n = 0) {\n  if (n === 0)\n    return [];\n  if (!(arr instanceof Array) || arr.length === 0)\n    arr = [undefined];\n\n  while (arr.length > n)\n    arr.pop();\n  while (arr.length < n) {\n    const el = arr.pop();\n    arr.push(el);\n    arr.push(el);\n  }\n\n  return arr;\n}\n\nfunction destroy(obj) {\n  for (const prop of Object.keys(obj)) {\n    const property = obj[prop];\n    if (property != null && typeof property === \"object\")\n      destroy(property);\n    else\n      obj[prop] = null;\n  }\n}\n\nfunction normalizePath(p) {\n  const normalizedPath = path.normalize(p);\n  if (normalizedPath[-1] === \"/\")\n    return normalizedPath.slice(0, -1);\n  return normalizedPath;\n}\n\n// eslint-disable-next-line require-await\nasync function globAsync(pattern, opts) {\n  return new Promise((resolve, reject) => {\n    glob(pattern, opts, (err, files) => {\n      if (err)\n        return reject(err);\n      return resolve(files);\n    });\n  });\n}\n\nasync function mkdtemp(...args) {\n  return new Promise((resolve, reject) => fs.mkdtemp(...args, (err, result) => {\n    if (err)\n      return reject(err);\n    return resolve(result);\n  }));\n}\n\nmodule.exports = {\n  exists,\n  fileExists,\n  dirExists,\n  inspect,\n  logInspect,\n  fillUpTo,\n  destroy,\n  globAsync,\n  mkdtemp\n};\n\n\n\n// WEBPACK FOOTER //\n// ./judge/utils.js","/**\n * Created by rsalesc on 15/06/16.\n */\n\nconst fs = require(\"fs\");\nconst fse = require(\"fs-extra\");\nconst tmp = require(\"tmp\");\ntmp.setGracefulCleanup();\n\nconst path = require(\"path\");\n\nconst MongoQueue2 = require(\"mongo-queue2\");\n\nconst { JudgeConfig } = require(\"~/config\");\n\nclass FileCacher {\n  constructor(size = 20) {\n    this.path = tmp.dirSync({ prefix: \"judecache-\", unsafeCleanup: true }).name;\n    this.has = new Map();\n    this.size = size;\n  }\n\n  popLessFrequent() {\n    let best = 1e9;\n    let res = [];\n    for (const [key, value] of this.has) {\n      if (value < best)\n        res = [];\n      if (value <= best) {\n        best = value;\n        res.push(key);\n      }\n    }\n\n    try {\n      if (res.length > 0) {\n        const idx = Math.random() * res.length | 0;\n        const p = this.getFilePath(res[idx]);\n        fs.removeSync(p);\n        this.has.delete(res[idx]);\n        return true;\n      }\n      return false;\n    } catch (ex) {\n      return false;\n    }\n  }\n\n  ensureSpace() {\n    while (this.has.size >= this.size) {\n      if (!this.popLessFrequent())\n        break;\n    }\n  }\n\n  ping(p) {\n    const nv = Math.max(this.has.get(p) || 0, 0) + 1;\n    for (const [key, value] of this.has)\n      this.has.set(key, value - 1);\n\n    this.has.set(p, nv);\n  }\n\n  addFromStream(p, cb) {\n    const writeStream = fs.createWriteStream(path.join(this.path, p));\n    writeStream.on(\"finish\", () => {\n      this.ensureSpace();\n      this.ping(p);\n      if (cb)\n        cb(null);\n    });\n\n    writeStream.on(\"error\", (err) => {\n      if (cb)\n        cb(null);\n    });\n\n    return writeStream;\n  }\n\n  async addFromFile(p, d) {\n    await fse.copySync(d, this.getFilePath(p));\n    this.ensureSpace();\n    this.ping(p);\n  }\n\n  async addFromContent(p, content) {\n    await fse.writeFile(this.getFilePath(p), content, { flag: \"wx+\" });\n    this.ensureSpace();\n    this.ping(p);\n  }\n\n  exists(p) {\n    return this.has.has(p);\n  }\n\n  getFilePath(p) {\n    return path.resolve(this.path, p);\n  }\n}\n\nclass JudgeEnvironment {\n  constructor(db, seaweed) {\n    this.sandboxes = [];\n    this.nextSandboxId = 0;\n    this.db = db;\n    this.cache = new FileCacher();\n    this.checkerCache = new FileCacher();\n    this.ack = null;\n\n    this.seaweed = seaweed;\n    if (db)\n      this.queue = new MongoQueue2(db, \"jude-queue2\");\n  }\n\n  async pingCurrent() {\n    if (!this.ack)\n      return null;\n    \n    try {\n      await this.queue.ping(this.ack);\n      console.log(`pinged ${this.ack}`);\n    } catch (ex) {\n      console.error(`couldnt ack ${this.ack}`);\n    }\n\n    return null;\n  }\n\n  getNextBoxId() {\n    const res = this.nextSandboxId++;\n    this.nextSandboxId %= JudgeConfig.MAX_SANDBOXES;\n    return res % JudgeConfig.MAX_SANDBOXES\n      + JudgeConfig.SANDBOX_OFFSET * JudgeConfig.MAX_SANDBOXES;\n  }\n}\n\nmodule.exports = {\n  JudgeEnvironment,\n  JudgeConfig\n};\n\n\n\n// WEBPACK FOOTER //\n// ./judge/environment.js","module.exports = require(\"fs\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"fs\"\n// module id = 17\n// module chunks = 0","module.exports = require(\"babel-runtime/helpers/extends\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"babel-runtime/helpers/extends\"\n// module id = 18\n// module chunks = 0","module.exports = function(module) {\r\n\tif(!module.webpackPolyfill) {\r\n\t\tmodule.deprecate = function() {};\r\n\t\tmodule.paths = [];\r\n\t\t// module.parent = undefined by default\r\n\t\tif(!module.children) module.children = [];\r\n\t\tObject.defineProperty(module, \"loaded\", {\r\n\t\t\tenumerable: true,\r\n\t\t\tget: function() {\r\n\t\t\t\treturn module.l;\r\n\t\t\t}\r\n\t\t});\r\n\t\tObject.defineProperty(module, \"id\", {\r\n\t\t\tenumerable: true,\r\n\t\t\tget: function() {\r\n\t\t\t\treturn module.i;\r\n\t\t\t}\r\n\t\t});\r\n\t\tmodule.webpackPolyfill = 1;\r\n\t}\r\n\treturn module;\r\n};\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// (webpack)/buildin/module.js\n// module id = 19\n// module chunks = 0","module.exports = require(\"process\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"process\"\n// module id = 20\n// module chunks = 0","module.exports = require(\"babel-runtime/core-js/map\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"babel-runtime/core-js/map\"\n// module id = 21\n// module chunks = 0","module.exports = require(\"mongo-queue2\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"mongo-queue2\"\n// module id = 22\n// module chunks = 0","/* eslint-disable */\nlet path = require(\"path\"),\n  fs = require(\"fs\"),\n  mongoose = require(\"mongoose\");\n// files = fs.readdirSync(__dirname);\n\nrequire(\"../db\");\n\n/* files.forEach(function(file) {\n    var name = path.basename(file, '.js');\n    if (name === 'index')\n        return;\n\n    var mod = require('./' + name);\n    module.exports[name] = mod();\n});*/\n\nmodule.exports = {\n  Contest: require(\"./Contest\")(),\n  User: require(\"./User\")(),\n  Submission: require(\"./Submission\")(),\n  Problem: require(\"./Problem\")(),\n  Clarification: require(\"./Clarification\")(),\n  Printout: require(\"./Printout\")()\n};\n\n\n\n// WEBPACK FOOTER //\n// ./models/index.js","var mongoose = require('mongoose')\nconst MongoQueue2 = require(\"mongo-queue2\");\nconst weed = require('jude-seaweedfs');\n\n// mongodb setup\n\nlet mongo_host = process.env.MONGO_HOST || 'localhost';\nlet weed_host = process.env.WEED_HOST || 'localhost';\n\nvar uri = 'mongodb://'+mongo_host+'/jude-dev';\nif(!global.db) {\n  global.db = mongoose.createConnection(uri);\n  global.db.mods = {};\n  global.judeQueue = new MongoQueue2(db, \"jude-queue2\");\n  global.weedClient     = new weed({\n      server:     weed_host,\n      port:       9333\n  });\n}\n\nmodule.exports = global.db;\n\n\n// WEBPACK FOOTER //\n// ./db.js","/**\n * Created by rsalesc on 15/07/16.\n */\n\nconst mongoose = require(\"mongoose\");\nconst { Schema } = mongoose;\n\n// TODO: add creation time (with a plugin)\nmodule.exports = () => {\n  if (db.models.Problem)\n    return db.model(\"Problem\");\n\n  const VisibilitySchema = new Schema({\n    contest: { type: Schema.Types.ObjectId, ref: \"Contest\" }\n  }, { _id: false });\n\n  const ProblemSchema = new Schema({\n    code: {\n      type: String,\n      minlength: 4,\n      maxlength: 24,\n      match: /[a-zA-Z][a-zA-Z0-9-]*/,\n      required: true\n    },\n    name: {\n      type: String,\n      minlength: 4,\n      maxlength: 64,\n      required: true\n    },\n    statementFid: String,\n    fid: String,\n    attr: Schema.Types.Mixed,\n    visibility: [VisibilitySchema]\n  }, { timestamps: true });\n\n  ProblemSchema.index({ code: 1 }, { unique: 1 });\n  ProblemSchema.index({ name: 1 });\n  ProblemSchema.index({ code: \"text\", name: \"text\" });\n\n  ProblemSchema.pre(\"remove\", function (next) {\n    db.model(\"Submission\").remove({ problem: this._id }, (err) => {\n      if (err)\n        console.error(err);\n    });\n    const contestQuery = {\n      problems: {\n        $elemMatch: {\n          problem: this._id\n        }\n      }\n    };\n\n    db.model(\"Contest\").find(contestQuery, (err, contests) => {\n      if (err)\n        return console.error(err);\n\n      for (const contest of contests) {\n        contest.problems\n                    = contest.problems.filter(problem => !this._id.equals(problem.problem));\n        contest.save((err) => {\n          if (err)\n            console.error(err);\n        });\n      }\n    });\n    next();\n  });\n\n  return db.model(\"Problem\", ProblemSchema);\n};\n\n\n\n// WEBPACK FOOTER //\n// ./models/Problem.js","module.exports = require(\"glob\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"glob\"\n// module id = 26\n// module chunks = 0","/**\n * Created by rsalesc on 15/06/16.\n */\n\nconst yauzl = require(\"yauzl\");\nconst concatStream = require(\"concat-stream\");\nconst utils = require(\"./utils\");\nconst wildcard = require(\"node-wildcard\");\nconst path = require(\"path\");\nconst logger = require(\"./logger\");\nconst fs = require(\"fs-extra\");\nconst promisify = require(\"es6-promisify\");\nconst glob = promisify(require(\"glob\").glob);\nconst streamifier = require(\"streamifier\");\n\n/* Helper Functions for storage */\nfunction dealWithEntry(zipFile, entry) {\n  return new Promise((resolve, reject) => {\n    zipFile.openReadStream(entry, (err, stream) => {\n      if (err) {\n        zipFile.readEntry();\n        return reject(err);\n      }\n\n      const concat = concatStream((buffer) => {\n        zipFile.readEntry();\n        return resolve({ path: entry.fileName, buffer });\n      });\n\n      stream.on(\"error\", (err2) => {\n        zipFile.readEntry();\n        return reject(err2);\n      });\n\n      return stream.pipe(concat);\n    });\n  });\n}\n\nfunction loadZipAsync(p) {\n  const absPath = path.resolve(p);\n  return new Promise((resolve, reject) => {\n    yauzl.open(absPath, { lazyEntries: true },\n               (err, zipFile) => {\n                 if (err)\n                   return reject(err);\n                 const toWait = [];\n                 zipFile.readEntry();\n\n                 // process entries\n                 zipFile.on(\"entry\", (entry) => {\n                   if (/\\/$/.test(entry.fileName))\n                     return zipFile.readEntry();\n\n                   return toWait.push(dealWithEntry(zipFile, entry));\n                 });\n\n                 zipFile.once(\"end\", async () => {\n                   zipFile.close();\n                   // resolve or reject result\n                   try {\n                     const resWait = await Promise.all(toWait);\n                     resolve(resWait);\n                   } catch (ex) {\n                     reject(ex);\n                   }\n                 });\n\n                 return null;\n               });\n  });\n}\n\n/**\n*   This is the base class for Storage\n*   Make sure it runs inside an async environment\n*   @abstract\n */\nclass Storage {\n  constructor() {\n    if (this.constructor.name === Storage.name)\n      throw `Cannot instantiate abstract class ${this.constructor.name}`;\n  }\n\n  /**\n  *   Load a directory/file into the storage\n  *   @param {string} path to the directory/file\n      */\n  // eslint-disable-next-line no-unused-vars\n  async load(p) {\n    throw `Function not implemented in ${this.constructor.name}`;\n  }\n\n  /**\n   * Relative path to be normalized\n   * @param p to be normalized\n   * @returns {string} normalized path\n   */\n  // eslint-disable-next-line no-unused-vars\n  normalizePath(p) {\n    return p.length === 0 || p.charAt(0) !== \"/\"\n      ? `/${p}`\n      : p;\n  }\n\n  /**\n   *  Load a ZIP file into the storage\n   *  @param {string} path to the zip file\n   */\n  // eslint-disable-next-line no-unused-vars\n  async loadZip(p) {\n    throw `Function not implemented in ${this.constructor.name}`;\n  }\n\n  /**\n  *   Create a file in the storage from a provided buffer/string\n  *   @param {string} path/ID of the new file in the Storage\n  *   @param {buffer|string} content of the new file\n    */\n  // eslint-disable-next-line no-unused-vars\n  async createFileFromContent(p, content) {\n    throw `Function not implemented in ${this.constructor.name}`;\n  }\n\n  /**\n  *   Get buffer from a file in Storage\n  *   @param {string} path/ID to the file in storage\n  *   @returns {buffer} buffer from the file\n    */\n  // eslint-disable-next-line no-unused-vars\n  async getFileBuffer(p) {\n    throw `Function not implemented in ${this.constructor.name}`;\n  }\n\n  /**\n  *   Get string from a file in storage\n  *   @param {string} path/ID to the file in storage\n  *   @returns {string} string from the file\n    */\n  // eslint-disable-next-line no-unused-vars\n  async getFileString(p) {\n    throw `Function not implemented in ${this.constructor.name}`;\n  }\n\n  /**\n   * Get readable stream from a file in storage\n   * @param {string} path/ID to the file in storage\n   * @returns {string} readable stream to the file\n   * */\n  // eslint-disable-next-line no-unused-vars\n  async getFileStream(p) {\n    throw `Function not implemented in ${this.constructor.name}`;\n  }\n\n  /**\n   *  Check if file is readable\n   */\n  async isReadable(p) {\n    try {\n      await this.getFileBuffer(p);\n      return true;\n    } catch (ex) {\n      return false;\n    }\n  }\n\n  /**\n     * Get file names that match the given glob pattern\n     * @param {string} glob pattern\n     * @return {string[]} file names that match the given glob pattern\n     */\n  // eslint-disable-next-line no-unused-vars\n  async glob(p, sort = false) {\n    throw `Function not implemented in ${this.constructor.name}`;\n  }\n\n  /**\n     *  Dispose any resource cached in-memory by the storage\n     *  (the Storage object should be unusable after that)\n     */\n  // eslint-disable-next-line no-unused-vars\n  async dispose(p) {\n    throw `Function not implemented in ${this.constructor.name}`;\n  }\n}\n\nclass RealStorage extends Storage {\n  // WARNING: class created only for testing purposes.\n  // Non-persistent Storage should be used (in-memory, temporary dir, etc)\n  // TODO: every function should check if dir exist and create it if it doesnt\n  constructor() {\n    super();\n    this.path = \"/\";\n  }\n\n  // eslint-disable-next-line require-await\n  async load(p) {\n    this.path = path.resolve(p);\n  }\n\n  async createFileFromContent(p, content) {\n    const abs = path.resolve(this.path, p);\n    try {\n      await fs.writeFile(abs, content);\n    } catch (e) {\n      logger.error(\"[%s] File %s could not be created\", this.constructor.name, p);\n      throw e;\n    }\n  }\n\n  async getFileBuffer(p) {\n    const abs = path.resolve(this.path, p);\n    try {\n      const res = await fs.readFile(abs);\n      return res;\n    } catch (e) {\n      logger.error(\"[%s] File %s could not be retrieved\", this.constructor.name, p);\n      throw e;\n    }\n  }\n\n  async getFileString(p) {\n    const abs = path.resolve(this.path, p);\n    try {\n      const res = await fs.readFile(abs, \"utf8\");\n      return res;\n    } catch (e) {\n      logger.error(\"[%s] File %s could not be retrieved\", this.constructor.name, p);\n      throw e;\n    }\n  }\n\n  async getFileStream(p) {\n    return fs.createReadStream(p);\n  }\n}\n\nclass MemoryStorage extends Storage {\n  constructor() {\n    super();\n    this.data = {};\n  }\n\n  async load(p) {\n    const absPath = path.resolve(p);\n    const stat = await fs.lstat(absPath);\n    if (stat.isDirectory()) {\n      const res = await glob(\"**/*\", { cwd: absPath, nodir: true });\n\n      await Promise.all(res.map(async (file) => {\n        this.data[this.normalizePath(file)] = await fs.readFile(path.join(absPath, file));\n      }));\n    } else\n      this.data[this.normalizePath(absPath)] = await fs.readFile(absPath);\n  }\n\n  async loadZip(p) {\n    const res = await loadZipAsync(p);\n    const promises = res.map(({ path: resPath, buffer }) =>\n      this.createFileFromContent(resPath, buffer));\n    await Promise.all(promises);\n  }\n\n  // eslint-disable-next-line require-await\n  async createFileFromContent(p, content) {\n    const norm = this.normalizePath(p);\n    this.data[norm] = new Buffer(content);\n  }\n\n  // eslint-disable-next-line require-await\n  async getFileBuffer(p, def = null) {\n    const normalizedPath = this.normalizePath(p);\n    if (!this.data.hasOwnProperty(normalizedPath)) {\n      if (def === null)\n        throw `File ${normalizedPath} not found in MemoryStorage`;\n      else\n        return new Buffer(def);\n    }\n    return this.data[normalizedPath];\n  }\n\n  // eslint-disable-next-line require-await\n  async getFileString(p, def = null) {\n    const normalizedPath = this.normalizePath(p);\n    if (!this.data.hasOwnProperty(normalizedPath)) {\n      if (def === null)\n        throw `File ${normalizedPath} not found in MemoryStorage`;\n      else\n        return def.toString();\n    }\n    return this.data[normalizedPath].toString();\n  }\n\n  // eslint-disable-next-line require-await\n  async getFileStream(p, def = null) {\n    return streamifier.createReadStream(this.getFileBuffer(p, def));\n  }\n\n  // eslint-disable-next-line require-await\n  async glob(p, sort = false) {\n    const normalizedPath = this.normalizePath(p);\n    const res = [];\n    for (const fn of Object.keys(this.data)) {\n      if (wildcard(fn, normalizedPath))\n        res.push(fn);\n    }\n    if (sort)\n      res.sort();\n    return res;\n  }\n\n  // eslint-disable-next-line require-await\n  async dispose() {\n    utils.destroy(this.data);\n    this.data = null;\n  }\n}\n\nif (!module.parent && false) {\n  // eslint-disable-next-line require-await\n  (async () => {\n    console.log(\"Testing with async...\");\n    const store = new MemoryStorage();\n    await store.load(\"test_contest\");\n    console.log(store.getFileString(\"jude.yml\"));\n    await store.createFileFromContent(\"lola\", \"HAHAHA\");\n    console.log(store.getFileBuffer(\"jude.yml\"));\n    console.log(store.data);\n  })();\n}\n\n\nmodule.exports = {\n  Storage,\n  RealStorage,\n  MemoryStorage\n};\n\n\n\n// WEBPACK FOOTER //\n// ./judge/storage.js","/**\n * Created by rsalesc on 15/06/16.\n */\n\nfunction submissionComparator(a, b) {\n  if (a.timeInContest === b.timeInContest)\n    return new Date(a.time).getTime() - new Date(b.time).getTime();\n  return a.timeInContest - b.timeInContest;\n}\n\nclass Scoring {\n  constructor(task, opts = {}) {\n    // if (new.target == Scoring)\n    //  throw `Cannot instantiate abstract class Scoring`;\n    this._task = task;\n    this._opts = { ...this.defaults, ...opts };\n  }\n\n  get task() {\n    return this._task;\n  }\n\n  get opts() {\n    return this._opts;\n  }\n\n  // eslint-disable-next-line no-unused-vars\n  static isTaskValid(tk) {\n    throw new Error(\"Function not implemented in this class\");\n  }\n\n  static hasWeight() {\n    throw new Error(\"Function not implemented in this class\");\n  }\n\n  static hasPartial() {\n    throw new Error(\"Function not implemented in this class\");\n  }\n\n  static hasPenalty() {\n    throw new Error(\"Function not implemented in this class\");\n  }\n\n  get weight() {\n    throw new Error(\"Function not implemented in this class\");\n  }\n\n  get defaults() {\n    return {};\n  }\n\n  // eslint-disable-next-line no-unused-vars\n  solved(obj) {\n    throw new Error(\"Function not implemented in this class\");\n  }\n\n  // eslint-disable-next-line no-unused-vars\n  attempted(obj) {\n    throw new Error(\"Function not implemented in this class\");\n  }\n\n  // eslint-disable-next-line no-unused-vars\n  eval(verdicts) {\n    throw new Error(\"Function not implemented in this class\");\n  }\n\n  // eslint-disable-next-line no-unused-vars\n  evalContest(submissions) {\n    throw new Error(\"Function not implemented in this class\");\n  }\n\n  skipped() {\n    return [\"\", \"VERDICT_INQ\", \"VERDICT_JE\", \"VERDICT_CE\", \"VERDICT_FAIL\",\n            \"VERDICT_CHTE\", \"VERDICT_UE\", \"VERDICT_CTE\"];\n  }\n\n  hasSkipped(verdicts) {\n    const toSkip = this.skipped();\n    for (const key of Object.keys(verdicts)) {\n      const verdict = verdicts[key];\n      if (toSkip.indexOf(verdict.verdict) !== -1)\n        return true;\n    }\n\n    return false;\n  }\n\n  evalContext(submissions) {\n    return this.evalContest(\n      submissions\n        .filter(s => s.timeInContest >= 0)\n        .filter(s => !this.hasSkipped(s.verdict))\n        .sort(submissionComparator)\n    );\n  }\n\n  // eslint-disable-next-line no-unused-vars\n  static mergeEvaluations(evals, opts = {}) {\n    throw new Error(\"Function not implemented in this class\");\n  }\n}\n\nclass ProductScoring extends Scoring {\n  // eslint-disable-next-line no-unused-vars\n  static isTaskValid(tk) {\n    return true;\n  }\n\n  static hasWeight() {\n    return true;\n  }\n\n  static hasPartial() {\n    return false;\n  }\n\n  static hasPenalty() {\n    return true;\n  }\n\n  get defaults() {\n    return { weight: this.task.getWeight() };\n  }\n\n  get weight() {\n    return this.opts.weight;\n  }\n\n  solved(obj) {\n    return obj.score === this.weight;\n  }\n\n  attempted(obj) {\n    return obj.affect || obj.fails > 0;\n  }\n\n  fails(obj) {\n    return obj.fails;\n  }\n\n  eval(verdicts) {\n    let res = 1;\n    for (const key of Object.keys(verdicts)) {\n      const verdict = verdicts[key];\n      if (verdict.verdict === \"VERDICT_INQ\") {\n        return {\n          score: 0, affect: false, penalty: 0, fails: 0\n        };\n      }\n\n      res *= verdict.verdict === \"VERDICT_AC\"\n        ? 1\n        : 0;\n    }\n\n    return {\n      score: parseInt(res * this.weight, 10), penalty: 0, affect: true, fails: 0\n    };\n  }\n\n  evalContest(submissions) {\n    submissions.sort(submissionComparator);\n\n    let fails = 0;\n\n    for (const submission of submissions) {\n      const evaluation = this.eval(submission.verdict);\n      if (evaluation.affect) {\n        if (evaluation.score === 0)\n          fails++;\n        else {\n          return {\n            score: evaluation.score,\n            penalty: submission.timeInContest,\n            affect: true,\n            fails\n          };\n        }\n      }\n    }\n\n    return {\n      score: 0, penalty: 0, affect: false, fails\n    };\n  }\n\n  static mergeEvaluations(evals, opts = {}) {\n    opts = { penalty: 20, ...opts };\n    return evals.reduce((old, cur) => ({\n      score: old.score + cur.score,\n      penalty: !cur.affect ? old.penalty : old.penalty + cur.penalty + cur.fails * (opts.penalty || 20)\n    }), { score: 0, penalty: 0 });\n  }\n}\n\nclass SubtaskSumScoring extends Scoring {\n  // eslint-disable-next-line no-unused-vars\n  static isTaskValid(tk) {\n    return true;\n  }\n\n  static hasWeight() {\n    return true;\n  }\n\n  static hasPartial() {\n    return true;\n  }\n\n  static hasPenalty() {\n    return true;\n  }\n\n  get weight() {\n    return this.opts.weight;\n  }\n\n  get defaults() {\n    return { weight: this.task.getWeight() };\n  }\n\n  solved(obj) {\n    return obj.score > 0;\n  }\n\n  attempted(obj) {\n    return obj.affect || obj.fails > 0;\n  }\n\n  fails(obj) {\n    return obj.fails;\n  }\n\n  eval(verdicts) {\n    let res = 0;\n\n    for (const key of Object.keys(verdicts)) {\n      const verdict = verdicts[key];\n      if (verdict.verdict === \"VERDICT_INQ\") {\n        return {\n          score: 0, affect: false, penalty: 0, fails: 0\n        };\n      }\n\n      res += verdict.verdict === \"VERDICT_AC\"\n        ? this.task.getDatasetFromName(key).percentage\n        : 0;\n    }\n\n    return {\n      score: parseInt(res * this.weight, 10), penalty: 0, affect: true, fails: 0\n    };\n  }\n\n  evalContest(submissions) {\n    submissions.sort(submissionComparator);\n\n    let bestIndex = submissions.length;\n    let bestScore = 0;\n\n    for (let i = 0; i < submissions.length; i++) {\n      const evaluation = this.eval(submissions[i].verdict);\n      if (evaluation.affect && evaluation.score > bestScore) {\n        bestScore = evaluation.score;\n        bestIndex = i;\n      }\n    }\n\n    let fails = 0;\n\n    for (let i = 0; i < bestIndex; i++) {\n      const submission = submissions[i];\n\n      const evaluation = this.eval(submission.verdict);\n      if (evaluation.affect)\n        fails++;\n    }\n\n    if (bestScore > 0) {\n      const submission = submissions[bestIndex];\n      return {\n        score: bestScore,\n        penalty: submission.timeInContest,\n        affect: true,\n        fails\n      };\n    }\n\n    return {\n      score: 0, penalty: 0, affect: false, fails\n    };\n  }\n\n  static mergeEvaluations(evals, opts = {}) {\n    opts = { penalty: 1, ...opts };\n\n    return evals.reduce((old, cur) => ({\n      score: old.score + cur.score,\n      penalty: !cur.affect ? old.penalty : old.penalty + cur.penalty + cur.fails * (opts.penalty || 1)\n    }), { score: 0, penalty: 0 });\n  }\n}\n\nclass SubtaskMaxScoring extends SubtaskSumScoring {\n  static mergeEvaluations(evals, opts = {}) {\n    opts = { penalty: 1, ...opts };\n\n    const maxTime = evals.reduce((old, cur) => Math.max(old, cur.affect ? cur.penalty : 0), 0);\n\n    return evals.reduce((old, cur) => ({\n      score: old.score + cur.score,\n      penalty: !cur.affect ? old.penalty : old.penalty + cur.fails * (opts.penalty || 1)\n    }), { score: 0, penalty: maxTime });\n  }\n}\n\nclass IcpcScoring extends Scoring {\n  // eslint-disable-next-line no-unused-vars\n  static isTaskValid(tk) {\n    return true;\n  }\n\n  static hasWeight() {\n    return false;\n  }\n\n  static hasPartial() {\n    return false;\n  }\n\n  static hasPenalty() {\n    return true;\n  }\n\n  get defaults() {\n    return {};\n  }\n\n  solved(obj) {\n    return obj.score > 0;\n  }\n\n  attempted(obj) {\n    return obj.affect || obj.fails > 0;\n  }\n\n  fails(obj) {\n    return obj.fails;\n  }\n\n  eval(verdicts) {\n    let res = 1;\n    for (const key of Object.keys(verdicts)) {\n      const verdict = verdicts[key];\n      if (verdict.verdict === \"VERDICT_INQ\") {\n        return {\n          score: 0, affect: false, penalty: 0, fails: 0\n        };\n      }\n\n      res *= verdict.verdict === \"VERDICT_AC\"\n        ? 1\n        : 0;\n    }\n\n    return {\n      score: res, penalty: 0, affect: true, fails: 0\n    };\n  }\n\n  evalContest(submissions) {\n    submissions.sort(submissionComparator);\n\n    let fails = 0;\n\n    for (const submission of submissions) {\n      const evaluation = this.eval(submission.verdict);\n      if (evaluation.affect) {\n        if (evaluation.score === 0)\n          fails++;\n        else {\n          return {\n            score: 1,\n            penalty: submission.timeInContest,\n            affect: true,\n            fails\n          };\n        }\n      }\n    }\n\n    return {\n      score: 0, penalty: 0, affect: false, fails\n    };\n  }\n\n  static mergeEvaluations(evals, opts = {}) {\n    opts = { penalty: 20, ...opts };\n\n    return evals.reduce((old, cur) => ({\n      score: old.score + cur.score,\n      penalty: !cur.affect ? old.penalty : old.penalty + cur.penalty + cur.fails * (opts.penalty || 20)\n    }), { score: 0, penalty: 0 });\n  }\n}\n\nmodule.exports = {\n  _Scoring: Scoring,\n  ProductScoring,\n  IcpcScoring,\n  SubtaskMaxScoring,\n  SubtaskSumScoring,\n  // Maintaining backward-compatibility\n  SubtaskScoring: SubtaskMaxScoring\n};\n\n\n\n// WEBPACK FOOTER //\n// ./judge/scoring.js","const path = require(\"path\");\nconst mongodb = require(\"mongodb\");\nconst logger = require(\"./logger\");\nconst environment = require(\"./environment\");\nconst db = require(\"../db\");\nconst grader = require(\"./grader\");\nconst { Submission } = require(\"../models\");\n\nconst { JudgeEnvironment, JudgeConfig } = environment;\nconst POLLING_RATE = 1000;\n\nfunction sleepAsync(ms) {\n  return new Promise((resolve) => {\n    setTimeout(resolve, ms);\n  });\n}\n\nfunction watch(env) {\n  return new Promise(async (resolve) => {\n    // dbg\n    // console.log(await(env.queue.size()));\n\n    let msg = null;\n    try {\n      msg = await env.queue.get({ visibility: JudgeConfig.VISIBILITY_WINDOW });\n    } catch (ex) {\n      console.log(ex);\n      return resolve(null);\n    }\n\n    if (!msg)\n      return resolve(null);\n\n    const req = msg.payload;\n\n    const ack = async () => {\n      try {\n        await env.queue.ackById(new mongodb.ObjectID(msg.id));\n        resolve(true);\n      } catch (ex) {\n        console.log(ex);\n        resolve(false);\n      }\n    };\n    \n    if (msg.tries > JudgeConfig.MAX_TRIES)\n      return ack();\n\n    env.ack = msg.ack;\n    const processMessage = async (err) => {\n      if (err) {\n        logger.error(\"error processing message %s\", msg.id);\n        console.error(err);\n        return resolve(false);\n      }\n\n      try {\n        const verdict = await grader.testPackage(env,\n                                                 req.fid.toString(),\n                                                 req.code,\n                                                 req.lang);\n\n        console.log(verdict);\n        Submission.findById(req.subid).exec((err2, sub) => {\n          if (err2) {\n            logger.error(\"submission id %s not found\", req.subid);\n            return resolve(false);\n          }\n          if (!sub)\n            return ack();\n\n          sub.verdict = verdict;\n          return sub.save((err3) => {\n            if (err3) {\n              logger.error(\"submission could not be saved\");\n              console.error(err3);\n              return resolve(false);\n            }\n\n            logger.debug(\"verdict committed\");\n            return ack();\n          });\n        });\n      } catch (ex) {\n        logger.error(\"error testing package %s\", req.id);\n        console.error(ex);\n        return resolve(false);\n      }\n\n      return null;\n    };\n\n    if (!env.cache.exists(req.fid.toString())) {\n      const writeStream = env.cache.addFromStream(req.fid.toString(), processMessage);\n      env.seaweed.read(req.fid, writeStream);\n    } else {\n      console.log(\"loading cached package\");\n      processMessage();\n    }\n\n    return null;\n  });\n}\n\nasync function startWatching(env) {\n  try {\n    await env.queue.clean();\n  } catch (ex) {\n    console.log(\"error cleaning up the message queue\");\n    throw ex;\n  }\n\n  /* eslint-disable no-constant-condition, no-await-in-loop */\n  while (true) {\n    console.log(\"[judge] watching for new submissions\");\n    while (await watch(env) === null)\n      await sleepAsync(POLLING_RATE);\n  }\n  /* eslint-enable */\n}\n\nconst seaweed = weedClient;\n\n// TODO: dispose after interruption\nstartWatching(new JudgeEnvironment(db, seaweed));\n\n\n\n// WEBPACK FOOTER //\n// ./judge/watch.js","module.exports = require(\"mongodb\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"mongodb\"\n// module id = 31\n// module chunks = 0","module.exports = require(\"winston\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"winston\"\n// module id = 32\n// module chunks = 0","module.exports = require(\"tmp\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"tmp\"\n// module id = 33\n// module chunks = 0","const path = require(\"path\");\nconst { UserThrottlingPolicy } = require(\"@routes/policies\");\nconst { SharedConfig } = require(\"~/config.shared\");\n\nexport const JudgeConfig = {\n  MAX_TRIES: 5,\n  EPS: 1e-7,\n  SANDBOX_OFFSET: parseInt(process.env.SANDBOX_OFFSET || 0, 10),\n  MAX_SANDBOXES: parseInt(process.env.MAX_SANDBOXES || 10, 10),\n  MAX_SIMUL_TESTS: parseInt(process.env.MAX_SIMUL_TESTS || 1, 10),\n  COMPILATION_TL: 90,\n  CHECKING_TL: 90,\n  CHECKING_ML: 512,\n  CHECKING_WTL: 90,\n  WT_MULTIPLIER: 15,\n  OUTPUT_LIMIT: 1 << 24,\n  TEMP_DIR: \"/tmp\",\n  ISOLATE_PATH: path.resolve(\"/usr/local/bin/isolate\"),\n  VISIBILITY_WINDOW: parseInt(process.env.VISIBILITY_WINDOW || 20, 10),\n  BOUND_ML: 2048\n};\n\n\nexport const SiteConfig = {\n  ...SharedConfig,\n\n  // throttling\n  throttling: {\n    submissions: new UserThrottlingPolicy([\n      { windowMs: 10 * 1000, max: 3 },\n      { windowMs: 60 * 1000, max: 7 },\n      { windowMs: 2 * 60 * 1000, max: 10 }\n    ], {\n      message: \"You submitted too many times! Wait until you can submit again.\"\n    }),\n    clarifications: new UserThrottlingPolicy([\n      { windowMs: 60 * 1000, max: 4 },\n      { windowMs: 10 * 60 * 1000, max: 10 }\n    ], {\n      message: \"You can't spam clarifications like that!\"\n    }),\n    printouts: new UserThrottlingPolicy([\n      { windowMs: 60 * 1000, max: 4 },\n      { windowMs: 10 * 60 * 1000, max: 10 }\n    ], {\n      message: \"You can't ask for printouts like that! Wait and try again.\"\n    })\n  }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./config.js","const limiter = require(\"express-rate-limit\");\nconst { isAdmin } = require(\"@routes/common\");\n\nconst THROTTLE_CODE = 429;\n\nfunction sanitize(opts) {\n  let msg = { error: \"Too many requests.\" };\n  if (opts.message)\n    msg = { error: opts.message };\n\n  opts.handler = function (req, res) {\n    res.status(THROTTLE_CODE).send(msg);\n  };\n}\n\nexport class ThrottlingPolicy {\n  constructor(sequenceOfOpts, commonOpts = {}) {\n    let opts = sequenceOfOpts;\n    if (!Array.isArray(sequenceOfOpts))\n      opts = [sequenceOfOpts];\n    for (const opt of opts)\n      sanitize(opt);\n    sanitize(commonOpts);\n    this.constraints = opts.map(x => ({ ...x, ...commonOpts }));\n    this.middlewares = this.constraints.map(x => limiter(x));\n  }\n}\n\nexport class UserThrottlingPolicy extends ThrottlingPolicy {\n  constructor(sequenceOfOpts, commonOpts = {}) {\n    commonOpts.keyGenerator = function (req) {\n      if (req.auth2 && req.auth2.user)\n        return req.auth2.user;\n      return req.ip;\n    };\n\n    commonOpts.skip = function (req) {\n      return req.auth2 && req.auth2.user && isAdmin(req);\n    };\n\n    commonOpts.skipFailedRequests = true;\n    super(sequenceOfOpts, commonOpts);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./routes/policies.js","module.exports = require(\"express-rate-limit\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"express-rate-limit\"\n// module id = 36\n// module chunks = 0","const { Contest } = require(\"@models\");\n\nfunction getUserContest(user) {\n  try {\n    return Contest.findById(user.contest);\n  } catch (ex) {\n    return { exec: cb => cb(ex) };\n  }\n}\n\nfunction isAdmin(req) {\n  return req.auth2.roles.indexOf(\"admin\") !== -1;\n}\n\nmodule.exports = {\n  getUserContest,\n  isAdmin\n};\n\n\n\n// WEBPACK FOOTER //\n// ./routes/common.js","module.exports = require(\"jude-seaweedfs\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"jude-seaweedfs\"\n// module id = 38\n// module chunks = 0","/**\n * Created by rsalesc on 14/07/16.\n */\nconst mongoose = require(\"mongoose\");\nconst deepPopulate = require(\"mongoose-deep-populate\")(mongoose);\nconst { Schema } = mongoose;\n\nmodule.exports = () => {\n  if (db.models.Contest)\n    return db.model(\"Contest\");\n\n  const Problem = require(\"./Problem\")();\n\n  const ContestProblem = new Schema({\n    letter: {\n      type: String,\n      required: true,\n      match: /[A-Z][0-9]*/\n    },\n    problem: { type: Schema.Types.ObjectId, ref: \"Problem\", required: true },\n    color: { type: String, default: \"000\" },\n    scoringOpts: { type: Schema.Types.Mixed, default: {}}\n  }, { _id: false });\n\n  const ContestSchema = new Schema({\n    name: { type: String, minlength: 4, maxlength: 64 },\n    start_time: { type: Date, required: true },\n    end_time: { type: Date, required: true },\n    scoring: { type: String, required: true },\n    scoringOpts: { type: Schema.Types.Mixed, default: {}},\n    problems: {\n      type: [ContestProblem],\n      validate: {\n        validator(v) {\n          if (!Array.isArray(v))\n            return false;\n          const letters = v.map(val => val.letter);\n          const ids = v.map(val => val.problem.toString());\n\n          return new Set(letters).size === letters.length\n            && new Set(ids).size === ids.length;\n        },\n        message: \"Contest cannot have repeated letters and problems must be an array\"\n      }\n    },\n    hidden: Boolean,\n    upseeing: { type: Boolean, required: true, default: false },\n    blind: { type: Number, default: 0 },\n    freeze: { type: Number, default: 0 },\n    unfreeze: { type: Boolean, default: false }\n  }, { timestamps: true });\n\n  ContestSchema.index({ name: 1 });\n  ContestSchema.index({ name: \"text\" });\n  ContestSchema.plugin(deepPopulate);\n\n  ContestSchema.pre(\"save\", function (next) {\n    this.problems.sort((a, b) => {\n      try {\n        return ((x, y) => {\n          const xd = parseInt(x.slice(1), 10) || 0;\n          const yd = parseInt(y.slice(1), 10) || 0;\n\n          if (x[0] === y[0])\n            return xd < yd ? -1 : xd > yd ? 1 : 0;\n\n          return x[0] < y[0]\n            ? -1\n            : 1;\n        })(a.letter, b.letter);\n      } catch (ex) {\n        return false;\n      }\n    });\n\n    next();\n  });\n\n  ContestSchema.methods.hasStarted = function () {\n    return this.start_time.getTime() <= Date.now();\n  };\n\n  ContestSchema.methods.hasEnded = function () {\n    return this.end_time.getTime() <= Date.now();\n  };\n\n  ContestSchema.methods.isRunning = function () {\n    return this.hasStarted() && !this.hasEnded();\n  };\n\n  ContestSchema.methods.getTimeInContest = function (x) {\n    const cur = x != null ? x : Date.now();\n    return parseInt((cur - this.start_time.getTime()) / 60 / 1000, 10);\n  };\n\n  ContestSchema.methods.getDurationInContest = function () {\n    const diff = (this.end_time.getTime() - this.start_time.getTime());\n    return parseInt(Math.ceil(diff / 60 / 1000), 10);\n  };\n\n  ContestSchema.methods.getRemainingInContest = function (x) {\n    return this.getDurationInContest()\n      - (x != null ? x : this.getTimeInContest());\n  };\n\n  ContestSchema.methods.isFrozen = function (x) {\n    return this.getRemainingInContest(x) <= this.freeze\n    && (this.isRunning()\n      || (this.hasEnded() && !this.unfreeze && this.freeze > 0));\n  };\n\n  ContestSchema.methods.isBlind = function (x) {\n    return this.getRemainingInContest(x) <= this.blind\n      && (this.isRunning()\n        || (this.hasEnded() && !this.unfreeze && this.blind > 0));\n  };\n\n  ContestSchema.pre(\"remove\", function (next) {\n    db.model(\"Submission\").remove({ contest: this._id }, (err) => {\n      if (err)\n        console.error(err);\n    });\n    db.model(\"User\").remove({ contest: this._id }, (err) => {\n      if (err)\n        console.error(err);\n    });\n    db.model(\"Clarification\").remove({ contest: this._id }, (err) => {\n      if (err)\n        console.error(err);\n    });\n    db.model(\"Printout\").remove({ contest: this._id }, (err) => {\n      if (err)\n        console.error(err);\n    });\n    next();\n  });\n\n\n  return db.model(\"Contest\", ContestSchema);\n};\n\n\n\n// WEBPACK FOOTER //\n// ./models/Contest.js","module.exports = require(\"babel-runtime/core-js/set\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"babel-runtime/core-js/set\"\n// module id = 40\n// module chunks = 0","module.exports = require(\"mongoose-deep-populate\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"mongoose-deep-populate\"\n// module id = 41\n// module chunks = 0","/**\n * Created by rsalesc on 14/07/16.\n */\nvar mongoose = require('mongoose')\nvar Schema = mongoose.Schema\nconst sha256 = require('sha256');\n\nmodule.exports = () => {\n    if(db.models.User)\n        return db.model(\"User\");\n\n    var UserSchema = new Schema({\n        handle: {\n            type: String,\n            minlength: 3,\n            maxlength: 24,\n            match: /[a-zA-Z][a-zA-Z0-9_\\.]*/,\n            required: true\n        },\n        name: {\n            type: String,\n            maxlength: 48,\n            default: \"unnamed\"\n        },\n        description:String,\n        password: {\n          type: String,\n          minlength: 1,\n          maxlength: 48\n        },\n        email: {\n            type: String,\n            maxlength: 64\n            // TODO: put email regex here\n        },\n        contest: {type: Schema.Types.ObjectId, ref: 'Contest'},\n        unofficial: {type: Boolean, default: false},\n        disabled: {type: Boolean, default: false},\n        role: {type: String, default: \"contestant\"}\n    }, {timestamps: true});\n\n    UserSchema.index({handle: 1, contest: 1}, {unique: true});\n    UserSchema.index({handle: 'text', name: 'text'}, {\n        weights: {\n            handle: 2,\n            name: 1\n        }\n    });\n\n    UserSchema.pre('save', function(next){\n        if(this.isModified('password')){\n            this.password = sha256(this.password);\n        }\n\n        next();\n    });\n\n    UserSchema.methods.matchPasswords = function(candidate){\n        return this.password == sha256(candidate);\n    };\n\n    UserSchema.pre(\"remove\", function(next) {\n        db.model(\"Submission\").remove({ _creator: this._id }, err => {\n            if(err) console.error(err);\n        });\n        next();\n    });\n\n    return db.model('User', UserSchema)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./models/User.js","module.exports = require(\"sha256\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"sha256\"\n// module id = 43\n// module chunks = 0","/**\n * Created by rsalesc on 15/07/16.\n */\n\nconst mongoose = require(\"mongoose\");\nconst { Schema } = mongoose;\n\nconst DEFAULT_VERDICT = {\n  verdict: \"\", info: \"\", passed: -1, score: 0\n};\n\n// TODO: add creation time (with a plugin)\nmodule.exports = () => {\n  if (db.models.Submission)\n    return db.model(\"Submission\");\n\n\n  const SubmissionSchema = new Schema({\n    _creator: { type: Schema.Types.ObjectId, ref: \"User\", required: true },\n    contest: { type: Schema.Types.ObjectId, ref: \"Contest\" },\n    problem: { type: Schema.Types.ObjectId, ref: \"Problem\", required: true },\n    time: { type: Date, default: Date.now },\n    timeInContest: { type: Number, default: 0 },\n    // add enum validator? maybe not, language set is mutable\n    language: String,\n    code: String,\n    codeHash: { type: String, default: \"\" },\n    verdict: Schema.Types.Mixed\n  }, { timestamps: true });\n\n  SubmissionSchema.index({ contest: 1, _creator: 1 });\n  SubmissionSchema.index({ contest: 1, problem: 1 });\n  SubmissionSchema.index({ contest: 1, time: 1 });\n  SubmissionSchema.index({ contest: 1, timeInContest: 1 });\n  SubmissionSchema.index({ problem: 1, _creator: 1 });\n  SubmissionSchema.index({ _creator: 1 });\n\n  SubmissionSchema.pre(\"save\", function (next) {\n    if (this.problem) {\n      db.model(\"Problem\").findById(this.problem).exec((err, problem) => {\n        if (err)\n          next(err);\n        this.verdict = this.verdict || {};\n        const res = {};\n        for (const data of problem.attr.datasets)\n          res[data.name] = this.verdict[data.name] || DEFAULT_VERDICT;\n\n        this.verdict = res;\n        next();\n      });\n    }\n  });\n\n  return db.model(\"Submission\", SubmissionSchema);\n};\n\n\n\n// WEBPACK FOOTER //\n// ./models/Submission.js","const mongoose = require(\"mongoose\");\nconst { Schema } = mongoose;\n\nmodule.exports = () => {\n  if (db.models.Clarification)\n    return db.model(\"Clarification\");\n\n  const CommentSchema = new Schema({\n    _creator: { type: Schema.Types.ObjectId, ref: \"User\" },\n    text: String\n  }, { timestamps: true });\n\n  const ClarificationSchema = new Schema({\n    _creator: { type: Schema.Types.ObjectId, ref: \"User\" },\n    contest: { type: Schema.Types.ObjectId, ref: \"Contest\" },\n    problem: { type: Schema.Types.ObjectId, ref: \"Problem\" },\n    broadcast: { type: Boolean, default: false },\n    comments: [CommentSchema]\n  }, { timestamps: true });\n\n  ClarificationSchema.index({ _creator: 1, contest: 1 });\n  ClarificationSchema.index({ contest: 1, broadcast: 1 });\n\n  return db.model(\"Clarification\", ClarificationSchema);\n};\n\n\n\n// WEBPACK FOOTER //\n// ./models/Clarification.js","const mongoose = require(\"mongoose\");\nconst { Schema } = mongoose;\n\nmodule.exports = () => {\n  if (db.models.Printout)\n    return db.model(\"Printout\");\n\n  const PrintoutSchema = new Schema({\n    _creator: { type: Schema.Types.ObjectId, ref: \"User\" },\n    contest: { type: Schema.Types.ObjectId, ref: \"Contest\" },\n    text: String,\n    lines: Number,\n    done: Boolean\n  }, { timestamps: true });\n\n  PrintoutSchema.index({ _creator: 1, contest: 1 });\n\n  return db.model(\"Printout\", PrintoutSchema);\n};\n\n\n\n// WEBPACK FOOTER //\n// ./models/Printout.js","export const SharedConfig = {\n  SOURCE_LIMIT: 128 * 1024\n};\n\n\n\n// WEBPACK FOOTER //\n// ./config.shared.js","/**\n * Created by rsalesc on 24/06/16.\n */\n\n// eslint-disable-next-line no-unused-vars\nconst fs = require(\"fs\");\nconst fse = require(\"fs-extra\");\nconst path = require(\"path\");\nconst promiseReflect = require(\"promise-reflect\");\n\nconst verdict = require(\"./verdict\");\nconst utils = require(\"./utils\");\nconst logger = require(\"./logger\");\nconst sandbox = require(\"./sandbox\");\nconst environment = require(\"./environment\");\n\nconst loader = require(\"./loader\");\nconst Profiler = require(\"./profiler\");\n\nconst Storage = require(\"./storage\").MemoryStorage;\n\nconst { Verdict } = verdict;\nconst { Isolate, IsolateConst } = sandbox;\nconst { JudgeEnvironment, JudgeConfig } = environment;\nconst { JudeLoader } = loader;\n\nconst policyPath = \"/etc/java-sandbox/security.policy\";\nconst javaExecutorPath = \"/etc/java-sandbox/executor.jar\";\n\nasync function evaluate(iso, store, command, input, output = \"output\", error = \"error\") {\n  if (input)\n    iso.stdin = input;\n  iso.stdout = output;\n  iso.stderr = error;\n\n  // remove stdout and stderr, only for dbg\n  const res = await iso.execute(command);\n  // iso.removeFile(iso.stdout)\n  // iso.removeFile(iso.stderr)\n\n  return res;\n}\n\nconst Evaluation = {\n  async CPP(iso, store, execPath, test, timelimit = null, wtlimit = null, memorylimit = null,\n            input = \"input\", output = \"output\",\n            error = \"error\") {\n    iso.timelimit = timelimit;\n    iso.wallclockLimit = wtlimit;\n    iso.memorySize = memorylimit;\n    await iso.createFileFromStorage(input, test);\n    await iso.createFileFromStorage(\"eval\", execPath, true);\n\n    const res = await evaluate(iso, store, [\"./eval\"], input, output, error);\n    await iso.removeFile(\"eval\");\n    await iso.removeFile(input);\n\n    return res;\n  },\n  async Py2(iso, store, execPath, test, timelimit = null, wtlimit = null, memorylimit = null,\n            input = \"input\", output = \"output\",\n            error = \"error\") {\n    iso.timelimit = timelimit;\n    iso.wallclockLimit = wtlimit;\n    iso.memorySize = memorylimit;\n    iso.setEnv.HOME = \"./\";\n    iso.dirs.push({ in: \"/usr\" });\n    iso.dirs.push({ in: \"/etc\" });\n    await iso.createFileFromStorage(input, test);\n    await iso.createFileFromStorage(\"sol.pyc\", \"sol.pyc\", true);\n\n    const res = await evaluate(iso, store, [\"/usr/bin/python2\", \"sol.pyc\"], input, output, error);\n    iso.dirs.pop();\n    iso.dirs.pop();\n\n    await iso.removeFile(\"sol.pyc\");\n    await iso.removeFile(input);\n\n    return res;\n  },\n  async Py3(iso, store, execPath, test, timelimit = null, wtlimit = null, memorylimit = null,\n            input = \"input\", output = \"output\",\n            error = \"error\") {\n    iso.timelimit = timelimit;\n    iso.wallclockLimit = wtlimit;\n    iso.memorySize = memorylimit;\n    iso.setEnv.HOME = \"./\";\n    iso.dirs.push({ in: \"/usr\" });\n    iso.dirs.push({ in: \"/etc\" });\n    await iso.createFileFromStorage(input, test);\n    await iso.createFileFromStorage(\"sol.pyc\", \"sol.pyc\", true);\n\n    const res = await evaluate(iso, store, [\"/usr/bin/python3\", \"sol.pyc\"], input, output, error);\n    iso.dirs.pop();\n    iso.dirs.pop();\n\n    await iso.removeFile(\"sol.pyc\");\n    await iso.removeFile(input);\n\n    return res;\n  },\n  async Java(iso, store, execPath, test, timelimit = null, wtlimit = null, memorylimit = null,\n             input = \"input\", output = \"output\",\n             error = \"error\") {\n    const oldProc = iso.maxProcesses;\n    const oldEnv = iso.setEnv;\n    const oldCgTiming = iso.cgTiming;\n    const oldCgMemory = iso.cgMemorySize;\n    const oldCg = iso.cgroup;\n\n    iso.setEnv.MALLOC_ARENA_MAX = \"1\";\n    iso.maxProcesses = null;\n    iso.timelimit = timelimit;\n    iso.wallclockLimit = wtlimit;\n    iso.dirs.push({ in: \"/etc\" });\n    iso.dirs.push({ in: \"/usr/lib/jvm\" });\n    iso.memorySize = (1300 * 1024) + memorylimit;\n    iso.cgMemorySize = iso.memorySize;\n    iso.cgTiming = true;\n    iso.cgroup = true;\n\n    await iso.createFileFromStorage(input, test);\n    await iso.globFromStorage(\"*.class\", path.basename);\n\n    const command = [\n      \"/usr/bin/java\",\n      \"-client\",\n      `-javaagent:${javaExecutorPath}=policy:${policyPath}`,\n      \"-Xss128m\",\n      `-Xmx${memorylimit / 1024 | 0}m`,\n      \"-XX:MaxMetaspaceSize=256m\",\n      \"-XX:CompressedClassSpaceSize=64m\",\n      \"-XX:ErrorFile=submission_jvm_crash.log\",\n      \"Main\"\n    ];\n\n    // console.log(iso.getRunArgs());\n    const res = await evaluate(iso, store, command, input, output, error);\n    // console.log(fs.readFileSync(iso.resolvePath(\"output\"), \"utf8\"));\n    // console.log(fs.readFileSync(iso.resolvePath(\"error\"), \"utf8\"));\n    // console.log(fs.readFileSync(iso.resolvePath(\"run.log.0\"), \"utf8\"));\n\n    // console.log(fs.readFileSync(iso.resolvePath(\"submission_jvm_crash.log\")));\n    // console.log(fs.readFileSync(iso.resolvePath(\"state\"), \"utf8\"));\n\n    // require(\"sleep\").sleep(20);\n\n    if (await iso.fileExists(\"submission_jvm_crash.log\"))\n      throw new Error(\"JVM somehow crashed\");\n\n    //if (!await iso.fileExists(\"state\"))\n      //throw new Error(\"State file not found\");\n\n    await iso.removeFile(input);\n    iso.dirs.pop();\n    iso.dirs.pop();\n    iso.setEnv = oldEnv;\n    iso.maxProcesses = oldProc;\n    iso.cgTiming = oldCgTiming;\n    iso.cgMemorySize = oldCgMemory;\n    iso.cgroup = oldCg;\n\n    return res;\n  }\n};\nEvaluation.C = Evaluation.CPP;\n\nconst Checking = {\n  async CPP(iso, store, execPath,\n            input = \"input\", output = \"output\", answer = \"answer\",\n            checkerInput = null, checkerOutput = \"checker_output\", checkerError = \"checker_error\") {\n    iso.timelimit = JudgeConfig.CHECKING_TL;\n    iso.wallclockLimit = JudgeConfig.CHECKING_WTL;\n    iso.memorySize = JudgeConfig.CHECKING_ML * 1024;\n\n    await iso.createFileFromStorage(\"eval\", execPath, true);\n\n    const res = await evaluate(iso, store, [\"./eval\", input, output, answer],\n                               checkerInput, checkerOutput, checkerError);\n    await iso.removeFile(\"eval\");\n    await iso.removeFile(input);\n\n    res.stdout = await iso.getFileToString(checkerOutput);\n    res.stderr = await iso.getFileToString(checkerError);\n    return res;\n  }\n};\nChecking.C = Checking.CPP;\n\nconst Compilation = {\n  async CPP(iso, store, file, execPath) {\n    const sourceFile = \"source.cpp\";\n    await iso.createFileFromStorage(sourceFile, file);\n\n    const oldEnv = iso.preserveEnv;\n    const oldProc = iso.maxProcesses;\n    const oldTL = iso.timelimit;\n    const oldWTL = iso.wallclockLimit;\n    iso.preserveEnv = true;\n    iso.maxProcesses = null;\n    iso.dirs.push({ in: \"/etc\" });\n    iso.timelimit = JudgeConfig.COMPILATION_TL;\n    iso.wallclockLimit = JudgeConfig.COMPILATION_TL;\n\n    const res = await evaluate(iso, store, [\"/usr/bin/g++\", \"-lm\", \"-std=c++14\",\n                                            sourceFile, \"-O3\"]);\n\n    iso.maxProcesses = oldProc;\n    iso.preserveEnv = oldEnv;\n    iso.timelimit = oldTL;\n    iso.wallclockLimit = oldWTL;\n    iso.dirs.pop();\n\n    await iso.removeFile(sourceFile);\n\n    if (res.code === 0 && execPath) {\n      await iso.getFileToStorage(\"a.out\", execPath);\n      await iso.removeFile(\"a.out\");\n    }\n\n    res.stdout = await iso.getFileToString(\"output\");\n    res.stderr = await iso.getFileToString(\"error\");\n    await iso.removeFile(\"output\");\n    await iso.removeFile(\"error\");\n    return res;\n  },\n  async C(iso, store, file, execPath) {\n    const sourceFile = \"source.c\";\n    await iso.createFileFromStorage(sourceFile, file);\n\n    const oldEnv = iso.preserveEnv;\n    const oldProc = iso.maxProcesses;\n    const oldTL = iso.timelimit;\n    const oldWTL = iso.wallclockLimit;\n    iso.preserveEnv = true;\n    iso.maxProcesses = null;\n    iso.dirs.push({ in: \"/etc\" });\n    iso.timelimit = JudgeConfig.COMPILATION_TL;\n    iso.wallclockLimit = JudgeConfig.COMPILATION_TL;\n\n    const res = await evaluate(iso, store, [\"/usr/bin/gcc\", \"-lm\", \"-std=c11\",\n                                            sourceFile, \"-O3\"]);\n\n\n    iso.maxProcesses = oldProc;\n    iso.preserveEnv = oldEnv;\n    iso.timelimit = oldTL;\n    iso.wallclockLimit = oldWTL;\n    iso.dirs.pop();\n\n    await iso.removeFile(sourceFile);\n\n    if (res.code === 0 && execPath) {\n      await iso.getFileToStorage(\"a.out\", execPath);\n      await iso.removeFile(\"a.out\");\n    }\n\n    res.stdout = await iso.getFileToString(\"output\");\n    await iso.removeFile(\"output\");\n    return res;\n  },\n  async Java(iso, store, file) {\n    const sourceFile = \"Main.java\";\n    await iso.createFileFromStorage(sourceFile, file);\n\n    const oldEnv = iso.preserveEnv;\n    const oldProc = iso.maxProcesses;\n    const oldTL = iso.timelimit;\n    const oldWTL = iso.wallclockLimit;\n    iso.preserveEnv = true;\n    iso.maxProcesses = null;\n    iso.dirs.push({ in: \"/etc\" });\n    iso.dirs.push({ in: \"/usr/lib/jvm\" });\n    iso.timelimit = JudgeConfig.COMPILATION_TL;\n    iso.wallclockLimit = JudgeConfig.COMPILATION_TL;\n\n    const res = await evaluate(iso, store,\n                               [\"/usr/bin/javac\", \"-Xlint\", \"-encoding\", \"UTF-8\", sourceFile]);\n\n    iso.maxProcesses = oldProc;\n    iso.preserveEnv = oldEnv;\n    iso.timelimit = oldTL;\n    iso.wallclockLimit = oldWTL;\n    iso.dirs.pop();\n    iso.dirs.pop();\n\n    await iso.removeFile(sourceFile);\n\n    if (res.code === 0)\n      await iso.globToStorage(\"*.class\", path.basename);\n\n\n    res.stdout = await iso.getFileToString(\"output\");\n    res.stderr = await iso.getFileToString(\"error\");\n    await iso.removeFile(\"output\");\n    await iso.removeFile(\"error\");\n    return res;\n  },\n  async Py2(iso, store, file, execPath) {\n    const sourceFile = \"sol.py\";\n    await iso.createFileFromStorage(sourceFile, file);\n\n    const oldEnv = iso.preserveEnv;\n    const oldProc = iso.maxProcesses;\n    const oldTL = iso.timelimit;\n    const oldWTL = iso.wallclockLimit;\n    iso.preserveEnv = true;\n    iso.maxProcesses = null;\n    iso.dirs.push({ in: \"/etc\" });\n    iso.dirs.push({ in: \"/usr\" });\n    iso.timelimit = JudgeConfig.COMPILATION_TL;\n    iso.wallclockLimit = JudgeConfig.COMPILATION_TL;\n\n    const res = await evaluate(iso, store, [\"/usr/bin/python2\", \"-m\", \"py_compile\",\n                                            sourceFile]);\n\n    iso.maxProcesses = oldProc;\n    iso.preserveEnv = oldEnv;\n    iso.timelimit = oldTL;\n    iso.wallclockLimit = oldWTL;\n    iso.dirs.pop();\n    iso.dirs.pop();\n\n    await iso.removeFile(sourceFile);\n\n    if (res.code === 0 && execPath)\n      await iso.globToStorage(\"**/*.pyc\", _ => \"sol.pyc\");\n\n    res.stdout = await iso.getFileToString(\"output\");\n    res.stderr = await iso.getFileToString(\"error\");\n    await iso.removeFile(\"output\");\n    await iso.removeFile(\"error\");\n    return res;\n  },\n  async Py3(iso, store, file, execPath) {\n    const sourceFile = \"sol.py\";\n    await iso.createFileFromStorage(sourceFile, file);\n\n    const oldEnv = iso.preserveEnv;\n    const oldProc = iso.maxProcesses;\n    const oldTL = iso.timelimit;\n    const oldWTL = iso.wallclockLimit;\n    iso.preserveEnv = true;\n    iso.maxProcesses = null;\n    iso.dirs.push({ in: \"/etc\" });\n    iso.dirs.push({ in: \"/usr\" });\n    iso.timelimit = JudgeConfig.COMPILATION_TL;\n    iso.wallclockLimit = JudgeConfig.COMPILATION_TL;\n\n    const res = await evaluate(iso, store, [\"/usr/bin/python3\", \"-m\", \"py_compile\",\n                                            sourceFile]);\n\n    iso.maxProcesses = oldProc;\n    iso.preserveEnv = oldEnv;\n    iso.timelimit = oldTL;\n    iso.wallclockLimit = oldWTL;\n    iso.dirs.pop();\n    iso.dirs.pop();\n\n    await iso.removeFile(sourceFile);\n\n    if (res.code === 0 && execPath)\n      await iso.globToStorage(\"**/*.pyc\", _ => \"sol.pyc\");\n\n\n    res.stdout = await iso.getFileToString(\"output\");\n    res.stderr = await iso.getFileToString(\"error\");\n    await iso.removeFile(\"output\");\n    await iso.removeFile(\"error\");\n    return res;\n  }\n};\n\n/* Path constants to be used in the grading steps */\nconst SOURCE_PATH = \"_/sol\";\nconst SOURCE_EXEC_PATH = \"_/sol_exec\";\nconst CHECKER_PATH = \"_/checker\";\nconst CHECKER_EXEC_PATH = \"_/checker_exec\";\n\n/**\n*   Compile the solution\n*   @param {JudgeEnvironment}\n*   @param {Storage}\n*   @param {string} solution language\n*   @param {string} path of the solution code in the storage\n*   @param {string} path of the resulting executable file in the storage\n*   @retuns {Object} compilation output/verdict (Isolate.execute() result\n*     + Isolate.getLog() result)\n */\nasync function compilationStepAsync(env, store, lang, sol = SOURCE_PATH,\n                                    solExec = SOURCE_EXEC_PATH) {\n  const iso = new Isolate(env, store);\n  try {\n    await iso.init();\n    const result = await Compilation[lang](iso, store, sol, solExec);\n\n    // get log\n    result.log = await iso.getLog();\n\n    // cleanup\n    try {\n      await iso.cleanup();\n    } catch (e) {\n      console.error(e);\n    }\n\n    return result;\n  } catch (e) {\n    logger.error(\"compilation step failed - %s\", e.toString());\n    try {\n      await iso.cleanup();\n    } catch (e2) {\n      console.error(e2);\n    }\n\n    throw { code: 2 };\n  }\n}\n\n/*\n*   Promisified testCase\n */\n// eslint-disable-next-line require-await\nasync function testCaseAsync(env, store, iso, task, lang, dataset, testcase) {\n  return new Promise(async (resolve) => {\n    logger.debug(`running on testcase ${testcase.in}`);\n\n    // to seconds\n    const timelimit = task.getTimelimit();\n\n    // to KB\n    const memorylimit = task.getMemorylimit() * 1024;\n\n    let evaluationResult = {};\n    let checkingResult = {};\n    let execTime;\n    const exitWith = v => resolve(v);\n\n    let execLog = {};\n    // grading step\n    try {\n      await iso.init();\n      evaluationResult = await Evaluation[lang](iso, store, SOURCE_EXEC_PATH,\n                                                testcase.in, timelimit,\n                                                timelimit * JudgeConfig.WT_MULTIPLIER, memorylimit);\n\n      evaluationResult.log = await iso.getLog();\n      execLog = evaluationResult.log;\n\n      // sandbox crashed\n      if (!Isolate.translateBoxExitCode(evaluationResult.code)) {\n        console.log(\"sandbox crashed in evaluation step\");\n        console.log(evaluationResult);\n        return exitWith(new Verdict(0, \"VERDICT_JE\"));\n      }\n\n      const dummy = new Isolate(env, store, evaluationResult.log);\n      execTime = dummy.getRunningTime();\n\n      // execution failed, do something and return\n      if (evaluationResult.code === 1) {\n        const exitStatus = dummy.getExitStatus();\n        const exitCode = dummy.getExitCode();\n\n        if (exitStatus === IsolateConst.EXIT_TIMEOUT)\n          return exitWith(new Verdict(0, \"VERDICT_TLE\", -1, { time: timelimit }));\n        else if (exitStatus === IsolateConst.EXIT_TIMEOUT_WALL)\n          return exitWith(new Verdict(0, \"VERDICT_WTE\", -1, { time: execTime }));\n        else if (exitStatus === IsolateConst.EXIT_OUTPUT_LIMIT)\n          return exitWith(new Verdict(0, \"VERDICT_OLE\", -1, { time: execTime }));\n\n\n        // TODO: add sandbox information about RTE\n        return exitWith(new Verdict(0, \"VERDICT_RTE\", -1, {\n          text: `exited with code ${exitCode}`,\n          time: execTime\n        }));\n      }\n    } catch (e) {\n      logger.error(\"execution step failed - %s\", e.toString());\n      return exitWith(new Verdict(0, \"VERDICT_JE\"));\n    }\n\n    try {\n      // recreate file to avoid input modification when checking\n      await iso.createFileFromStorage(\"input\", testcase.in);\n      await iso.createFileFromStorage(\"answer\", testcase.out);\n\n      checkingResult = await Checking[task.getCheckerLanguage()](iso, store,\n                                                                 CHECKER_EXEC_PATH);\n      checkingResult.log = await iso.getLog();\n\n      if (!Isolate.translateBoxExitCode(checkingResult.code)) {\n        console.log(\"error in checking step right after grading\");\n        console.log(checkingResult);\n        return exitWith(new Verdict(0, \"VERDICT_JE\"));\n      }\n\n      iso.log = execLog;\n      const output = checkingResult.stderr;\n\n      if (checkingResult.code === 1) {\n        const dummy = new Isolate(env, store, checkingResult.log);\n        const exitStatus = dummy.getExitStatus();\n        const exitCode = dummy.getExitCode();\n\n        if (exitStatus === IsolateConst.EXIT_TIMEOUT\n          || exitStatus === IsolateConst.EXIT_TIMEOUT_WALL)\n          return exitWith(new Verdict(0, \"VERDICT_CHTE\"));\n\n\n        if (exitCode === 1 || exitCode === 2)\n          return exitWith(new Verdict(0, \"VERDICT_WA\", 0, { text: output, time: execTime }));\n\n        return exitWith(new Verdict(0, \"VERDICT_FAIL\", 0, { text: output, time: execTime }));\n      }\n\n      return exitWith(new Verdict(1, \"VERDICT_AC\", 0, { text: output, time: execTime }));\n    } catch (e) {\n      logger.error(\"checker step failed - %s\", e.toString());\n      console.log(e);\n      return exitWith(new Verdict(0, \"VERDICT_JE\"));\n    }\n  });\n}\n\n/**\n*   Test to-be-executed solution against testcases of the given dataset\n*   Files expected to be created beforehand are: _/checker_exec, _/sol_exec\n*   @param {JudgeEnvironment}\n*   @param {Storage}\n*   @param {Task}   task\n*   @param {string} language of the to-be-executed solution\n*   @param {Object} dataset\n */\nasync function testDataset(env, store, task, lang, dataset) {\n  let execTime = -1;\n  try {\n    const n = dataset.testcases.length;\n    let totalTime = 0;\n    let wallTime = 0;\n\n    for (let i = 0; i < n; i += JudgeConfig.MAX_SIMUL_TESTS) {\n      const cases = [];\n      const boxes = [];\n      for (let j = 0; j < JudgeConfig.MAX_SIMUL_TESTS && i + j < n; j++) {\n        const iso = new Isolate(env, store);\n        boxes.push(iso);\n        cases.push(testCaseAsync(env, store, iso, task, lang,\n                                 dataset, dataset.testcases[i + j]));\n      }\n\n      // eslint-disable-next-line no-await-in-loop\n      const res = await Promise.all(cases.map(promiseReflect));\n      env.pingCurrent().then(() => null).catch(console.error);\n\n      for (let j = 0; j < JudgeConfig.MAX_SIMUL_TESTS && i + j < n; j++) {\n        const { status } = res[j];\n\n        if (status === \"rejected\")\n          throw res[j].error;\n\n        const caseResult = res[j].data;\n        totalTime += boxes[j].getRunningTime();\n        wallTime += boxes[j].getWallTime();\n        if (caseResult.info.hasOwnProperty(\"time\"))\n          execTime = Math.max(execTime, caseResult.info.time);\n\n        if (caseResult.verdict !== \"VERDICT_AC\") {\n          caseResult.passed = i + j;\n          if (execTime >= 0)\n            caseResult.info.time = execTime;\n          return caseResult;\n        }\n      }\n\n      // eslint-disable-next-line require-await, no-await-in-loop\n      await Promise.all(boxes.map(async box => box.cleanup()));\n    }\n\n    console.log(\"rt\", totalTime);\n    console.log(\"wt\", wallTime);\n  } catch (e) {\n    logger.error(\"dataset test failed - %s\", e.toString());\n    return new Verdict(0, \"VERDICT_JE\");\n  }\n\n  return new Verdict(1, \"VERDICT_AC\", dataset.testcases.length, { time: execTime });\n}\n\n/**\n*   Test code against testcases of the given task, in the given language.\n*   Created files in storage are: _/checker_exec, _/sol_exec\n*\n*   @param {JudgeEnvironment}\n*   @param {string} unique file ID of the package\n*   @param {Task}\n*   @param {Storage}\n*   @param {string} the submitted code\n*   @param {string} language of the submitted code\n*   @returns {Verdict} evalution output/verdict\n */\nasync function testTask(env, packageFid, task, store, code, lang) {\n  // create solution source in the storage\n  await store.createFileFromContent(SOURCE_PATH, code);\n\n  // setup compilation step\n  const compilationSteps = [compilationStepAsync(env, store, lang)];\n\n  // check for cached checker\n  if (env.checkerCache.exists(packageFid)) {\n    const checkerPath = env.checkerCache.getFilePath(packageFid);\n    await store.createFileFromContent(CHECKER_EXEC_PATH, await fse.readFile(checkerPath));\n    env.checkerCache.ping(packageFid);\n    console.log(\"using cached checker\");\n  } else {\n    compilationSteps.push(compilationStepAsync(env, store, task.getCheckerLanguage(),\n                                               task.getChecker(), CHECKER_EXEC_PATH));\n  }\n\n  // compile files\n  const [compilationResult,\n         checkerCompilationResult] = await Promise.all(compilationSteps);\n\n    // sandbox crashed\n  if (!Isolate.translateBoxExitCode(compilationResult.code)) {\n    console.log(\"sandbox crashed in compilation step\");\n    console.log(compilationResult);\n    return utils.fillUpTo([new Verdict(0, \"VERDICT_JE\")], task.getDatasetsCount());\n  }\n\n  // check if checker had to be compiled (in case it wasn't cached).\n  if (checkerCompilationResult != null) {\n    // sandbox crashed\n    if (!Isolate.translateBoxExitCode(checkerCompilationResult.code)) {\n      console.log(\"sandbox crashed in checker compilation step\");\n      console.log(checkerCompilationResult);\n      return utils.fillUpTo([new Verdict(0, \"VERDICT_JE\")], task.getDatasetsCount());\n    }\n\n    // checker compilation failed, do something and return\n    if (checkerCompilationResult.code === 1) {\n      const dummy = new Isolate(env, null, compilationResult.log);\n      const exitStatus = dummy.getExitStatus();\n      const exitCode = dummy.getExitCode();\n      const output = compilationResult.stderr;\n\n      logger.error(\"checker compilation failed with error %s (%d):\\n%s\",\n                   exitStatus, exitCode, output);\n\n      return utils.fillUpTo([new Verdict(0, \"VERDICT_JE\")], task.getDatasetsCount());\n    }\n\n    // cache compiled checker\n    console.log(\"caching compiled checker\");\n    await env.checkerCache.addFromContent(packageFid,\n                                          await store.getFileBuffer(CHECKER_EXEC_PATH));\n  }\n\n  // compilation failed\n  if (compilationResult.code === 1) {\n    const dummy = new Isolate(env, null, compilationResult.log);\n    const exitStatus = dummy.getExitStatus();\n    const output = compilationResult.stderr;\n\n    if (exitStatus === IsolateConst.EXIT_TIMEOUT || exitStatus === IsolateConst.EXIT_TIMEOUT_WALL)\n      return utils.fillUpTo([new Verdict(0, \"VERDICT_CTE\")], task.getDatasetsCount());\n\n    return utils.fillUpTo([new Verdict(0, \"VERDICT_CE\", -1, output)], task.getDatasetsCount());\n  }\n\n  // now run solution against each of the datasets in ladder fashion\n  const verdicts = [];\n  for (const dataset of task.getDatasets()) {\n    // eslint-disable-next-line no-await-in-loop\n    const datasetVerdict = await testDataset(env, store, task, lang, dataset);\n    verdicts.push(datasetVerdict);\n\n    // if it was not accepted, break here (ladder effect)\n    if (datasetVerdict.verdict !== \"VERDICT_AC\")\n      break;\n  }\n\n  // push skip verdict to enforce ladder effect\n  verdicts.push(new Verdict(0, \"VERDICT_SKIP\"));\n  return utils.fillUpTo(verdicts, task.getDatasetsCount());\n}\n\n/**\n * Test solution against package test cases\n * @param env\n * @param pack\n * @param code\n * @param lang\n */\nasync function testPackage(env, packageFid, code, lang) {\n  const pack = env.cache.getFilePath(packageFid);\n  const store = new Storage();\n  await store.loadZip(pack);\n\n  const Loader = await loader.autoDetect(store);\n  if (Loader === null)\n    throw new Error(\"Package is not loadable\");\n\n  const task = await new Loader(store).load();\n\n  const datasets = task.getDatasets();\n  const verdicts = await testTask(env, packageFid, task, store, code, lang);\n\n  const res = {};\n  for (let i = 0; i < datasets.length; i++)\n    res[datasets[i].name] = verdicts[i];\n\n\n  return res;\n}\n\n// testing\nif (!module.parent && false) {\n  (async () => {\n    const env = new JudgeEnvironment();\n    const store = new Storage();\n    await store.loadZip(\"test/test_contest.zip\");\n\n    const judeLoader = new JudeLoader(store);\n    const task = await judeLoader.load();\n\n    /* eslint-disable */\n    const code = \"\\#include \\<bits/stdc++.h>\\nusing namespace std;\\nint main(){int x, y; cin >> x >> y; cout << x+y << ' ' << x*y << endl;}\";\n    const slow_code = \"\\#include \\<bits/stdc++.h>\\nusing namespace std;\\nint main(){for(int i = 0; i < 1000000/2; i++) cerr << 129312 << '\\\\n'; int x, y; cin >> x >> y; cout << x+y << ' ' << x*y << endl;}\";\n    const tle_code = \"\\#include \\<bits/stdc++.h>\\nusing namespace std;\\nint main(){for(int i = 0; i < 1000000000000LL; i++);}\";\n    const fake_mle_code = \"\\#include \\<bits/stdc++.h>\\nusing namespace std;\\nint main(){vector<int> v(1000000000);}\";\n    const slow2_code = \"\\#include \\<bits/stdc++.h>\\nusing namespace std;\\nint main(){int acc = 0; for(int i = 0; i < 1000000000; i++) acc += i; cout << acc << endl;}\";\n        // console.log(code)\n        // utils.logInspect(testTask(env, task, store, slow_code, \"CPP\"))\n\n    const java_wacode = `\n        public class Main {\n            public static void main(String[] args) {\n                System.out.println(\"Hello!\");\n            }\n        }`;\n\n    const java_mlecode = `\n        public class Main {\n            public static void main(String[] args) {\n                long a[] = new long[1024*1024*21];\n                for(int i = 0; i < 1024*1024*21; i++) a[i] = i;\n                System.out.println(\"Hello!\");\n            }\n        }`;\n    \n    const java_rtecode = `import java.util.*;\n \npublic class Main\n{\n\tpublic static void main (String[] args)\n\t{\n\t\tint n;\n\t\tScanner in = new Scanner(System.in);\n\t\tn = in.nextInt();\n\t\tif (n % 100 >= 65) \n\t\t\tn = 100 * (n / 100 + 1);\n\t\tif (n % 20 > 15) \n\t\t\tn = 20 * (n / 20 + 1);\n\t\tSystem.out.println((n / 100) * 100 + (n % 100 / 20) * 30 + 2 * (n % 20));\n\t}\n}`;\n\n    const crazy_code = `import java.io.OutputStream;\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.io.PrintWriter;\nimport java.util.StringTokenizer;\nimport java.io.IOException;\nimport java.io.BufferedReader;\nimport java.io.InputStreamReader;\nimport java.io.InputStream;\n\n/**\n * Built using CHelper plug-in\n * Actual solution is at the top\n */\npublic class Main {\n    public static void main(String[] args) {\n        TaskG solver = new TaskG();\n        solver.solve();\n    }\n\n    static class TaskG {\n        static final long MODULO = (long) (1e9 + 7);\n\n        public void solve() {\n        \tSystem.out.println(5);\n        }\n\n        private int gcd(int a, int b) {\n            while (b > 0) {\n                int t = a % b;\n                a = b;\n                b = t;\n            }\n            return a;\n        }\n    }\n}`;\n\n    const pycode = \"print '5'\";\n\n    utils.logInspect(await testTask(env, task, store, java_rtecode, \"Java\"));\n\n        //\n        // let env = new JudgeEnvironment()\n        // let store = new Storage()\n        // store.load(\"test_contest/\")\n        //\n        // let iso = new Isolate(env, store)\n        // iso.init()\n        //\n        // Compilation.CPP(iso, store, \"checker.cpp\", \"_/checker\")\n        // console.log(iso.getLog())\n        // Compilation.CPP(iso, store, \"sol.cpp\", \"_/sol\")\n        // console.log(iso.getLog())\n        //\n        // iso.cleanup()\n        //\n        // iso = new Isolate(env, store)\n        // iso.init()\n        //\n        // Evaluation.CPP(iso, store, \"_/sol\", \"tests/set1/3.in\")\n        //\n        // iso.createFileFromStorage(\"input\", \"tests/set1/3.in\")\n        // iso.createFileFromStorage(\"answer\", \"tests/set1/3.out\")\n        // iso.createFileFromStorage(\"checker\", \"_/checker\", true)\n        //\n        // console.log(evaluate(iso, store, [\n        //     \"./checker\", \"input\", \"output\", \"answer\"\n        // ], null, \"checker_output\", \"checker_error\"))\n        //\n        // console.log(iso.getLog())\n        // console.log(iso.getFileToString(\"checker_output\"))\n        //\n        // //sleep(10)\n        //\n        // iso.cleanup()\n  })();\n}\n\n/* eslint-enable */\nconst availableLanguages = {\n  CPP: \"C++ 14\",\n  C: \"C 11\",\n  Java: \"Java 8\",\n  Py2: \"Python 2\",\n  Py3: \"Python 3\"\n};\n\nmodule.exports = { testTask, testPackage, availableLanguages };\n\n\n\n// WEBPACK FOOTER //\n// ./judge/grader.js","module.exports = require(\"promise-reflect\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"promise-reflect\"\n// module id = 49\n// module chunks = 0","const VerdictConst = {\n  \"\": \"won't be judged\",\n  VERDICT_INQ: \"in queue\",\n  VERDICT_SKIP: \"skipped\",\n\n  VERDICT_WA: \"wrong answer\",\n  VERDICT_RTE: \"runtime error\",\n  VERDICT_MLE: \"memory limit exceeded\",\n  VERDICT_TLE: \"time limit exceeded\",\n  VERDICT_WTE: \"walltime limit exceeded\",\n  VERDICT_OLE: \"output limit exceeded\",\n\n  VERDICT_CE: \"compilation error\",\n  VERDICT_CTE: \"compilation timed out\",\n\n  VERDICT_FAIL: \"checker failed\",\n  VERDICT_CHTE: \"checker timed out\",\n\n  VERDICT_JE: \"judge crashed\",\n  VERDICT_UE: \"unknown error\",\n\n  VERDICT_AC: \"accepted\"\n};\n\nconst VerdictTag = {\n  \"\": \"white\",\n  VERDICT_INQ: \"light\",\n  VERDICT_SKIP: \"dark\",\n\n  VERDICT_WA: \"danger\",\n  VERDICT_RTE: \"danger\",\n  VERDICT_MLE: \"danger\",\n  VERDICT_TLE: \"danger\",\n  VERDICT_WTE: \"danger\",\n  VERDICT_OLE: \"danger\",\n\n  VERDICT_CE: \"warning\",\n  VERDICT_CTE: \"warning\",\n\n  VERDICT_FAIL: \"info\",\n  VERDICT_CHTE: \"info\",\n\n  VERDICT_JE: \"black\",\n  VERDICT_UE: \"black\",\n\n  VERDICT_AC: \"success\"\n};\n\nconst VerdictGhost = {\n  \"\": \"RJ\",\n  VERDICT_INQ: \"RJ\",\n  VERDICT_SKIP: \"RJ\",\n\n  VERDICT_WA: \"WA\",\n  VERDICT_RTE: \"RT\",\n  VERDICT_MLE: \"RT\",\n  VERDICT_TLE: \"TL\",\n  VERDICT_WTE: \"TL\",\n  VERDICT_OLE: \"RT\",\n\n  VERDICT_CE: \"CE\",\n  VERDICT_CTE: \"CE\",\n\n  VERDICT_FAIL: \"RJ\",\n  VERDICT_CHTE: \"RJ\",\n\n  VERDICT_JE: \"RJ\",\n  VERDICT_UE: \"RJ\",\n\n  VERDICT_AC: \"OK\"\n};\n\n\nclass Verdict {\n  constructor(score, verdict, passed = -1, info = {}) {\n    this.score = score || 0;\n    this.verdict = verdict;\n    this.passed = passed;\n    this.info = {};\n    if (typeof info === \"string\")\n      Object.assign(this.info, { text: info });\n    else\n      Object.assign(this.info, info || {});\n  }\n\n  wasExecuted() {\n    return this.passed >= 0;\n  }\n\n  getTextInfo() {\n    return this.info.text || \"\";\n  }\n\n  getVerdictCode() {\n    return this.verdict;\n  }\n\n  getVerdictText() {\n    return VerdictConst.hasOwnProperty(this.verdict)\n      ? VerdictConst[this.verdict]\n      : this.verdict;\n  }\n\n  getScore() {\n    return this.score;\n  }\n\n  getPassed() {\n    return Math.max(0, this.passed);\n  }\n\n  toJSON() {\n    return {\n      score: this.score,\n      verdict: this.verdict,\n      passed: this.passed,\n      info: this.info\n    };\n  }\n\n  static fromJSON(json) {\n    return new Verdict(json.score || 0, json.verdict, json.passed || -1, json.info || {});\n  }\n}\n\nmodule.exports = {\n  Verdict,\n  VerdictConst,\n  VerdictTag,\n  VerdictGhost\n};\n\n\n\n// WEBPACK FOOTER //\n// ./judge/verdict.js","module.exports = require(\"babel-runtime/core-js/object/assign\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"babel-runtime/core-js/object/assign\"\n// module id = 51\n// module chunks = 0","module.exports = require(\"babel-runtime/helpers/typeof\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"babel-runtime/helpers/typeof\"\n// module id = 52\n// module chunks = 0","module.exports = require(\"util\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"util\"\n// module id = 53\n// module chunks = 0","/**\n * Created by rsalesc on 15/06/16.\n */\nconst Promise = require(\"bluebird\");\n\nconst fs = require(\"fs-extra\");\n\nconst path = require(\"path\");\nconst logger = require(\"./logger\");\nconst jenv = require(\"./environment\");\nconst utils = require(\"./utils\");\nconst { globAsync } = utils;\n\nconst Storage = require(\"./storage\").MemoryStorage;\nconst { JudgeConfig } = jenv;\nconst spawnDetachedPromise = require(\"child-process-promise\").spawn;\n\n/*\n*   spawnDetached async version (promisified)\n *\nfunction spawnDetachedAsync(command, args=[], options={}){\n    return new Promise((resolve, reject) => {\n        options.stdio = ['ignore']\n        options.detached = true;\n        let successfulExitCodes = (options && options.successfulExitCodes) || [0];\n\n        let proc = spawn(command, args, options)\n        proc.unref();\n\n        proc.on(\"close\", (code) => {\n            if(successfulExitCodes.indexOf(code) === -1) {\n                let commandStr = command + (args.length ? (' ' + args.join(' ')) : '');\n                let err = {\n                    code,\n                    message: '`' + commandStr + '` failed with code ' + code,\n                    toString(){\n                        return this.message\n                    }\n                }\n\n                reject(err)\n            } else {\n                resolve({code})\n            }\n        })\n\n        proc.on(\"error\", reject)\n    })\n}*/\n\n// debug\nfunction spawnDetachedAsync(command, args = [], options = {}) {\n  if (options.hasOwnProperty(\"stdio\")) {\n    options.capture = options.stdio;\n    delete options.stdio;\n  }\n  return spawnDetachedPromise(command, args, options);\n}\n\n/*\n* This is the base class for sandboxes\n* All sandboxes should be extended from this\n* Make sure it runs inside an async environment\n* @abstract\n */\nclass Sandbox {\n  /*\n    * @param {Storage} storage which will provide quick interaction (in-memory)\n    *           between host FS and sandbox FS\n    * @param {JudgeEnvironment} judge environment used by the sandbox\n     */\n  constructor(env, store) {\n    //if (new.target == Sandbox)\n    //  throw `Cannot instantiate abstract class Sandbox`;\n    this.cacher = store;\n    this.env = env;\n  }\n\n  setStorage(store) {\n    this.cacher = store;\n  }\n\n  setEnvironment(env) {\n    this.env = env;\n  }\n\n  getRootPath() {\n    throw \"Concrete sandboxes must implement this function\";\n  }\n\n  getRunningTime() {\n    throw \"Concrete sandboxes must implement this function\";\n  }\n\n  getMemoryUsage() {\n    throw \"Concrete sandboxes must implement this function\";\n  }\n\n  getExitCode() {\n    throw \"Concrete sandboxes must implement this function\";\n  }\n\n  /*\n    * @param {string} path in sandbox (relative to its bound directory)\n    * @returns {string} absolute path in host\n    **/\n  resolvePath(p) {\n    return path.join(this.getRootPath(), p);\n  }\n\n  _getMode(exec) {\n    if (exec === true)\n      return 0o777;\n    else if (exec === false)\n      return 0o664;\n    return exec;\n  }\n\n  /*\n    *   Open a new file in sandbox\n    *   @param {string} path in sandbox\n    *   @param {string} flags to fs.open\n    *   @param {boolean|integer} [exec=false] is the new file executable, or octal mode\n    *   @returns {number} file descriptor\n     */\n  async openFile(p, flags = \"wx+\", exec = false) {\n    const absPath = this.resolvePath(p);\n    try {\n      const fd = await fs.open(absPath, flags, this._getMode(exec));\n      return fd;\n    } catch (e) {\n      logger.error(\"Sandbox %s could not open file %s\", this.constructor.name, p);\n      throw e;\n    }\n  }\n\n  /*\n    * Create a new file in sandbox and close it\n    * @param {string} path in sandbox\n    * @param {boolean|integer} [exec=false] is the new file executable, or octal mode\n     */\n  async createFile(p, exec = false) {\n    const absPath = this.resolvePath(p);\n    try {\n      const fd = await fs.open(absPath, \"wx+\");\n      await fs.chmod(absPath, this._getMode(exec));\n      await fs.close(fd);\n    } catch (e) {\n      logger.error(\"Sandbox %s could not create file %s\", this.constructor.name, p);\n      throw e;\n    }\n  }\n\n  /*\n    * Same as {Sandbox#createFile}, but writes file from {FileCacher}\n    * @param {string} path in sandbox\n    * @param {string} path/ID in {FileCacher}\n    * @param {boolean|integer} [exec=false] is the new file executable, or octal mode\n     */\n  async createFileFromStorage(p, d, exec = false) {\n    const absPath = this.resolvePath(p);\n    try {\n      const buf = await this.cacher.getFileBuffer(d);\n      await fs.writeFile(absPath, buf, { flag: \"wx+\" });\n      await fs.chmod(absPath, this._getMode(exec));\n    } catch (e) {\n      logger.error(\"Sandbox %s could not create file from storage\", this.constructor.name);\n      throw e;\n    }\n  }\n\n  async createFileFromString(p, content, exec = false) {\n    const absPath = this.resolvePath(p);\n    try {\n      await fs.writeFile(absPath, content, { flag: \"wx+\" });\n      await fs.chmod(absPath, this._getMode(exec));\n    } catch (e) {\n      logger.error(\"Sandbox %s could not create file from storage\", this.constructor.name);\n      throw e;\n    }\n  }\n\n  /*\n    *   Get an opened file from sandbox\n    *   @param {string} path in sandbox\n    *   @returns {number} file descriptor\n     */\n  async getFile(p) {\n    try {\n      const absPath = this.resolvePath(p);\n      const fd = await fs.open(absPath, \"r\");\n      return fd;\n    } catch (e) {\n      logger.error(\"Sandbox %s could not retrieve file %s\",\n                   this.constructor.name, p);\n      throw e;\n    }\n  }\n\n  async getFileToString(p) {\n    try {\n      const absPath = this.resolvePath(p);\n      return await fs.readFile(absPath, \"utf8\");\n    } catch (e) {\n      if (e.code === \"ENOENT\")\n        return \"\";\n      logger.error(\"Sandbox %s could not retrieve file %s\",\n                   this.constructor.name, p);\n      throw e;\n    }\n  }\n\n  /*\n    *   Get file from sandbox and read it into {FileCacher} storage\n    *   @param {string} path in sandbox\n    *   @param {string} path/ID in {FileCacher} storage\n     */\n  async getFileToStorage(p, d) {\n    try {\n      const absPath = this.resolvePath(p);\n      await this.cacher.createFileFromContent(d, await fs.readFile(absPath));\n    } catch (e) {\n      logger.error(\"Sandbox %s could not retrieve file %s to storage\",\n                   this.constructor.name, p);\n    }\n  }\n\n  async globToStorage(pattern, fun) {\n    try {\n      const files = await globAsync(pattern, { cwd: this.getRootPath(), absolute: true });\n      await Promise.all(files.map(async (file) => {\n        this.cacher.createFileFromContent(fun(file), await fs.readFile(file));\n      }));\n    } catch (ex) {\n      console.log(ex);\n      logger.error(\"Sandbox could not save class files\");\n    }\n  }\n\n  async globFromStorage(pattern, fun) {\n    const matches = await this.cacher.glob(pattern);\n    await Promise.all(matches.map(async (match) => {\n      await this.createFileFromStorage(fun(match), match);\n    }));\n  }\n\n  async getFileStats(p) {\n    const res = await fs.stat(this.resolvePath(p));\n    return res;\n  }\n\n  async chmod(p, mode = 0o664) {\n    await fs.chmod(this.resolvePath(p), mode);\n  }\n\n  async pathExists(p) {\n    try {\n      await this.getFileStats(p);\n      return true;\n    } catch (e) {\n      return false;\n    }\n  }\n\n  async fileExists(p) {\n    try {\n      const res = await this.getFileStats(p);\n      return res.isFile();\n    } catch (e) {\n      console.log(e);\n      return false;\n    }\n  }\n\n  async dirExists(p) {\n    try {\n      const res = await this.getFileStats(p);\n      return res.isDirectory();\n    } catch (e) {\n      return false;\n    }\n  }\n\n  async removeDir(p) {\n    try {\n      await fs.rmdir(this.resolvePath(p));\n    } catch (e) {\n      if (e.code !== \"ENOENT\")\n        throw e;\n    }\n  }\n\n  async removeFile(p) {\n    try {\n      await fs.unlink(this.resolvePath(p));\n    } catch (e) {\n      if (e.code !== \"ENOENT\")\n        throw e;\n    }\n  }\n}\n\nconst IsolateConst = {\n  EXIT_SANDBOX_ERROR: \"sandbox error\",\n  EXIT_OK: \"ok\",\n  EXIT_SIGNAL: \"signal\",\n  EXIT_TIMEOUT: \"timeout\",\n  EXIT_TIMEOUT_WALL: \"wall timeout\",\n  EXIT_FILE_ACCESS: \"file access\",\n  EXIT_SYSCALL: \"syscall\",\n  EXIT_OUTPUT_LIMIT: \"output limit exceeded\",\n  EXIT_NONZERO_RETURN: \"nonzero return\"\n};\n\nclass Isolate extends Sandbox {\n  constructor(env, store, log = {}) {\n    super(env, store);\n    this.log = log;\n    this.path = null;\n    this.initialized = false;\n  }\n\n  getRootPath() {\n    if (!this.path)\n      throw \"sandbox was not init'd\";\n    return this.path;\n  }\n\n  getChdirPath(p) {\n    return path.join(this.innerDir, p);\n  }\n\n  setDefaultConfigs() {\n    this.cgroup = true;\n    this.chdir = this.innerDir;\n    this.dirs = [\n      { in: this.innerDir, out: this.path, opts: \"rw\" }\n    ];\n\n    this.preserveEnv = false;\n    this.inheritEnv = [];\n    this.setEnv = {};\n    this.fsize = null;\n    this.stdin = null;\n    this.stdout = null;\n    this.stderr = null;\n    this.stackSize = null;\n    this.memorySize = null;\n    this.maxProcesses = 1;\n    this.timelimit = null;\n    this.wallclockLimit = null;\n    this.extraTimelimit = null;\n    this.verbosity = 0;\n    this.bufferize = null;\n\n    this.cgMemorySize = null;\n    this.cgTiming = false;\n  }\n\n  async init() {\n    if (this.initialized) {\n      this.setDefaultConfigs();\n      await fs.emptyDir(this.path);\n      return;\n    }\n\n    this.boxId = this.env.getNextBoxId();\n    this.executable = JudgeConfig.ISOLATE_PATH;\n    this.execs = -1;\n\n    this.outerDir = await fs.mkdtemp(path.join(JudgeConfig.TEMP_DIR, \"iso-\"));\n    this.innerDir = \"/tmp\";\n\n    // have to use sum, absoluteness of tmp will mess things up\n    this.path = this.outerDir + this.innerDir;\n\n    // defaults to 0o777\n    await fs.mkdir(this.path);\n    await fs.chmod(this.path, 0o777);\n\n    logger.debug(\"Creating isolate sandbox %s (%d)\", this.path, this.boxId);\n    this.setDefaultConfigs();\n\n    const params = [];\n    if (this.cgroup)\n      params.push(\"--cg\");\n    params.push(`--box-id=${this.boxId}`);\n    params.push(\"--init\");\n\n    try {\n      await spawnDetachedAsync(this.executable, params, { stdio: [\"ignore\"]});\n      this.initialized = true;\n    } catch (e) {\n      logger.error(\"[Isolate] Sandbox could not be initialized\");\n      throw e;\n    }\n  }\n\n  getBoxFilePath(p) {\n    if (this.bufferize)\n      return this.resolvePath(p);\n    return this.getChdirPath(p);\n  }\n\n  getRunArgs() {\n    const res = [`--box-id=${this.boxId}`];\n    // remember to add meta parameter (for logging) before execing\n\n    if (this.bufferize)\n      res.push(`--bufferize=${this.bufferize}`);\n    if (this.chdir)\n      res.push(`--chdir=${this.chdir}`);\n    for (const dir of this.dirs) {\n      let s = dir.in;\n      if (dir.out)\n        s += `=${dir.out}`;\n      if (dir.opts)\n        s += `:${dir.opts}`;\n      res.push(`--dir=${s}`);\n    }\n    if (this.preserveEnv)\n      res.push(\"--full-env\");\n\n    for (const v of this.inheritEnv)\n      res.push(`--env=${v}`);\n    for (const key of Object.keys(this.setEnv))\n      res.push(`--env=${key}=${this.setEnv[key]}`);\n\n\n    if (this.fsize)\n      res.push(`--fsize=${this.fsize}`);\n    if (this.stdin)\n      res.push(`--stdin=${this.getChdirPath(this.stdin)}`);\n    if (this.stdout)\n      res.push(`--stdout=${this.getBoxFilePath(this.stdout)}`);\n    if (this.stderr)\n      res.push(`--stderr=${this.getBoxFilePath(this.stderr)}`);\n    if (this.stackSize)\n      res.push(`--stack=${this.stackSize}`);\n    if (this.memorySize)\n      res.push(`--mem=${this.memorySize}`);\n    if (this.maxProcesses)\n      res.push(`--processes=${this.maxProcesses}`);\n    else\n      res.push(\"--processes\");\n\n    if (this.timelimit)\n      res.push(`--time=${this.timelimit}`);\n    if (this.wallclockLimit)\n      res.push(`--wall-time=${this.wallclockLimit}`);\n    if (this.extraTimelimit)\n      res.push(`--extra-time=${this.extraTimelimit}`);\n\n    for (let i = 0; i < this.verbose; i++)\n      res.push(\"--verbose\");\n\n    if (this.cgroup)\n      res.push(\"--cg\");\n    if (this.cgMemorySize)\n      res.push(`--cg-mem=${this.cgMemorySize}`);\n    if (this.cgTiming)\n      res.push(\"--cg-timing\");\n\n    return res;\n  }\n\n  async getLog(ex) {\n    if (this.execs < 0)\n      throw \"No execution took place in this sandbox\";\n    const exec = ex || this.execs;\n    if (exec > this.execs)\n      throw \"This execution did not take place in this sandbox\";\n\n    if (this.log && this.log.exec === exec)\n      return this.log;\n\n    const fn = `run.log.${exec}`;\n    const res = {};\n\n    try {\n      const log = await this.getFileToString(fn);\n      for (const line of log.split(/[\\r?\\n]+/g)) {\n        const [key, value] = line.split(\":\", 2);\n        if (res.key)\n          res[key].push(value);\n        else\n          res[key] = [value];\n      }\n\n      this.log = res;\n      this.log.exec = exec;\n    } catch (e) {\n      logger.error(\"Error trying to read the log file %s\", this.resolvePath(fn));\n      throw e;\n    }\n\n    return this.log;\n  }\n\n  // seconds (float)\n  getRunningTime() {\n    if (this.log.hasOwnProperty(\"time\"))\n      return parseFloat(this.log.time[0]);\n    return null;\n  }\n\n  // in kilobytes (int)\n  getMemoryUsage() {\n    if (this.log.hasOwnProperty(\"cg-mem\"))\n      return parseInt(this.log[\"cg-mem\"][0], 10);\n    return null;\n  }\n\n  getWallTime() {\n    if (this.log.hasOwnProperty(\"time-wall\"))\n      return parseFloat(this.log[\"time-wall\"][0], 10);\n    return null;\n  }\n\n  getExitCode() {\n    if (this.log.hasOwnProperty(\"exitcode\"))\n      return parseInt(this.log.exitcode[0], 10);\n    return 0;\n  }\n\n  getKillingSignal() {\n    if (this.log.hasOwnProperty(\"exitsig\"))\n      return parseInt(this.log.exitsig[0], 10);\n    return 0;\n  }\n\n  getStatusList() {\n    if (this.log.hasOwnProperty(\"status\"))\n      return this.log.status;\n    return [];\n  }\n\n  static translateBoxExitCode(code) {\n    if (code === 2)\n      return false;\n    if (code === 1 || code === 0)\n      return true;\n    throw `Unknown sandbox exitcode (${code})`;\n  }\n\n  getExitStatus() {\n    const checkWall = (message) => {\n      for (const msg of message) {\n        if (msg.indexOf(\"wall\") !== -1)\n          return true;\n      }\n      return false;\n    };\n\n    const list = this.getStatusList();\n    if (list.indexOf(\"XX\") !== -1)\n      return IsolateConst.EXIT_SANDBOX_ERROR;\n    if (list.indexOf(\"FO\") !== -1)\n      return IsolateConst.EXIT_SYSCALL;\n    if (list.indexOf(\"FA\") !== -1)\n      return IsolateConst.EXIT_FILE_ACCESS;\n    if (list.indexOf(\"TO\") !== -1) {\n      if (this.log.hasOwnProperty(\"message\") && checkWall(this.log.message))\n        return IsolateConst.EXIT_TIMEOUT_WALL;\n      return IsolateConst.EXIT_TIMEOUT;\n    }\n    if (list.indexOf(\"SG\") !== -1)\n      return IsolateConst.EXIT_SIGNAL;\n    if (list.indexOf(\"OL\") !== -1)\n      return IsolateConst.EXIT_OUTPUT_LIMIT;\n\n    if (list.indexOf(\"RE\") !== -1)\n      return IsolateConst.NONZERO_RETURN;\n    return IsolateConst.EXIT_OK;\n  }\n\n  async executeBufferized(...args) {\n    const oldVal = this.bufferize;\n    try {\n      this.bufferize = JudgeConfig.OUTPUT_LIMIT;\n      const res = await this.execute(...args);\n      this.bufferize = oldVal;\n      return res;\n    } catch (e) {\n      this.bufferize = oldVal;\n      throw e;\n    }\n  }\n\n  async execute(comm, capture = [\"ignore\"], promise = false) {\n    this.execs += 1;\n    this.log = null;\n    let args = this.getRunArgs();\n    args.push(`--meta=${this.resolvePath(`run.log.${this.execs}`)}`);\n    args.push(\"--run\");\n    args.push(\"--\");\n\n    const command = Array.isArray(comm)\n      ? comm\n      : [comm];\n    args = args.concat(command);\n\n    if (promise)\n      return spawnDetachedAsync(this.executable, args, { stdio: capture });\n\n    let res = null;\n    try {\n      res = await spawnDetachedAsync(this.executable, args, { stdio: capture });\n    } catch (e) {\n      res = e;\n    }\n\n    const ret = {\n      code: res.code,\n      message: res.message\n    };\n    for (const cap of capture) {\n      if (res.hasOwnProperty(cap))\n        ret[cap] = res[cap].toString();\n    }\n    return ret;\n  }\n\n  async cleanup() {\n    logger.debug(\"Deleting Isolate sandbox %s (%d)\", this.path, this.boxId);\n    const args = [`--box-id=${this.boxId}`];\n    if (this.cgroup)\n      args.push(\"--cg\");\n    args.push(\"--cleanup\");\n\n    try {\n      if (this.initialized)\n        await spawnDetachedAsync(this.executable, args, { stdio: [\"ignore\"]});\n      await fs.remove(this.outerDir);\n    } catch (e) {\n      logger.error(\"Isolate sandbox %s (%d) could not be deleted\", this.path, this.boxId);\n      throw e;\n    }\n  }\n}\n\nclass IsolatePool {\n  constructor(size) {\n    this.size = size;\n    this.sandboxes = [];\n    this.ptr = 0;\n    for (let i = 0; i < size; i++)\n      this.sandboxes.push(new Isolate());\n  }\n\n  getNext(env, store, log = []) {\n    const sandbox = this.sandboxes[this.ptr];\n    this.ptr += 1;\n    this.ptr %= this.size;\n    sandbox.setEnvironment(env);\n    sandbox.setStorage(store);\n    sandbox.log = log;\n    return sandbox;\n  }\n\n  cleanup() {\n    for (const sandbox of this.sandboxes)\n      sandbox.cleanup();\n  }\n}\n\nif (!module.parent && false) {\n  // eslint-disable-next-line require-await\n  (async () => {\n    console.log(\"Testing with async...\");\n    const env = new jenv.JudgeEnvironment();\n    const store = new Storage();\n\n    const iso = new Isolate(env, store);\n    await store.load(\"test_contest/\");\n\n    await iso.init();\n\n    iso.dirs.push({ in: \"/etc\" });\n\n    iso.preserveEnv = true;\n    iso.maxProcesses = null;\n    iso.timelimit = 20;\n    iso.wallclockLimit = 30;\n    console.log(iso.getRunArgs());\n\n    await iso.createFileFromStorage(\"source.cpp\", \"checker.cpp\");\n\n    try {\n      console.log(await iso.execute([\"/usr/bin/g++\", \"source.cpp\", \"-static\",\n                                     \"-std=c++11\", \"-O2\", \"-lm\"], [\"stdout\", \"stderr\"]));\n\n      await iso.getFileToStorage(\"a.out\", \"_/a.out\");\n      await iso.getLog();\n      console.log(iso.log);\n    } catch (e) {\n      logger.error(\"Could not execute a.out\");\n      console.log(e);\n    }\n\n    await iso.cleanup();\n  })();\n}\n\nmodule.exports = {\n  Sandbox,\n  Isolate,\n  IsolateConst,\n  IsolatePool\n};\n\n\n\n// WEBPACK FOOTER //\n// ./judge/sandbox.js","module.exports = require(\"bluebird\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"bluebird\"\n// module id = 55\n// module chunks = 0","module.exports = require(\"yauzl\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"yauzl\"\n// module id = 56\n// module chunks = 0","module.exports = require(\"concat-stream\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"concat-stream\"\n// module id = 57\n// module chunks = 0","module.exports = require(\"node-wildcard\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"node-wildcard\"\n// module id = 58\n// module chunks = 0","module.exports = require(\"es6-promisify\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"es6-promisify\"\n// module id = 59\n// module chunks = 0","module.exports = require(\"streamifier\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"streamifier\"\n// module id = 60\n// module chunks = 0","module.exports = require(\"child-process-promise\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"child-process-promise\"\n// module id = 61\n// module chunks = 0","/**\n * Created by rsalesc on 14/06/16.\n */\n\nconst path = require(\"path\");\nconst task = require(\"./task\");\nconst YAML = require(\"yamljs\");\nconst logger = require(\"./logger\");\nconst utils = require(\"./utils\");\nconst scoring = require(\"./scoring\");\n\nconst JUDE_FN = \"jude.yml\";\n\n/**\n*   Base class for all Loaders\n*   Make sure it runs inside an aysnc or blockable environment\n*   @abstract\n */\nclass Loader {\n  constructor(store) {\n    //if (new.target == Loader)\n    //  throw `Cannot instantiate abstract class Loader`;\n    this.store = store;\n  }\n\n  /**\n    *   Check if a package can be loaded by this Loader\n    *   @param {Storage} Storage object\n    *   @returns {boolean} if package can be loaded or not\n     */\n  // eslint-disable-next-line no-unused-vars\n  static async isLoadable(store) {\n    throw `Auto-detection not implemented in ${this.name}`;\n  }\n\n  /**\n    *   Load package and return a Task\n    *   @returns {Task} resulting task or null if some error occurs\n     */\n  load() {\n    throw `Load function not implemented in ${this.constructor.name}`;\n  }\n}\n\nclass JudeLoader extends Loader {\n  static async isLoadable(store) {\n    return store.isReadable(JUDE_FN);\n  }\n\n  /**\n    *   Get paths for the tests of dataset\n    *   @param {string} dataset directory\n    *   @returns {Object[]} tests found\n     */\n  async getTestcases(datasetPath) {\n    const testsPath = path.join(\"tests\", datasetPath);\n\n    const inputs = (await this.store.glob(path.join(testsPath, \"/*.in\"))).sort();\n    const res = [];\n\n    for (const input of inputs) {\n      const output = input.replace(/\\.in$/, \".out\");\n      // eslint-disable-next-line no-await-in-loop\n      if (!await this.store.isReadable(output)) {\n        logger.error(\"[%s] test %s should exist\", JudeLoader.name, output);\n        throw \"Missing output file in dataset\";\n      }\n\n      res.push({\n        in: input,\n        out: output\n      });\n    }\n\n    if (res.length === 0) {\n      logger.error(\"[%s] dataset %s is empty\", JudeLoader.name, datasetPath);\n      throw \"Dataset has no tests\";\n    }\n    return res;\n  }\n\n  /**\n    * Returns parsed datasets given their properties in datasets\n    * @param {Object[]} datasets to be parsed in Jude format\n    * @throws if data is inconsistent\n     */\n  async parseDatasets(datasets) {\n    if (!datasets || datasets.length === 0) {\n      logger.error(\"[%s] package has no dataset\", JudeLoader.name);\n      throw \"Package has no dataset\";\n    }\n\n    const res = [];\n    let percentageSum = 0;\n\n    for (const dataset of datasets) {\n      const cur = {\n        name: dataset.name || dataset.path,\n        percentage: dataset.percentage || 0,\n        testcases: await this.getTestcases(dataset.path) // eslint-disable-line no-await-in-loop\n      };\n\n      cur.checkerParams = dataset.checkerParams || cur.name;\n\n      percentageSum += cur.percentage;\n      res.push(cur);\n    }\n\n    // check scoring\n    if (Math.abs(percentageSum - 1) > utils.EPS) {\n      logger.error(\"[%s] datasets percentages should sum to 1\", JudeLoader.name);\n      throw \"Datasets percentages do not sum to 1\";\n    }\n\n    return res;\n  }\n\n  /**\n    *   Get a {Task} object correspondent to the loaded Jude file\n    *   @param {string} loaded Jude file\n    *   @returns {Task} task loaded or null if some error occurred\n     */\n  async getTask(cfg) {\n    const lims = cfg.limits || {};\n    const checks = cfg.checker || {};\n    const multiplier = lims.timeMultiplier || 1;\n    const ratio = lims.timeApproximation || 500;\n\n    const attr = {\n      weight: cfg.weight || 1,\n      datasets: await this.parseDatasets(cfg.datasets),\n      scoring: cfg.scoring || \"ProductScoring\",\n      author: cfg.author || \"\",\n      limits: {\n        // in ms\n        time: lims.time\n          ? Math.ceil(lims.time * multiplier / ratio) * ratio\n          : 1000,\n        memory: lims.memory || 256,\n        source: lims.source || 500\n      },\n      blockedLanguages: [],\n      checker: {\n        language: (checks.language || \"cpp\").toUpperCase(),\n        path: checks.path || \"checker.cpp\"\n      },\n      statement: cfg.statement || null\n    };\n\n    if (!attr.scoring || !scoring.hasOwnProperty(attr.scoring)) {\n      logger.error(\"[%s] scoring type %s does not exist\", JudeLoader.name, attr.scoring);\n      return null;\n    }\n\n    if (attr.statement && !await this.store.isReadable(attr.statement)) {\n      logger.error(\"[%s] statement was specified but could not be find in %s\",\n                   JudeLoader.name, attr.statement);\n      return null;\n    }\n\n    if (!await this.store.isReadable(attr.checker.path)) {\n      logger.error(\"[%s] checker could not be found in %s\", JudeLoader.name, attr.checker.path);\n      return null;\n    }\n\n    return new task.Task(attr);\n  }\n\n  async load() {\n    if (!await this.constructor.isLoadable(this.store)) {\n      logger.error(\"[%s] package is not loadable or does not exist\", JudeLoader.name);\n      return null;\n    }\n\n    try {\n      const cfg = YAML.parse(await this.store.getFileString(JUDE_FN));\n      return this.getTask(cfg);\n    } catch (e) {\n      logger.error(\"[%s] package could not be read or parsed\", JudeLoader.name);\n      logger.debug(e);\n      return null;\n    }\n  }\n}\n\n/**\n* Contains the loaders available for use\n* They can be accessed by their names\n */\nconst LOADERS = new Map([\n  // add loaders here in the following format\n  [JudeLoader.name, JudeLoader]\n]);\n\n/**\n*   Returns a loader capable of loading package informed\n*   @param {Storage} storage object\n*/\nasync function autoDetect(store) {\n  for (const [_, loader] of LOADERS) {\n    // eslint-disable-next-line no-await-in-loop\n    if (await loader.isLoadable(store))\n      return loader;\n  }\n  return null;\n}\n\n// exports names manually since it's still not supported\nmodule.exports = {\n  Loader,\n  JudeLoader,\n  autoDetect,\n  LOADERS\n};\n\n\n\n// WEBPACK FOOTER //\n// ./judge/loader.js","/**\n * Created by rsalesc on 14/06/16.\n */\n\nconst scoring = require(\"./scoring\");\nconst deepcopy = require(\"deepcopy\");\n\nclass Task {\n  constructor(attr) {\n    this.attr = attr;\n  }\n\n  // function to check if task is valid\n\n  /**\n     * Get scoring class\n     */\n  getScoringClass() {\n    return scoring[this.attr.scoring];\n  }\n\n  /**\n     * Get scoring\n     */\n  getScoring() {\n    return new (this.getScoringClass())(this);\n  }\n\n  /*\n    *   Get task directory\n    *   @returns {string} task directory\n     */\n  getDirectory() {\n    return this.attr.wd;\n  }\n\n  /*\n    *   Get checker path\n    *   @returns {string} checker path\n     */\n  getChecker() {\n    return this.attr.checker.path;\n  }\n\n  /*\n    *   Get checker language\n    *   @returns {string} checker language\n     */\n  getCheckerLanguage() {\n    return this.attr.checker.language;\n  }\n\n  /*\n    *   Get datasets\n     */\n  getDatasets() {\n    return this.attr.datasets;\n  }\n\n  /*\n    *   Get count of datasets\n     */\n  getDatasetsCount() {\n    try {\n      return this.attr.datasets.length;\n    } catch (e) {\n      return 0;\n    }\n  }\n\n  /*\n    *   Get timelimit (in secs)\n     */\n  getTimelimit() {\n    try {\n      return this.attr.limits.time / 1000;\n    } catch (e) {\n      return 1.0;\n    }\n  }\n\n  getTimelimitMs() {\n    return this.attr.limits.time;\n  }\n\n  /*\n    *   Get memory limit (in MB)\n     */\n  getMemorylimit() {\n    try {\n      return this.attr.limits.memory;\n    } catch (e) {\n      return 256;\n    }\n  }\n\n  getWeight() {\n    return this.weight || (this.attr.weight || 1);\n  }\n\n  getDataset(index) {\n    const datasets = this.getDatasets();\n    if(index >= datasets.length)\n      return null;\n\n    return datasets[index];\n  }\n\n  getDatasetFromName(name) {\n    const datasets = this.getDatasets();\n    for(let dataset of datasets) {\n      if(dataset.name === name)\n        return dataset;\n    }\n\n    return null;\n  }\n\n  /**\n     * @return {Boolean} if task has a statement specified in package\n     */\n  hasStatement() {\n    return Boolean(this.attr.statement);\n  }\n\n  getStatement() {\n    if (!this.attr.statement)\n      return null;\n    return this.attr.statement;\n  }\n\n  toJSON() {\n    const res = deepcopy(this.attr);\n    for (const dataset of res.datasets)\n      delete dataset.testcases;\n    return res;\n  }\n}\n\nmodule.exports = { Task };\n\n\n\n// WEBPACK FOOTER //\n// ./judge/task.js","module.exports = require(\"deepcopy\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"deepcopy\"\n// module id = 64\n// module chunks = 0","module.exports = require(\"yamljs\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"yamljs\"\n// module id = 65\n// module chunks = 0","const process = require(\"process\");\n\nfunction getSeconds(tuple) {\n  return tuple[0] + (tuple[1] / 1e9);\n}\n\nclass Profiler {\n  constructor() {\n    this.start = {};\n    this.acc = {};\n  }\n\n  fire(task = \"default\") {\n    if (!this.acc.hasOwnProperty(task))\n      this.acc[task] = 0;\n    this.start[task] = process.hrtime();\n  }\n\n  reset(task = \"default\") {\n    this.acc[task] = 0;\n    this.start[task] = process.hrtime();\n  }\n\n  elapsed(task = \"default\") {\n    const started = this.start[task];\n    return this.acc[task] + (started\n        ? getSeconds(process.hrtime(started))\n        : 0);\n  }\n\n  stop(task = \"default\") {\n    this.acc[task] = this.elapsed(task);\n    this.start[task] = null;\n  }\n\n  dump(cb = console.log) {\n    for (const task of Object.keys(this.acc))\n      cb(`${task}: ${this.elapsed(task)}`);\n  }\n}\n\nmodule.exports = Profiler;\n\n\n\n// WEBPACK FOOTER //\n// ./judge/profiler.js"],"sourceRoot":""}